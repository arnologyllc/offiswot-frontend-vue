import{E as Y,_ as S,a as G,b as O}from"./el-overlay.6ca4e62b.js";import"./el-button.e243c5d4.js";import"./el-form-item.4ed993c7.js";import{E as X,s as J,r as c,e as K,w as I,h as u,p as i,i as g,j as d,u as s,k as Q,c as h,l as m,m as N,o as a,t as L,G as E,x as ee,y as se,z as oe}from"./entry.a509592d.js";import{_ as re}from"./email-icon.1a37efbc.js";import{_ as te,a as ie}from"./OvConfirmEmailModal.f81e74b3.js";import{_ as z,a as ne}from"./good.d6317ff5.js";import{_ as B}from"./lock-icon.1e084bec.js";import{L as ae}from"./LoginButtons.6907801a.js";import{E as V}from"./ErrorMassageModal.1c89c491.js";import{h as U,s as q}from"./eye-close-icon.545039e0.js";import{_ as le}from"./_plugin-vue_export-helper.c27b6911.js";import"./focus-trap.14e866f0.js";import"./email-primary-icon.86041680.js";import"./chevron-icon.91af5d67.js";const p=x=>(ee("data-v-a0d6eecd"),x=x(),se(),x),ue={class:"main"},me={class:"main__form"},de=p(()=>i("div",{class:"main__form--title"},"Register",-1)),pe=p(()=>i("div",{class:"main__form--subtitle"},"Please fill the forms to register",-1)),_e={key:0,class:"el-form-item__global-error-container"},ve={class:"el-form-item__global-error"},fe=p(()=>i("img",{src:S,alt:""},null,-1)),ge=p(()=>i("img",{src:re,alt:"email_icon"},null,-1)),we=p(()=>i("span",{for:"email",class:"custom_placeholder"}," Email ",-1)),ce=[we],ye={key:0,class:"el-form-item__error"},be=p(()=>i("div",null,null,-1)),he=p(()=>i("img",{src:ie,alt:"user_icon"},null,-1)),Se={key:0,src:z,alt:""},xe={key:1,src:S,alt:""},ke={key:0,class:"el-form-item__error strength warning"},$e=["innerHTML"],Me={key:0,class:"el-form-item__error"},Ce=["innerHTML"],Ee=p(()=>i("div",null,null,-1)),Ve=p(()=>i("img",{src:B,alt:"password_icon"},null,-1)),Te=p(()=>i("span",{for:"password",class:"custom_placeholder"}," Password ",-1)),Pe=[Te],Ie=["src"],Le={key:0,src:z,alt:""},Ue={key:1,src:ne,alt:""},qe={key:2,src:S,alt:""},ze=["innerHTML"],Be=p(()=>i("div",null,null,-1)),Ae=p(()=>i("img",{src:B,alt:"password_icon"},null,-1)),Fe=p(()=>i("span",{for:"password_confirmation",class:"custom_placeholder"}," Confirm Password ",-1)),He=[Fe],Re=["src"],We={key:0,class:"el-form-item__error"},Ze=["innerHTML"],De=p(()=>i("div",null,null,-1)),je=p(()=>i("div",{class:"terms"},[i("span",null,[oe("By signing up you agree on our "),i("u",null,"Term and Conditions")])],-1)),Ye={__name:"register",setup(x){const T=X(),{registerFailureData:A,registerSuccessData:F}=J(T),y=N(),k=c(!1),$=c(!1),b=c(!1),P=c(!1),l=c({email:null,username:null,password:null,password_confirmation:null}),o=c({email:{value:"",isShow:!1},username:{value:"",status:null,isShow:!1},password:{value:"",status:null,isShow:!1},password_confirmation:{value:"",isShow:!1},global:{value:null}}),H=c({email:[{required:!0,message:"This field is required.",trigger:"blur"},{type:"email",message:"Email is not valid.",trigger:"blur"}],username:[{required:!0,message:"This field is required.",trigger:"blur"},{min:3,message:`Username is improperly formatted.<br />
                      <span class="error_info">Your username must be at least 3 characters long.</span>
                      `,trigger:"blur"},{validator:(r,e,n)=>{/^[A-Za-z0-9_.]*$/g.test(e)?n():n(new Error(`<span>Username is improperly formatted.<br></span>
            <ul class="error_info">
              <li>Your handle can't exceed 30 characters. </li>
              <li>It can only contain letters, numbers, underscores and dots. </li>
              <li>It can't contain symbols or punctuation marks. </li>
              <li>It needs to be unique.</li>
            </ul>`))},trigger:"blur"},{validator:(r,e,n)=>{(e==null?void 0:e.length)===30?(o.value.username.value="Your handle can't exceed 30 characters.",o.value.username.status="Medium",n()):(e==null?void 0:e.length)>0&&(e==null?void 0:e.length)<30?(o.value.username.value="",o.value.username.status=null,n()):(o.value.username.value="This field is required",o.value.username.status=null,n(new Error("This field is required")))},trigger:"change"}],password:[{validator:(r,e,n)=>{e||n(new Error("This field is required"));const f=D(e);f==="Weak"?(n(new Error("Password strength: <b>Weak</b>")),o.value.password.status="Weak"):f==="Medium"?(n(),o.value.password.status="Medium",o.value.password.value="Password strength: <b>Medium</b>"):f==="Strong"&&(n(),o.value.password.status="Strong",o.value.password.value="Password strength: <b>Strong</b>")},trigger:"input"}],password_confirmation:[{required:!0,message:"This field is required.",trigger:"blur"},{validator:(r,e,n)=>{e===""?n(new Error("Please input the password again")):e!==l.value.password?n(new Error("Password and confirm password do not match")):n()},trigger:"blur"}]});K(()=>{window.addEventListener("resize",W)});const R=()=>{y.refs.registerForm.validate((r,...e)=>{if(r)T.registerUser(l.value);else return!1})},M=r=>{y.refs[r].focus()},w=r=>{y.refs.registerForm.validateField(r,(e,n)=>{(o.value[r].status!=="Medium"&&r==="username"||r!=="username")&&(e?r!=="password"&&(o.value[r].value=""):o.value[r].value=n[r][0].message)}),Object.values(l.value).every(e=>e)&&y.refs.registerForm.validate(e=>P.value=e)},v=(r,e)=>{_()?o.value[r].isShow=e==="mouseover":e==="click"&&(o.value[r].isShow=!0)},W=()=>{y.update()},_=()=>window.innerWidth>990,Z=()=>{o.value.global.value=""},D=r=>{const e=/^(?=.*[a-zA-Z])(?=.*[\d!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?])[a-zA-Z\d!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]{8,}$/,n=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\d!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?])[a-zA-Z\d!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]{12,}$/,f=/^(?:(.)(?!\1{3}))*$/,C=["password","admin","qwerty","asdfgh","xzcvb"];if(f.test(r)&&((r==null?void 0:r.length)>15||!C.some(t=>r==null?void 0:r.toLowerCase().includes(t)))){if(n.test(r)&&((r==null?void 0:r.length)>25||!C.some(t=>r.toLowerCase().includes(t))))return"Strong";if(e.test(r))return"Medium"}return"Weak"},j=()=>{switch(o.value.password.status){case"Medium":return"warning";case"Strong":return"done";default:return""}};return I(F,r=>{b.value=!0}),I(A,r=>{if(r==="Account exists, please login."&&(o.value.global.value=r),r==="Email already exists but is not verified."&&(b.value=!0),typeof r!="string")for(const e in r)if(typeof r[e]!="string")for(const n in r[e])o.value.global.value=r[e][n];else o.value.global.value=r[e];else o.value.global.value=r}),(r,e)=>{const n=G,f=O,C=Y;return a(),u("div",ue,[i("div",me,[de,pe,g(C,{ref:"registerForm",class:"main__form--box","hide-required-asterisk":"",autocomplate:"new-password",model:s(l),rules:s(H),onSubmit:Q(R,["prevent"])},{default:d(()=>[s(o).global.value?(a(),u("div",_e,[i("div",ve,[fe,i("span",null,L(s(o).global.value),1)]),i("span",{class:"clear-error",onClick:Z},"X")])):m("",!0),g(f,{prop:"email",class:"form-item"},{error:d(()=>[s(o).email.isShow&&_()?(a(),u("div",ye,[i("span",null,L(s(o).email.value),1)])):m("",!0),be]),default:d(()=>[g(n,{ref:"email",modelValue:s(l).email,"onUpdate:modelValue":e[4]||(e[4]=t=>s(l).email=t),class:"main__form--box__input",placeholder:"E-mail",onInput:e[5]||(e[5]=t=>w("email")),onBlur:e[6]||(e[6]=t=>w("email"))},{prefix:d(()=>[ge]),suffix:d(()=>[s(l).email?(a(),u("div",{key:0,style:{position:"relative"},onClick:e[0]||(e[0]=t=>M("email"))},ce)):m("",!0),s(o).email.value?(a(),u("img",{key:1,class:"error_icon",src:S,alt:"",onMouseover:e[1]||(e[1]=t=>v("email","mouseover")),onMouseout:e[2]||(e[2]=t=>v("email","mouseout")),onClick:e[3]||(e[3]=t=>v("email","click"))},null,32)):m("",!0)]),_:1},8,["modelValue"])]),_:1}),g(f,{prop:"username",class:"form-item"},{error:d(()=>[s(o).username.isShow&&_()?(a(),u("div",Me,[i("span",{innerHTML:s(o).username.value},null,8,Ce)])):m("",!0),Ee]),default:d(()=>[g(n,{ref:"username",modelValue:s(l).username,"onUpdate:modelValue":e[11]||(e[11]=t=>s(l).username=t),class:"main__form--box__input",placeholder:"Username",maxlength:"30",onInput:e[12]||(e[12]=t=>w("username")),onBlur:e[13]||(e[13]=t=>w("username"))},{prefix:d(()=>[he]),suffix:d(()=>[s(l).username?(a(),u("div",{key:0,style:{position:"relative"},onClick:e[7]||(e[7]=t=>M("username"))},[i("span",{for:"username",class:E(["custom_placeholder",s(l).username?"active":""])}," Username ",2)])):m("",!0),s(o).username.value||s(o).username.status?(a(),u("div",{key:1,class:"error_icon",onMouseover:e[8]||(e[8]=t=>v("username","mouseover")),onMouseout:e[9]||(e[9]=t=>v("username","mouseout")),onClick:e[10]||(e[10]=t=>v("username","click"))},[s(o).username.status==="Medium"&&s(l).username?(a(),u("img",Se)):s(o).username.value?(a(),u("img",xe)):m("",!0)],32)):m("",!0)]),_:1},8,["modelValue"]),s(o).username.status==="Medium"&&s(o).username.isShow&&_()?(a(),u("div",ke,[i("span",{innerHTML:s(o).username.value},null,8,$e)])):m("",!0)]),_:1}),g(f,{prop:"password",class:"form-item"},{error:d(()=>[Be]),default:d(()=>[g(n,{ref:"password",modelValue:s(l).password,"onUpdate:modelValue":e[19]||(e[19]=t=>s(l).password=t),class:"main__form--box__input",placeholder:"Password",type:s(k)?"text":"password",onInput:e[20]||(e[20]=t=>w("password")),onBlur:e[21]||(e[21]=t=>w("password"))},{prefix:d(()=>[Ve]),suffix:d(()=>[s(l).password?(a(),u("div",{key:0,style:{position:"relative"},onClick:e[14]||(e[14]=t=>M("password"))},Pe)):m("",!0),i("img",{class:E(s(o).password.value?"eye_icon":""),src:s(k)?s(U):s(q),alt:"eye_icon",onClick:e[15]||(e[15]=t=>k.value=!s(k))},null,10,Ie),s(o).password.value?(a(),u("div",{key:1,class:"error_icon",onMouseover:e[16]||(e[16]=t=>v("password","mouseover")),onMouseout:e[17]||(e[17]=t=>v("password","mouseout")),onClick:e[18]||(e[18]=t=>v("password","click"))},[s(o).password.status==="Medium"&&s(l).password?(a(),u("img",Le)):s(o).password.status==="Strong"&&s(l).password?(a(),u("img",Ue)):(a(),u("img",qe))],32)):m("",!0)]),_:1},8,["modelValue","type"]),s(o).password.isShow&&_()?(a(),u("div",{key:0,class:E([j(),"el-form-item__error strength"])},[i("span",{innerHTML:s(o).password.value},null,8,ze)],2)):m("",!0)]),_:1}),g(f,{prop:"password_confirmation",class:"form-item"},{error:d(()=>[s(o).password_confirmation.isShow&&_()?(a(),u("div",We,[i("span",{innerHTML:s(o).password_confirmation.value},null,8,Ze)])):m("",!0),De]),default:d(()=>[g(n,{ref:"password_confirmation",modelValue:s(l).password_confirmation,"onUpdate:modelValue":e[27]||(e[27]=t=>s(l).password_confirmation=t),class:"main__form--box__input",placeholder:"Confirm password",type:s($)?"text":"password",onBlur:e[28]||(e[28]=t=>w("password_confirmation"))},{prefix:d(()=>[Ae]),suffix:d(()=>[s(l).password_confirmation?(a(),u("div",{key:0,style:{position:"relative"},onClick:e[22]||(e[22]=t=>M("password_confirmation"))},He)):m("",!0),i("img",{class:E(s(o).password_confirmation.value?"eye_icon":""),src:s($)?s(U):s(q),alt:"eye_icon",onClick:e[23]||(e[23]=t=>$.value=!s($))},null,10,Re),s(o).password_confirmation.value?(a(),u("img",{key:1,src:S,alt:"",class:"error_icon",onMouseover:e[24]||(e[24]=t=>v("password_confirmation","mouseover")),onMouseout:e[25]||(e[25]=t=>v("password_confirmation","mouseout")),onClick:e[26]||(e[26]=t=>v("password_confirmation","click"))},null,32)):m("",!0)]),_:1},8,["modelValue","type"])]),_:1}),je,g(ae,{"login-title":"Register","is-valid":s(P),"login-loading":s(T).registerLoading,"social-title":"Sign up with Google"},null,8,["is-valid","login-loading"])]),_:1},8,["model","rules","onSubmit"])]),s(b)?(a(),h(te,{key:0,email:s(l).email,"dialog-visible":s(b),onClose:e[29]||(e[29]=t=>b.value=!1)},null,8,["email","dialog-visible"])):m("",!0),s(o).email.isShow&&!_()?(a(),h(V,{key:1,"dialog-visible":s(o).email.isShow&&!_(),"error-text":s(o).email.value,onVisible:e[30]||(e[30]=t=>s(o).email.isShow=!1)},null,8,["dialog-visible","error-text"])):m("",!0),s(o).username.isShow&&!_()?(a(),h(V,{key:2,"dialog-visible":s(o).username.isShow&&!_(),"error-text":s(o).username.value,"text-color":s(o).username.status==="Medium"&&s(l).username?"warning":"weak",onVisible:e[31]||(e[31]=t=>s(o).username.isShow=!1)},null,8,["dialog-visible","error-text","text-color"])):m("",!0),s(o).password.isShow&&!_()?(a(),h(V,{key:3,"dialog-visible":s(o).password.isShow&&!_(),"error-text":s(o).password.value,"text-color":s(o).password.status==="Medium"&&s(l).password?"warning":s(o).password.status==="Strong"&&s(l).password?"done":"weak",onVisible:e[32]||(e[32]=t=>s(o).password.isShow=!1)},null,8,["dialog-visible","error-text","text-color"])):m("",!0),s(o).password_confirmation.isShow&&!_()?(a(),h(V,{key:4,"dialog-visible":s(o).password_confirmation.isShow&&!_(),"error-text":s(o).password_confirmation.value,onVisible:e[33]||(e[33]=t=>s(o).password_confirmation.isShow=!1)},null,8,["dialog-visible","error-text"])):m("",!0)])}}},ps=le(Ye,[["__scopeId","data-v-a0d6eecd"]]);export{ps as default};
