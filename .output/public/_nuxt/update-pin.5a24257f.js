import{E as ee}from"./focus-trap.04464a06.js";import{_ as $,E as oe,a as ie}from"./error.3564d58a.js";import{E as se}from"./index.9ce43428.js";import{D as te,s as ne,b as re,e as le,f as ae,r as _,w as P,h as ue,o as l,i as m,l as n,u as o,j as f,k as p,t as H,m as a,C as T,q as pe,c as g,v as de,x as me,y as fe,z as ve}from"./entry.dabfc507.js";import{_ as _e}from"./chevron-left.f66d90eb.js";import{E as F}from"./ErrorMassageModal.8c97b422.js";import{a as ce,C as ge}from"./AccessCheckModal.b359da57.js";import{h as q,s as B}from"./eye-close-icon.eaa88d21.js";import we from"./settingsToken.812dd4cb.js";import ye from"./auth.0edab5ad.js";import{_ as be}from"./_plugin-vue_export-helper.c27b6911.js";import"./email-primary-icon.1455806e.js";const v=w=>(fe("data-v-76e7299c"),w=w(),ve(),w),ke={class:"main"},he={class:"main__form"},Se={class:"main__form--title"},Pe=v(()=>n("span",null,"Reset PIN",-1)),$e=v(()=>n("div",{class:"main__form--subtitle"}," Fill in the fields to change your PIN. ",-1)),xe={key:0,class:"el-form-item__global-error-container"},Ie={class:"el-form-item__global-error"},Ve=v(()=>n("img",{src:$,alt:""},null,-1)),Ce={suffix:""},Ee=v(()=>n("span",{for:"previous",class:"previous_placeholder"}," Old PIN ",-1)),Ne=[Ee],Me=["src"],Te={key:0,class:"el-form-item__error"},Fe=["innerHTML"],qe=v(()=>n("div",null,null,-1)),Be=v(()=>n("span",{for:"pin",class:"pin_placeholder"}," New PIN ",-1)),De=[Be],Le=["src"],Re={key:0,class:"el-form-item__error"},He=["innerHTML"],ze=v(()=>n("div",null,null,-1)),Oe=v(()=>n("span",{for:"password",class:"repeat-placeholder"}," Repeat PIN ",-1)),je=[Oe],Ue=["src"],We={key:0,class:"el-form-item__error"},Xe=["innerHTML"],Ae=v(()=>n("div",null,null,-1)),Ge={class:"forgot-password"},Je={class:"submit-button__text"},Ke={__name:"update-pin",setup(w){const x=te(),{resetPinFailureData:z,resetPinData:O,forgotPinFailureData:j,forgotPinData:U,isLoadingSubmit:D}=ne(x),I=re(),L=le(),W=ae(),X=(s,e,r)=>{e===""?r(new Error("Please input the PIN again")):e!==u.value.pin?r(new Error("PIN and repeat PIN do not match.")):r()},A=(s,e,r)=>{/^\d{4,6}$/.test(e)?r():r(new Error(`<span>PIN is improperly formatted.<br></span>
            <ul class="error_info">
              <li>4-6 characters long.</li>
              <li>Should include only numbers.</li>
            </ul>`))},u=_({previous:null,pin:null,pin_confirmation:null}),y=_(!1),b=_(!1),k=_(!1),c=_(!1),h=_(!1),i=_({previous:{value:"",isShow:!1},pin:{value:"",isShow:!1},pin_confirmation:{value:"",isShow:!1},global:{value:""}}),G=_({previous:[{required:!0,message:"This field is required.",trigger:"blur"}],pin:[{required:!0,message:"This field is required.",trigger:"blur"},{validator:A,trigger:"blur"}],pin_confirmation:[{required:!0,message:"This field is required.",trigger:"blur"},{validator:X,trigger:"blur"}]});P(z,s=>{for(const e in s)if(typeof s[e]!="string")for(const r in s[e])i.value.global.value=s[e][r];else i.value.global.value=s[e]}),P(O,s=>{s&&me("/")}),P(j,s=>{for(const e in s)if(typeof s[e]!="string")for(const r in s[e])i.value.global.value=s[e][r];else i.value.global.value=s[e]}),P(U,s=>{s&&(c.value=!0)}),ue(()=>{ye(),h.value=we(),L.query.email&&(u.value.email=L.query.email),window.addEventListener("resize",Y())});const J=()=>{x.resetPin(u.value)},K=()=>{c.value=!0,x.forgotPin()},V=s=>{I.refs.pinForm.validateField(s,(e,r)=>{e?i.value[s].value="":i.value[s].value=r[s][0].message})},Q=()=>{i.value.global.value=""},d=()=>window.innerWidth>990,Y=()=>{I.update()},C=s=>{d()&&(i.value[s].isShow=!1)},E=s=>{i.value[s].isShow=!0},N=s=>{d()&&(i.value[s].isShow=!0)},M=s=>{I.refs[s].focus()};return(s,e)=>{const r=ee,S=oe,R=se,Z=ie;return l(),m("div",ke,[n("div",he,[n("div",Se,[n("img",{src:_e,alt:"chevron-left",onClick:e[0]||(e[0]=t=>o(W).go(-1))}),Pe]),$e,f(Z,{ref:"pinForm",class:"main__form--box","hide-required-asterisk":"",model:o(u),rules:o(G),onSubmit:de(J,["prevent"])},{default:p(()=>[o(i).global.value?(l(),m("div",xe,[n("div",Ie,[Ve,n("span",null,H(o(i).global.value),1)]),n("span",{class:"clear-error",onClick:Q},"X")])):a("",!0),f(S,{prop:"previous",class:"password-form-item"},{error:p(()=>[o(i).previous.isShow&&d()?(l(),m("div",Te,[n("span",{innerHTML:o(i).previous.value},null,8,Fe)])):a("",!0),qe]),default:p(()=>[f(r,{id:"previous",ref:"previous",modelValue:o(u).previous,"onUpdate:modelValue":e[6]||(e[6]=t=>o(u).previous=t),type:o(y)?"text":"password",class:"main__form--box__input",placeholder:"Old PIN",onBlur:e[7]||(e[7]=t=>V("previous"))},{default:p(()=>[n("template",Ce,[o(u).previous?(l(),m("div",{key:0,style:{position:"relative"},onClick:e[1]||(e[1]=t=>M("previous"))},Ne)):a("",!0),n("img",{class:T(o(i).previous.value?"eye_icon":""),src:o(y)?o(q):o(B),alt:"eye_icon",onClick:e[2]||(e[2]=t=>y.value=!o(y))},null,10,Me),o(i).previous.value?(l(),m("img",{key:1,src:$,alt:"",class:"error_icon",onMouseover:e[3]||(e[3]=t=>N("previous")),onMouseout:e[4]||(e[4]=t=>C("previous")),onClick:e[5]||(e[5]=t=>E("previous"))},null,32)):a("",!0)])]),_:1},8,["modelValue","type"])]),_:1}),f(S,{prop:"pin",class:"password-form-item"},{error:p(()=>[o(i).pin.isShow&&d()?(l(),m("div",Re,[n("span",{innerHTML:o(i).pin.value},null,8,He)])):a("",!0),ze]),default:p(()=>[f(r,{id:"pin",ref:"pin",modelValue:o(u).pin,"onUpdate:modelValue":e[13]||(e[13]=t=>o(u).pin=t),type:o(b)?"text":"password",class:"main__form--box__input",placeholder:"New PIN",onBlur:e[14]||(e[14]=t=>V("pin"))},{suffix:p(()=>[o(u).pin?(l(),m("div",{key:0,style:{position:"relative"},onClick:e[8]||(e[8]=t=>M("pin"))},De)):a("",!0),n("img",{class:T(o(i).pin.value?"eye_icon":""),src:o(b)?o(q):o(B),alt:"eye_icon",onClick:e[9]||(e[9]=t=>b.value=!o(b))},null,10,Le),o(i).pin.value?(l(),m("img",{key:1,src:$,alt:"",class:"error_icon",onMouseover:e[10]||(e[10]=t=>N("pin")),onMouseout:e[11]||(e[11]=t=>C("pin")),onClick:e[12]||(e[12]=t=>E("pin"))},null,32)):a("",!0)]),_:1},8,["modelValue","type"])]),_:1}),f(S,{prop:"pin_confirmation",class:"password-form-item"},{error:p(()=>[o(i).pin_confirmation.isShow&&d()?(l(),m("div",We,[n("span",{innerHTML:o(i).pin_confirmation.value},null,8,Xe)])):a("",!0),Ae]),default:p(()=>[f(r,{id:"pin_confirmation",ref:"pin_confirmation",modelValue:o(u).pin_confirmation,"onUpdate:modelValue":e[20]||(e[20]=t=>o(u).pin_confirmation=t),type:o(k)?"text":"password",class:"main__form--box__input",placeholder:"Repeat PIN",onBlur:e[21]||(e[21]=t=>V("pin_confirmation"))},{suffix:p(()=>[o(u).pin_confirmation?(l(),m("div",{key:0,style:{position:"relative"},onClick:e[15]||(e[15]=t=>M("pin_confirmation"))},je)):a("",!0),n("img",{class:T(o(i).pin_confirmation.value?"eye_icon":""),src:o(k)?o(q):o(B),alt:"eye_icon",onClick:e[16]||(e[16]=t=>k.value=!o(k))},null,10,Ue),o(i).pin_confirmation.value?(l(),m("img",{key:1,src:$,alt:"",class:"error_icon",onMouseover:e[17]||(e[17]=t=>N("pin_confirmation")),onMouseout:e[18]||(e[18]=t=>C("pin_confirmation")),onClick:e[19]||(e[19]=t=>E("pin_confirmation"))},null,32)):a("",!0)]),_:1},8,["modelValue","type"])]),_:1}),n("div",Ge,[f(R,{style:{"font-size":"14px","font-weight":"400"},onClick:K},{default:p(()=>[pe("Forgot PIN?")]),_:1})]),f(R,{class:"submit-button","native-type":"submit",loading:o(D)},{default:p(()=>[n("span",Je,H(o(D)?"":"Save"),1)]),_:1},8,["loading"]),o(i).previous.isShow&&!d()?(l(),g(F,{key:1,dialogVisible:o(i).previous.isShow&&!d(),"error-text":o(i).previous.value,onVisible:e[22]||(e[22]=t=>o(i).previous.isShow=!1)},null,8,["dialogVisible","error-text"])):a("",!0),o(i).pin.isShow&&!d()?(l(),g(F,{key:2,dialogVisible:o(i).pin.isShow&&!d(),"error-text":o(i).pin.value,onVisible:e[23]||(e[23]=t=>o(i).pin.isShow=!1)},null,8,["dialogVisible","error-text"])):a("",!0),o(i).pin_confirmation.isShow&&!d()?(l(),g(F,{key:3,dialogVisible:o(i).pin_confirmation.isShow&&!d(),"error-text":o(i).pin_confirmation.value,onVisible:e[24]||(e[24]=t=>o(i).pin_confirmation.isShow=!1)},null,8,["dialogVisible","error-text"])):a("",!0)]),_:1},8,["model","rules","onSubmit"])]),o(c)?(l(),g(ce,{key:0,email:o(u).email,dialogVisible:o(c),onClose:e[25]||(e[25]=t=>c.value=!1)},null,8,["email","dialogVisible"])):a("",!0),o(h)?(l(),g(ge,{key:1,dialogVisible:o(h),onClose:e[26]||(e[26]=t=>h.value=!1)},null,8,["dialogVisible"])):a("",!0)])}}},uo=be(Ke,[["__scopeId","data-v-76e7299c"]]);export{uo as default};
