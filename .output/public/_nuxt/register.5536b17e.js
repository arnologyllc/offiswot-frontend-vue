import{E as G,_ as b,a as X,b as J}from"./el-overlay.cc8d7c8f.js";import"./el-button.efbddc4b.js";import"./el-form-item.4ed993c7.js";import{D as K,s as Q,r as w,e as N,w as U,f as u,m as i,h as f,i as m,u as s,j as ee,c as y,k as d,l as se,o as a,t as q,E as T,v as oe,x as re,y as te}from"./entry.d5ce8ebf.js";import{_ as ie}from"./email-icon.50f80b43.js";import{_ as ne,a as ae}from"./OvConfirmEmailModal.c3a4cf94.js";import{_ as F,a as le}from"./good.bddd8ecd.js";import{_ as H}from"./lock-icon.0de9f6c2.js";import{L as ue}from"./LoginButtons.cd5c9e58.js";import{E as P}from"./ErrorMassageModal.4b7d9029.js";import{h as B,s as z}from"./eye-close-icon.225f2d95.js";import{_ as de}from"./_plugin-vue_export-helper.c27b6911.js";import"./focus-trap.2184c8ed.js";import"./email-primary-icon.83ef1c2c.js";import"./chevron-icon.8dee40ad.js";const p=h=>(oe("data-v-be81c380"),h=h(),re(),h),me={class:"main"},pe={class:"main__form"},_e=p(()=>i("div",{class:"main__form--title"},"Register",-1)),ve=p(()=>i("div",{class:"main__form--subtitle"},"Please fill the forms to register",-1)),fe={key:0,class:"el-form-item__global-error-container"},ge={class:"el-form-item__global-error"},we=p(()=>i("img",{src:b,alt:""},null,-1)),ce=p(()=>i("img",{src:ie,alt:"email_icon"},null,-1)),ye=p(()=>i("span",{for:"email",class:"custom_placeholder"}," Email ",-1)),be=[ye],he={key:0,class:"el-form-item__error"},Se=p(()=>i("div",null,null,-1)),xe=p(()=>i("img",{src:ae,alt:"user_icon"},null,-1)),ke={key:0,src:F,alt:""},$e={key:1,src:b,alt:""},Me={key:2,class:"el-form-item__error strength warning"},Ee=["innerHTML"],Ce=p(()=>i("div",null,null,-1)),Ve={key:0,class:"el-form-item__error"},Te=["innerHTML"],Pe=p(()=>i("div",null,null,-1)),Ie=p(()=>i("img",{src:H,alt:"password_icon"},null,-1)),Le=p(()=>i("span",{for:"password",class:"custom_placeholder"}," Password ",-1)),Ue=[Le],qe=["src"],Be={key:0,src:F,alt:""},ze={key:1,src:le,alt:""},Fe={key:2,src:b,alt:""},He=["innerHTML"],Ae=p(()=>i("div",null,null,-1)),Re=p(()=>i("img",{src:H,alt:"password_icon"},null,-1)),We=p(()=>i("span",{for:"password_confirmation",class:"custom_placeholder"}," Confirm Password ",-1)),De=[We],Ze=["src"],je={key:0,class:"el-form-item__error"},Oe=["innerHTML"],Ye=p(()=>i("div",null,null,-1)),Ge=p(()=>i("div",{class:"terms"},[i("span",null,[te("By signing up you agree on our "),i("u",null,"Term and Conditions")])],-1)),Xe={__name:"register",setup(h){const I=K(),{registerFailureData:A,registerSuccessData:R}=Q(I),S=se(),x=w(!1),k=w(!1),c=w(!1),L=w(!1),l=w({email:null,username:null,password:null,password_confirmation:null}),o=w({email:{value:"",isShow:!1},username:{value:"",status:null,isShow:!1},password:{value:"",status:null,isShow:!1},password_confirmation:{value:"",isShow:!1},global:{value:null}}),W=w({email:[{required:!0,message:"This field is required.",trigger:"blur"},{type:"email",message:"Email is not valid.",trigger:"blur"}],username:[{required:!0,message:"This field is required.",trigger:"blur"},{min:3,message:`Username is improperly formatted.<br />
                      <span class="error_info">Your username must be at least 3 characters long.</span>
                      `,trigger:"blur"},{validator:(r,e,n)=>{/^[A-Za-z0-9_.]*$/g.test(e)?n():n(new Error(`<span>Username is improperly formatted.<br></span>
            <ul class="error_info">
              <li>Your handle can't exceed 30 characters. </li>
              <li>It can only contain letters, numbers, underscores and dots. </li>
              <li>It can't contain symbols or punctuation marks. </li>
              <li>It needs to be unique.</li>
            </ul>`))},trigger:"blur"},{validator:(r,e,n)=>{(e==null?void 0:e.length)===30?(o.value.username.value="Your handle can't exceed 30 characters.",o.value.username.status="Medium",n()):(e==null?void 0:e.length)>0&&(e==null?void 0:e.length)<30?(o.value.username.value="",o.value.username.status=null,n()):(o.value.username.value="This field is required",o.value.username.status=null,n(new Error("This field is required")))},trigger:"change"}],password:[{validator:(r,e,n)=>{e||n(new Error("This field is required"));const v=O(e);v==="Weak"?(n(new Error("Password strength: <b>Weak</b>")),o.value.password.status="Weak"):v==="Medium"?(n(),o.value.password.status="Medium",o.value.password.value="Password strength: <b>Medium</b>"):v==="Strong"&&(n(),o.value.password.status="Strong",o.value.password.value="Password strength: <b>Strong</b>")},trigger:"input"}],password_confirmation:[{required:!0,message:"This field is required.",trigger:"blur"},{validator:(r,e,n)=>{e===""?n(new Error("Please input the password again")):e!==l.value.password?n(new Error("Password and confirm password do not match")):n()},trigger:"blur"}]});N(()=>{window.addEventListener("resize",Z)});const D=()=>{S.refs.registerForm.validate((r,...e)=>{if(r)I.registerUser(l.value);else return!1})},$=r=>{S.refs[r].focus()},g=r=>{S.refs.registerForm.validateField(r,(e,n)=>{(o.value[r].status!=="Medium"&&r==="username"||r!=="username")&&(e?r!=="password"&&(o.value[r].value=""):o.value[r].value=n[r][0].message)}),L.value=Object.values(l.value).every(e=>!!e)&&Object.values(o.value).every(e=>!e.value||e.status!=="Weak")},M=r=>{o.value[r].isShow=!0},E=r=>{_()&&(o.value[r].isShow=!0)},C=r=>{_()&&(o.value[r].isShow=!1)},Z=()=>{S.update()},_=()=>window.innerWidth>990,j=()=>{o.value.global.value=""},O=r=>{const e=/^(?=.*[a-zA-Z])(?=.*[\d!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?])[a-zA-Z\d!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]{8,}$/,n=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\d!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?])[a-zA-Z\d!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]{12,}$/,v=/^(?:(.)(?!\1{3}))*$/,V=["password","admin","qwerty","asdfgh","xzcvb"];if(v.test(r)&&((r==null?void 0:r.length)>15||!V.some(t=>r==null?void 0:r.toLowerCase().includes(t)))){if(n.test(r)&&((r==null?void 0:r.length)>25||!V.some(t=>r.toLowerCase().includes(t))))return"Strong";if(e.test(r))return"Medium"}return"Weak"},Y=()=>o.value.password.status==="Medium"?"warning":o.value.password.status==="Strong"?"done":"";return U(R,r=>{c.value=!0}),U(A,r=>{if(r==="Account exists, please login."&&(o.value.global.value=r),r==="Email already exists but is not verified."&&(c.value=!0),typeof r!="string")for(const e in r)if(typeof r[e]!="string")for(const n in r[e])o.value.global.value=r[e][n];else o.value.global.value=r[e];else o.value.global.value=r}),(r,e)=>{const n=X,v=J,V=G;return a(),u("div",me,[i("div",pe,[_e,ve,f(V,{ref:"registerForm",class:"main__form--box","hide-required-asterisk":"",autocomplate:"new-password",model:s(l),rules:s(W),onSubmit:ee(D,["prevent"])},{default:m(()=>[s(o).global.value?(a(),u("div",fe,[i("div",ge,[we,i("span",null,q(s(o).global.value),1)]),i("span",{class:"clear-error",onClick:j},"X")])):d("",!0),f(v,{prop:"email",class:"form-item"},{error:m(()=>[s(o).email.isShow&&_()?(a(),u("div",he,[i("span",null,q(s(o).email.value),1)])):d("",!0),Se]),default:m(()=>[f(n,{ref:"email",modelValue:s(l).email,"onUpdate:modelValue":e[4]||(e[4]=t=>s(l).email=t),class:"main__form--box__input",placeholder:"E-mail",onInput:e[5]||(e[5]=t=>g("email")),onBlur:e[6]||(e[6]=t=>g("email"))},{prefix:m(()=>[ce]),suffix:m(()=>[s(l).email?(a(),u("div",{key:0,style:{position:"relative"},onClick:e[0]||(e[0]=t=>$("email"))},be)):d("",!0),s(o).email.value?(a(),u("img",{key:1,class:"error_icon",src:b,alt:"",onMouseover:e[1]||(e[1]=t=>E("email")),onMouseout:e[2]||(e[2]=t=>C("email")),onClick:e[3]||(e[3]=t=>M("email"))},null,32)):d("",!0)]),_:1},8,["modelValue"])]),_:1}),f(v,{prop:"username",class:"form-item"},{error:m(()=>[s(o).username.isShow&&_()?(a(),u("div",Ve,[i("span",{innerHTML:s(o).username.value},null,8,Te)])):d("",!0),Pe]),default:m(()=>[f(n,{ref:"username",modelValue:s(l).username,"onUpdate:modelValue":e[11]||(e[11]=t=>s(l).username=t),class:"main__form--box__input",placeholder:"Username",maxlength:"30",onInput:e[12]||(e[12]=t=>g("username")),onBlur:e[13]||(e[13]=t=>g("username"))},{prefix:m(()=>[xe]),suffix:m(()=>[s(l).username?(a(),u("div",{key:0,style:{position:"relative"},onClick:e[7]||(e[7]=t=>$("username"))},[i("span",{for:"username",class:T(["custom_placeholder",s(l).username?"active":""])}," Username ",2)])):d("",!0),s(o).username.value||s(o).username.status?(a(),u("div",{key:1,class:"error_icon",onMouseover:e[8]||(e[8]=t=>E("username")),onMouseout:e[9]||(e[9]=t=>C("username")),onClick:e[10]||(e[10]=t=>M("username"))},[s(o).username.status==="Medium"&&s(l).username?(a(),u("img",ke)):s(o).username.value?(a(),u("img",$e)):d("",!0)],32)):d("",!0),s(o).username.status==="Medium"&&s(o).username.isShow&&_()?(a(),u("div",Me,[i("span",{innerHTML:s(o).username.value},null,8,Ee)])):d("",!0),Ce]),_:1},8,["modelValue"])]),_:1}),f(v,{prop:"password",class:"form-item"},{error:m(()=>[Ae]),default:m(()=>[f(n,{ref:"password",modelValue:s(l).password,"onUpdate:modelValue":e[19]||(e[19]=t=>s(l).password=t),class:"main__form--box__input",placeholder:"Password",type:s(x)?"text":"password",onInput:e[20]||(e[20]=t=>g("password")),onBlur:e[21]||(e[21]=t=>g("password"))},{prefix:m(()=>[Ie]),suffix:m(()=>[s(l).password?(a(),u("div",{key:0,style:{position:"relative"},onClick:e[14]||(e[14]=t=>$("password"))},Ue)):d("",!0),i("img",{class:T(s(o).password.value?"eye_icon":""),src:s(x)?s(B):s(z),alt:"eye_icon",onClick:e[15]||(e[15]=t=>x.value=!s(x))},null,10,qe),s(o).password.value?(a(),u("div",{key:1,class:"error_icon",onMouseover:e[16]||(e[16]=t=>E("password")),onMouseout:e[17]||(e[17]=t=>C("password")),onClick:e[18]||(e[18]=t=>M("password"))},[s(o).password.status==="Medium"&&s(l).password?(a(),u("img",Be)):s(o).password.status==="Strong"&&s(l).password?(a(),u("img",ze)):(a(),u("img",Fe))],32)):d("",!0)]),_:1},8,["modelValue","type"]),s(o).password.isShow&&_()?(a(),u("div",{key:0,class:T([Y(),"el-form-item__error strength"])},[i("span",{innerHTML:s(o).password.value},null,8,He)],2)):d("",!0)]),_:1}),f(v,{prop:"password_confirmation",class:"form-item"},{error:m(()=>[s(o).password_confirmation.isShow&&_()?(a(),u("div",je,[i("span",{innerHTML:s(o).password_confirmation.value},null,8,Oe)])):d("",!0),Ye]),default:m(()=>[f(n,{ref:"password_confirmation",modelValue:s(l).password_confirmation,"onUpdate:modelValue":e[27]||(e[27]=t=>s(l).password_confirmation=t),class:"main__form--box__input",placeholder:"Confirm password",type:s(k)?"text":"password",onBlur:e[28]||(e[28]=t=>g("password_confirmation"))},{prefix:m(()=>[Re]),suffix:m(()=>[s(l).password_confirmation?(a(),u("div",{key:0,style:{position:"relative"},onClick:e[22]||(e[22]=t=>$("password_confirmation"))},De)):d("",!0),i("img",{class:T(s(o).password_confirmation.value?"eye_icon":""),src:s(k)?s(B):s(z),alt:"eye_icon",onClick:e[23]||(e[23]=t=>k.value=!s(k))},null,10,Ze),s(o).password_confirmation.value?(a(),u("img",{key:1,src:b,alt:"",class:"error_icon",onMouseover:e[24]||(e[24]=t=>E("password_confirmation")),onMouseout:e[25]||(e[25]=t=>C("password_confirmation")),onClick:e[26]||(e[26]=t=>M("password_confirmation"))},null,32)):d("",!0)]),_:1},8,["modelValue","type"])]),_:1}),Ge,f(ue,{"login-title":"Register","is-valid":s(L),"login-loading":s(I).registerLoading,"social-title":"Sign up with Google"},null,8,["is-valid","login-loading"])]),_:1},8,["model","rules","onSubmit"])]),s(c)?(a(),y(ne,{key:0,email:s(l).email,"dialog-visible":s(c),onClose:e[29]||(e[29]=t=>c.value=!1)},null,8,["email","dialog-visible"])):d("",!0),s(o).email.isShow&&!_()?(a(),y(P,{key:1,"dialog-visible":s(o).email.isShow&&!_(),"error-text":s(o).email.value,onVisible:e[30]||(e[30]=t=>s(o).email.isShow=!1)},null,8,["dialog-visible","error-text"])):d("",!0),s(o).username.isShow&&!_()?(a(),y(P,{key:2,"dialog-visible":s(o).username.isShow&&!_(),"error-text":s(o).username.value,"text-color":s(o).username.status==="Medium"&&s(l).username?"warning":"weak",onVisible:e[31]||(e[31]=t=>s(o).username.isShow=!1)},null,8,["dialog-visible","error-text","text-color"])):d("",!0),s(o).password.isShow&&!_()?(a(),y(P,{key:3,"dialog-visible":s(o).password.isShow&&!_(),"error-text":s(o).password.value,"text-color":s(o).password.status==="Medium"&&s(l).password?"warning":s(o).password.status==="Strong"&&s(l).password?"done":"weak",onVisible:e[32]||(e[32]=t=>s(o).password.isShow=!1)},null,8,["dialog-visible","error-text","text-color"])):d("",!0),s(o).password_confirmation.isShow&&!_()?(a(),y(P,{key:4,"dialog-visible":s(o).password_confirmation.isShow&&!_(),"error-text":s(o).password_confirmation.value,onVisible:e[33]||(e[33]=t=>s(o).password_confirmation.isShow=!1)},null,8,["dialog-visible","error-text"])):d("",!0)])}}},fs=de(Xe,[["__scopeId","data-v-be81c380"]]);export{fs as default};
