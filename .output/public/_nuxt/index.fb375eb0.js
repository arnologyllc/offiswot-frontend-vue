import{c as re,a as _e}from"./el-overlay.e870726e.js";import{E as ee,s as de}from"./el-button.e608a692.js";import{a as ue,A as se,s as q,r as n,e as oe,f as pe,w as W,o as c,c as O,j as r,u as o,h as _,p as e,t as h,i as p,z as ve,F as U,x as te,y as ae,B as ke,C as me,l as S,q as Y,m as ge,v as x,D as he}from"./entry.dfd13bf6.js";import{d as R}from"./default-user-icon.4af4271a.js";import{_ as fe}from"./AccessCheckModal.f2f7f0bf.js";import we from"./loginToken.fecd4966.js";import ye from"./auth.aef0d545.js";import{_ as be,a as $e}from"./close-icon.a8b3094e.js";import{_ as ce}from"./_plugin-vue_export-helper.c27b6911.js";import"./focus-trap.5fde4ef1.js";import"./email-primary-icon.36ae4dae.js";import"./eye-close-icon.3c80a0b0.js";const Ce=""+new URL("profile.8ef35c11.svg",import.meta.url).href,De=""+new URL("credit-card.5a3efb01.svg",import.meta.url).href,Te=""+new URL("menu-profile.d1f131fd.svg",import.meta.url).href,Se=""+new URL("bell.0bad0d06.svg",import.meta.url).href,We=""+new URL("lock.e8efa230.svg",import.meta.url).href;const ne=k=>(te("data-v-e225d661"),k=k(),ae(),k),Ie={class:"dialog__title"},je={class:"dialog__body"},Pe={class:"dialog__body--title"},Ee=["innerHTML"],Le={class:"dialog__body--workspace"},xe=["src"],Ve={class:"dialog__body--workspace__name"},Ae={class:"dialog__body--submit-box"},Ne={key:1,class:"dialog__success"},Oe=ne(()=>e("img",{src:$e,alt:"success"},null,-1)),Ue=ne(()=>e("span",{class:"dialog__success--title"},"All done!",-1)),Re={class:"dialog__success--subtitle"},Be={__name:"invite-dialog",props:{dialogVisible:{type:Boolean,required:!1},dialogType:{type:String,required:!0},workspaceData:{type:Object,required:!0}},setup(k){const v=k,I=ue(),C=se(),{inviteAcceptSuccess:j,inviteAcceptError:V,inviteDeclineSuccess:B,inviteDeclineError:z,isLoadingSubmit:A}=q(I),m=n("accept"),w=n("You are going to join"),y=n(null),P=n(null),D=n(!1),b=n({});oe(()=>{var g;if(m.value=v.dialogType,w.value=m.value==="accept"?"<span>You are going to join</span>":"<span>You are going to <span style='color: red'>decline</span> the inviation to join</span>",v.workspaceData){P.value=(g=v.workspaceData)!=null&&g.name?v.workspaceData.name:"Workspace name",y.value=R;{const d=+pe.get("currentAccountID"),u=JSON.parse(localStorage.getItem("accounts")).find($=>$.ID===d).email;b.value={email:u,token:v.workspaceData.token}}}});const E=()=>{switch(m.value){case"accept":I.acceptInvite(b.value);break;case"decline":I.declineInvite(b.value);break}};return W(j,async g=>{await C.getWorkSpaces(),D.value=!0}),W(B,async g=>{await C.getWorkSpaces(),D.value=!0}),(g,d)=>{const u=ee,$=re;return c(),O($,{modelValue:v.dialogVisible,"onUpdate:modelValue":d[1]||(d[1]=T=>v.dialogVisible=T),class:"invite-dialog",width:430,"show-close":"",top:"30vh",onClose:d[2]||(d[2]=T=>g.$emit("close"))},{default:r(()=>[o(D)?(c(),_("div",Ne,[Oe,Ue,e("span",Re,h(o(m)==="accept"?"You have joined to the workspace, enjoy your collaboration!":"We have emailed all invitations. You can now enjoy your new workspace!"),1),e("img",{src:be,alt:"success",class:"dialog__success--close",onClick:d[0]||(d[0]=T=>g.$emit("close"))})])):(c(),_(U,{key:0},[e("div",Ie,h(o(m)==="accept"?"Accept invitation":"Decline invitation"),1),e("div",je,[e("div",Pe,[e("span",{innerHTML:o(w)},null,8,Ee)]),e("div",Le,[e("img",{src:o(y),alt:"Avatar",class:"dialog__body--workspace__avatar"},null,8,xe),e("div",Ve,h(o(P)),1)]),e("div",Ae,[p(u,{class:"dialog__body--btn",loading:o(A),onClick:E},{default:r(()=>[ve(" NEXT ")]),_:1},8,["loading"])])])],64))]),_:1},8,["modelValue"])}}},Me=ce(Be,[["__scopeId","data-v-e225d661"]]);const a=k=>(te("data-v-ac261898"),k=k(),ae(),k),He={class:"container_account"},Ye={class:"account"},qe={class:"account__info"},ze=["src"],Fe={class:"account__titles"},Je={class:"account__title"},Xe=a(()=>e("div",{class:"account__subtitle"},"Here is everything about your personal account settings and activity.",-1)),Ge={class:"account__body"},Ke=a(()=>e("div",null,[e("img",{src:Ce,alt:"profile-icon",class:"icon"})],-1)),Qe=a(()=>e("div",{class:"element__titles"},[e("div",{class:"account__body--block-title"},"Profile"),e("div",{class:"account__body--block-subtitle"},"View and update your profile.")],-1)),Ze={class:"account__body--element"},es=a(()=>e("div",null,[e("img",{src:De,alt:"credit-card-icon",class:"icon"})],-1)),ss=a(()=>e("div",{class:"element__titles"},[e("div",{class:"account__body--block-title"},"Payments"),e("div",{class:"account__body--block-subtitle"},"????")],-1)),os={class:"account__body--element"},ts=a(()=>e("div",null,[e("img",{src:Te,alt:"menu-profile-icon",class:"icon"})],-1)),as=a(()=>e("div",{class:"element__titles"},[e("div",{class:"account__body--block-title"},"Logs"),e("div",{class:"account__body--block-subtitle"},"Check your account logs.")],-1)),cs={class:"account__body--element"},ns=a(()=>e("div",null,[e("img",{src:Se,alt:"bell-icon",class:"icon"})],-1)),is=a(()=>e("div",{class:"element__titles"},[e("div",{class:"account__body--block-title"},"Notifications"),e("div",{class:"account__body--block-subtitle"},"Manage notifications sent to you.")],-1)),ls=a(()=>e("div",null,[e("img",{src:We,alt:"lock-icon",class:"icon"})],-1)),rs=a(()=>e("div",{class:"element__titles"},[e("div",{class:"account__body--block-title"},"Security"),e("div",{class:"account__body--block-subtitle"},"Check your account security.")],-1)),_s={class:"user-workspaces"},ds={class:"user-workspaces__header"},us=a(()=>e("div",{class:"user-workspaces__title"},"your workspaces",-1)),ps=a(()=>e("span",null,"+ Create workspace",-1)),vs={key:0,class:"user-workspaces__body"},ks=["onClick"],ms={class:"user-workspaces__element"},gs=["src"],hs={class:"user-workspaces__element--title"},fs={class:"user-workspaces__workspace-name"},ws={class:"user-workspaces__workspace-specific"},ys={class:"user-workspaces__buttons"},bs=a(()=>e("span",null,"Open",-1)),$s={key:1,class:"user-workspaces__container--text"},Cs=a(()=>e("span",null,"Create",-1)),Ds={class:"user-workspaces__container-text"},Ts=["innerHTML"],Ss={key:2,class:"user-workspaces__header-bottom"},Ws=a(()=>e("div",{class:"user-workspaces__title"},"workspaces (Invites)",-1)),Is={class:"user-workspaces__element"},js=["src"],Ps={class:"user-workspaces__element--title"},Es={class:"user-workspaces__workspace-name"},Ls={class:"user-workspaces__workspace-specific"},xs={class:"user-workspaces__buttons"},Vs=a(()=>e("span",null,"Accept",-1)),As=a(()=>e("span",null,"Decline",-1)),Ns={key:3,class:"user-workspaces__header-bottom"},Os=a(()=>e("div",{class:"user-workspaces__title"},"workspaces (Invites)",-1)),Us=["onClick"],Rs={class:"user-workspaces__element"},Bs=["src"],Ms={class:"user-workspaces__element--title"},Hs={class:"user-workspaces__workspace-name"},Ys={class:"user-workspaces__workspace-specific"},qs={class:"user-workspaces__buttons"},zs=a(()=>e("span",null,"Open",-1)),Fs={__name:"index",setup(k){const v=se(),I=ke(),{profileSuccessData:C,editProfileData:j,workspacesSuccessData:V}=q(v),{checkPinData:B}=q(I),z=ge(),A=he(),m=n(null),w=n(null),y=n(null),P=n("accept"),D=n({}),b=n(null),E=n(null),g=n(null),d=n(null),u=n(R),$=s=>{s&&(s.user.avatar?u.value=s.avatarPath.includes(A.public.env.serverUrl)?`${s.avatarPath}/${s.user.avatar}`:`${A.public.env.serverUrl}${s.avatarPath}/${s.user.avatar}`:u.value=R,g.value=s.user.email)},T=s=>{m.value=s,s!=null&&s.pendingWorkspaces&&(b.value=s.pendingWorkspaces),s!=null&&s.inviteWorkspaces&&(E.value=s.inviteWorkspaces)};W(C,s=>$(s)),W(j,s=>{s.user.avatar?u.value=`${s.avatarPath}/${s.user.avatar}`:u.value=R}),W(V,s=>T(s)),W(B,async s=>{v.getProfile(),await v.getWorkSpaces()}),oe(()=>{ye(),w.value=we(),j.value?$(j.value):C.value&&$(C.value),V.value&&T(V.value),window.addEventListener("resize",ie),d.value=J()});const M=me(()=>m.value&&m.value.myWorkspaces.length),F=s=>{x(`/workspace/staff/${s}`)},ie=()=>{d.value=J(),z.update()},J=()=>window.innerWidth>935?`Thanks for joining Offiswot!<br /><br />
            Create a workspace for your team or company using our productivity platform.<br/>Enjoy collaborating with each other easily and managing your team members and the projects effectively.`:window.innerWidth<=935&&window.innerWidth>628?`Thanks for joining Offiswot!<br /><br />
            Create a workspace for your team or company using our productivity platform. Enjoy collaborating with each other easily and managing your team members and the projects effectively.`:`Thanks for<br /> joining Offiswot!<br /><br />
            Create a workspace for your team or company using our productivity platform. Enjoy collaborating with each other easily and managing your team members and the projects effectively.`,X=(s,i,H,l)=>{P.value=s,y.value=!0,D.value={name:i,avatar:H,token:l}};return(s,i)=>{var G,K,Q;const H=_e,l=ee;return c(),_("div",He,[e("div",Ye,[e("div",null,[p(H,{size:"large",placeholder:"Search in your account","prefix-icon":o(de),class:"account__search"},null,8,["prefix-icon"]),e("div",qe,[e("img",{class:"account__picture",src:o(u),alt:"user_avatar"},null,8,ze),e("div",Fe,[e("div",Je,"My account ("+h(o(g))+")",1),Xe])]),e("div",Ge,[e("div",{class:"account__body--element",onClick:i[0]||(i[0]=t=>("navigateTo"in s?s.navigateTo:o(x))("/profile"))},[p(l,{class:"account__body--block"},{default:r(()=>[Ke]),_:1}),Qe]),e("div",Ze,[p(l,{class:"account__body--block"},{default:r(()=>[es]),_:1}),ss]),e("div",os,[p(l,{class:"account__body--block"},{default:r(()=>[ts]),_:1}),as]),e("div",cs,[p(l,{class:"account__body--block"},{default:r(()=>[ns]),_:1}),is]),e("div",{class:"account__body--element",onClick:i[1]||(i[1]=t=>("navigateTo"in s?s.navigateTo:o(x))("/profile-settings"))},[p(l,{class:"account__body--block"},{default:r(()=>[ls]),_:1}),rs])]),e("div",_s,[e("div",ds,[us,o(M)?(c(),O(l,{key:0,class:"user-workspaces__create-btn-outline",onClick:i[2]||(i[2]=t=>("navigateTo"in s?s.navigateTo:o(x))("/profile/choose-account"))},{default:r(()=>[ps]),_:1})):S("",!0)]),o(M)?(c(),_("div",vs,[(c(!0),_(U,null,Y((G=o(m))==null?void 0:G.myWorkspaces,(t,L)=>{var f;return c(),_("div",{key:`workspace_${L}`,class:"user-workspaces__container",onClick:N=>F(t.id)},[e("div",ms,[e("img",{class:"user-workspaces__picture",src:o(u),alt:"user_avatar"},null,8,gs),e("div",hs,[e("div",fs,h(t.name),1),e("div",ws,h((f=t.industry)==null?void 0:f.name),1)])]),e("div",ys,[p(l,{class:"user-workspaces__element-create-btn"},{default:r(()=>[bs]),_:1})])],8,ks)}),128))])):o(M)?S("",!0):(c(),_("div",$s,[p(l,{class:"user-workspaces__text-create-btn",style:{position:"absolute"},onClick:i[3]||(i[3]=t=>("navigateTo"in s?s.navigateTo:o(x))("/profile/choose-account"))},{default:r(()=>[Cs]),_:1}),e("div",Ds,[e("span",{innerHTML:o(d)},null,8,Ts)])])),(K=o(b))!=null&&K.length?(c(),_("div",Ss,[Ws,(c(!0),_(U,null,Y(o(b),(t,L)=>{var f,N,Z;return c(),_("div",{key:`workspace_${L}`,class:"user-workspaces__container"},[e("div",Is,[e("img",{class:"user-workspaces__picture",src:o(u),alt:"user_avatar"},null,8,js),e("div",Ps,[e("div",Es,h((f=t.workspace)==null?void 0:f.name),1),e("div",Ls,h((Z=(N=t.workspace)==null?void 0:N.industry)==null?void 0:Z.name),1)])]),e("div",xs,[p(l,{class:"user-workspaces__element-create-btn",onClick:le=>X("accept",t==null?void 0:t.name,t.avatar,t.token)},{default:r(()=>[Vs]),_:2},1032,["onClick"]),p(l,{class:"user-workspaces__element-create-btn--decline",onClick:le=>X("decline",t==null?void 0:t.name,t.avatar,t.token)},{default:r(()=>[As]),_:2},1032,["onClick"])])])}),128))])):S("",!0),(Q=o(E))!=null&&Q.length?(c(),_("div",Ns,[Os,(c(!0),_(U,null,Y(o(E),(t,L)=>{var f;return c(),_("div",{key:`workspace_${L}`,class:"user-workspaces__container",onClick:N=>F(t.id)},[e("div",Rs,[e("img",{class:"user-workspaces__picture",src:o(u),alt:"user_avatar"},null,8,Bs),e("div",Ms,[e("div",Hs,h(t.name),1),e("div",Ys,h((f=t.industry)==null?void 0:f.name),1)])]),e("div",qs,[p(l,{class:"user-workspaces__element-create-btn"},{default:r(()=>[zs]),_:1})])],8,Us)}),128))])):S("",!0)])])]),o(w)?(c(),O(fe,{key:0,"dialog-visible":o(w),onClose:i[4]||(i[4]=t=>w.value=!1)},null,8,["dialog-visible"])):S("",!0),o(y)?(c(),O(Me,{key:1,"dialog-visible":o(y),"dialog-type":o(P),"workspace-data":o(D),onClose:i[5]||(i[5]=t=>y.value=!1)},null,8,["dialog-visible","dialog-type","workspace-data"])):S("",!0)])}}},no=ce(Fs,[["__scopeId","data-v-ac261898"]]);export{no as default};
