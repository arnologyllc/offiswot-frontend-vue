import{M as O,N as M,C as E,U as Fe,W as G,o as b,h as L,G as g,u as a,p as D,J as I,S as P,t as X,l as C,c as B,j as R,R as Ue,ak as _,r as J,F as Be,q as Oe,a2 as be,k as V,i as U,al as Ne,L as De,O as Ae,ae as se,a1 as le,w as ie,a4 as Ie,ad as je,Q as Me,a5 as Ve,aj as ue,T as de,$ as xe,am as qe,a0 as ze,an as z,I as We,a6 as He,V as Ke,P as he,Y as Ge,ao as Xe}from"./entry.3cdac9c8.js";import{b as x,d as w,L as Ye,M as ke,c as Je,N as $e,G as we,j,_ as H,w as Ce,a as Qe,p as Q,O as Ze,P as et,Q as tt,R as st,S as at,T as Y,D as ot,U as W,V as ce}from"./el-button.54301017.js";import{t as re,i as Le,a as nt,d as lt}from"./focus-trap.24649fb3.js";import{d as rt,m as ae}from"./el-overlay.e224c25f.js";var it=1,ut=4;function dt(t){return rt(t,it|ut)}const ct=x({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:t=>t>=0&&t<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:w(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:w([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:w(Function),default:t=>`${t}%`}}),pt=["aria-valuenow"],ft={viewBox:"0 0 100 100"},vt=["d","stroke","stroke-width"],mt=["d","stroke","opacity","stroke-linecap","stroke-width"],gt={key:0},yt=O({name:"ElProgress"}),bt=O({...yt,props:ct,setup(t){const e=t,o={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},s=M("progress"),c=E(()=>({width:`${e.percentage}%`,animationDuration:`${e.duration}s`,backgroundColor:F(e.percentage)})),i=E(()=>(e.strokeWidth/e.width*100).toFixed(1)),f=E(()=>["circle","dashboard"].includes(e.type)?Number.parseInt(`${50-Number.parseFloat(i.value)/2}`,10):0),$=E(()=>{const u=f.value,T=e.type==="dashboard";return`
          M 50 50
          m 0 ${T?"":"-"}${u}
          a ${u} ${u} 0 1 1 0 ${T?"-":""}${u*2}
          a ${u} ${u} 0 1 1 0 ${T?"":"-"}${u*2}
          `}),h=E(()=>2*Math.PI*f.value),p=E(()=>e.type==="dashboard"?.75:1),k=E(()=>`${-1*h.value*(1-p.value)/2}px`),m=E(()=>({strokeDasharray:`${h.value*p.value}px, ${h.value}px`,strokeDashoffset:k.value})),n=E(()=>({strokeDasharray:`${h.value*p.value*(e.percentage/100)}px, ${h.value}px`,strokeDashoffset:k.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),r=E(()=>{let u;return e.color?u=F(e.percentage):u=o[e.status]||o.default,u}),l=E(()=>e.status==="warning"?Ye:e.type==="line"?e.status==="success"?ke:Je:e.status==="success"?$e:we),v=E(()=>e.type==="line"?12+e.strokeWidth*.4:e.width*.111111+2),y=E(()=>e.format(e.percentage));function d(u){const T=100/u.length;return u.map((S,A)=>G(S)?{color:S,percentage:(A+1)*T}:S).sort((S,A)=>S.percentage-A.percentage)}const F=u=>{var T;const{color:N}=e;if(Fe(N))return N(u);if(G(N))return N;{const S=d(N);for(const A of S)if(A.percentage>u)return A.color;return(T=S[S.length-1])==null?void 0:T.color}};return(u,T)=>(b(),L("div",{class:g([a(s).b(),a(s).m(u.type),a(s).is(u.status),{[a(s).m("without-text")]:!u.showText,[a(s).m("text-inside")]:u.textInside}]),role:"progressbar","aria-valuenow":u.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[u.type==="line"?(b(),L("div",{key:0,class:g(a(s).b("bar"))},[D("div",{class:g(a(s).be("bar","outer")),style:I({height:`${u.strokeWidth}px`})},[D("div",{class:g([a(s).be("bar","inner"),{[a(s).bem("bar","inner","indeterminate")]:u.indeterminate},{[a(s).bem("bar","inner","striped")]:u.striped},{[a(s).bem("bar","inner","striped-flow")]:u.stripedFlow}]),style:I(a(c))},[(u.showText||u.$slots.default)&&u.textInside?(b(),L("div",{key:0,class:g(a(s).be("bar","innerText"))},[P(u.$slots,"default",{percentage:u.percentage},()=>[D("span",null,X(a(y)),1)])],2)):C("v-if",!0)],6)],6)],2)):(b(),L("div",{key:1,class:g(a(s).b("circle")),style:I({height:`${u.width}px`,width:`${u.width}px`})},[(b(),L("svg",ft,[D("path",{class:g(a(s).be("circle","track")),d:a($),stroke:`var(${a(s).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-width":a(i),fill:"none",style:I(a(m))},null,14,vt),D("path",{class:g(a(s).be("circle","path")),d:a($),stroke:a(r),fill:"none",opacity:u.percentage?1:0,"stroke-linecap":u.strokeLinecap,"stroke-width":a(i),style:I(a(n))},null,14,mt)]))],6)),(u.showText||u.$slots.default)&&!u.textInside?(b(),L("div",{key:2,class:g(a(s).e("text")),style:I({fontSize:`${a(v)}px`})},[P(u.$slots,"default",{percentage:u.percentage},()=>[u.status?(b(),B(a(j),{key:1},{default:R(()=>[(b(),B(Ue(a(l))))]),_:1})):(b(),L("span",gt,X(a(y)),1))])],6)):C("v-if",!0)],10,pt))}});var ht=H(bt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const kt=Ce(ht),_e=Symbol("uploadContextKey"),$t="ElUpload";class wt extends Error{constructor(e,o,s,c){super(e),this.name="UploadAjaxError",this.status=o,this.method=s,this.url=c}}function pe(t,e,o){let s;return o.response?s=`${o.response.error||o.response}`:o.responseText?s=`${o.responseText}`:s=`fail to ${e.method} ${t} ${o.status}`,new wt(s,o.status,e.method,t)}function Ct(t){const e=t.responseText||t.response;if(!e)return e;try{return JSON.parse(e)}catch{return e}}const Lt=t=>{typeof XMLHttpRequest>"u"&&re($t,"XMLHttpRequest is undefined");const e=new XMLHttpRequest,o=t.action;e.upload&&e.upload.addEventListener("progress",i=>{const f=i;f.percent=i.total>0?i.loaded/i.total*100:0,t.onProgress(f)});const s=new FormData;if(t.data)for(const[i,f]of Object.entries(t.data))Array.isArray(f)?s.append(i,...f):s.append(i,f);s.append(t.filename,t.file,t.file.name),e.addEventListener("error",()=>{t.onError(pe(o,t,e))}),e.addEventListener("load",()=>{if(e.status<200||e.status>=300)return t.onError(pe(o,t,e));t.onSuccess(Ct(e))}),e.open(t.method,o,!0),t.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);const c=t.headers||{};if(c instanceof Headers)c.forEach((i,f)=>e.setRequestHeader(f,i));else for(const[i,f]of Object.entries(c))Le(f)||e.setRequestHeader(i,String(f));return e.send(s),e},Se=["text","picture","picture-card"];let _t=1;const oe=()=>Date.now()+_t++,Ee=x({action:{type:String,default:"#"},headers:{type:w(Object)},method:{type:String,default:"post"},data:{type:Object,default:()=>ae({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},fileList:{type:w(Array),default:()=>ae([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:Se,default:"text"},httpRequest:{type:w(Function),default:Lt},disabled:Boolean,limit:Number}),St=x({...Ee,beforeUpload:{type:w(Function),default:_},beforeRemove:{type:w(Function)},onRemove:{type:w(Function),default:_},onChange:{type:w(Function),default:_},onPreview:{type:w(Function),default:_},onSuccess:{type:w(Function),default:_},onProgress:{type:w(Function),default:_},onError:{type:w(Function),default:_},onExceed:{type:w(Function),default:_}}),Et=x({files:{type:w(Array),default:()=>ae([])},disabled:{type:Boolean,default:!1},handlePreview:{type:w(Function),default:_},listType:{type:String,values:Se,default:"text"}}),Pt={remove:t=>!!t},Rt=["onKeydown"],Tt=["src"],Ft=["onClick"],Ut=["onClick"],Bt=["onClick"],Ot=O({name:"ElUploadList"}),Nt=O({...Ot,props:Et,emits:Pt,setup(t,{emit:e}){const{t:o}=Qe(),s=M("upload"),c=M("icon"),i=M("list"),f=Q(),$=J(!1),h=p=>{e("remove",p)};return(p,k)=>(b(),B(Ne,{tag:"ul",class:g([a(s).b("list"),a(s).bm("list",p.listType),a(s).is("disabled",a(f))]),name:a(i).b()},{default:R(()=>[(b(!0),L(Be,null,Oe(p.files,m=>(b(),L("li",{key:m.uid||m.name,class:g([a(s).be("list","item"),a(s).is(m.status),{focusing:$.value}]),tabindex:"0",onKeydown:be(n=>!a(f)&&h(m),["delete"]),onFocus:k[0]||(k[0]=n=>$.value=!0),onBlur:k[1]||(k[1]=n=>$.value=!1),onClick:k[2]||(k[2]=n=>$.value=!1)},[P(p.$slots,"default",{file:m},()=>[p.listType==="picture"||m.status!=="uploading"&&p.listType==="picture-card"?(b(),L("img",{key:0,class:g(a(s).be("list","item-thumbnail")),src:m.url,alt:""},null,10,Tt)):C("v-if",!0),m.status==="uploading"||p.listType!=="picture-card"?(b(),L("div",{key:1,class:g(a(s).be("list","item-info"))},[D("a",{class:g(a(s).be("list","item-name")),onClick:V(n=>p.handlePreview(m),["prevent"])},[U(a(j),{class:g(a(c).m("document"))},{default:R(()=>[U(a(Ze))]),_:1},8,["class"]),D("span",{class:g(a(s).be("list","item-file-name"))},X(m.name),3)],10,Ft),m.status==="uploading"?(b(),B(a(kt),{key:0,type:p.listType==="picture-card"?"circle":"line","stroke-width":p.listType==="picture-card"?6:2,percentage:Number(m.percentage),style:I(p.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):C("v-if",!0)],2)):C("v-if",!0),D("label",{class:g(a(s).be("list","item-status-label"))},[p.listType==="text"?(b(),B(a(j),{key:0,class:g([a(c).m("upload-success"),a(c).m("circle-check")])},{default:R(()=>[U(a(ke))]),_:1},8,["class"])):["picture-card","picture"].includes(p.listType)?(b(),B(a(j),{key:1,class:g([a(c).m("upload-success"),a(c).m("check")])},{default:R(()=>[U(a($e))]),_:1},8,["class"])):C("v-if",!0)],2),a(f)?C("v-if",!0):(b(),B(a(j),{key:2,class:g(a(c).m("close")),onClick:n=>h(m)},{default:R(()=>[U(a(we))]),_:2},1032,["class","onClick"])),C(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),C(" This is a bug which needs to be fixed "),C(" TODO: Fix the incorrect navigation interaction "),a(f)?C("v-if",!0):(b(),L("i",{key:3,class:g(a(c).m("close-tip"))},X(a(o)("el.upload.deleteTip")),3)),p.listType==="picture-card"?(b(),L("span",{key:4,class:g(a(s).be("list","item-actions"))},[D("span",{class:g(a(s).be("list","item-preview")),onClick:n=>p.handlePreview(m)},[U(a(j),{class:g(a(c).m("zoom-in"))},{default:R(()=>[U(a(et))]),_:1},8,["class"])],10,Ut),a(f)?C("v-if",!0):(b(),L("span",{key:0,class:g(a(s).be("list","item-delete")),onClick:n=>h(m)},[U(a(j),{class:g(a(c).m("delete"))},{default:R(()=>[U(a(tt))]),_:1},8,["class"])],10,Bt))],2)):C("v-if",!0)])],42,Rt))),128)),P(p.$slots,"append")]),_:3},8,["class","name"]))}});var fe=H(Nt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const Dt=x({disabled:{type:Boolean,default:!1}}),At={file:t=>De(t)},It=["onDrop","onDragover"],Pe="ElUploadDrag",jt=O({name:Pe}),Mt=O({...jt,props:Dt,emits:At,setup(t,{emit:e}){const o=Ae(_e);o||re(Pe,"usage: <el-upload><el-upload-dragger /></el-upload>");const s=M("upload"),c=J(!1),i=Q(),f=h=>{if(i.value)return;c.value=!1,h.stopPropagation();const p=Array.from(h.dataTransfer.files),k=o.accept.value;if(!k){e("file",p);return}const m=p.filter(n=>{const{type:r,name:l}=n,v=l.includes(".")?`.${l.split(".").pop()}`:"",y=r.replace(/\/.*$/,"");return k.split(",").map(d=>d.trim()).filter(d=>d).some(d=>d.startsWith(".")?v===d:/\/\*$/.test(d)?y===d.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(d)?r===d:!1)});e("file",m)},$=()=>{i.value||(c.value=!0)};return(h,p)=>(b(),L("div",{class:g([a(s).b("dragger"),a(s).is("dragover",c.value)]),onDrop:V(f,["prevent"]),onDragover:V($,["prevent"]),onDragleave:p[0]||(p[0]=V(k=>c.value=!1,["prevent"]))},[P(h.$slots,"default")],42,It))}});var Vt=H(Mt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const xt=x({...Ee,beforeUpload:{type:w(Function),default:_},onRemove:{type:w(Function),default:_},onStart:{type:w(Function),default:_},onSuccess:{type:w(Function),default:_},onProgress:{type:w(Function),default:_},onError:{type:w(Function),default:_},onExceed:{type:w(Function),default:_}}),qt=["onKeydown"],zt=["name","multiple","accept"],Wt=O({name:"ElUploadContent",inheritAttrs:!1}),Ht=O({...Wt,props:xt,setup(t,{expose:e}){const o=t,s=M("upload"),c=Q(),i=se({}),f=se(),$=l=>{if(l.length===0)return;const{autoUpload:v,limit:y,fileList:d,multiple:F,onStart:u,onExceed:T}=o;if(y&&d.length+l.length>y){T(l,d);return}F||(l=l.slice(0,1));for(const N of l){const S=N;S.uid=oe(),u(S),v&&h(S)}},h=async l=>{if(f.value.value="",!o.beforeUpload)return p(l);let v,y={};try{const F=o.beforeUpload(l);y=le(o.data)?dt(o.data):o.data,v=await F}catch{v=!1}if(v===!1){o.onRemove(l);return}let d=l;v instanceof Blob&&(v instanceof File?d=v:d=new File([v],l.name,{type:l.type})),p(Object.assign(d,{uid:l.uid}),y)},p=(l,v)=>{const{headers:y,data:d,method:F,withCredentials:u,name:T,action:N,onProgress:S,onSuccess:A,onError:Re,httpRequest:Te}=o,{uid:Z}=l,ee={headers:y||{},withCredentials:u,file:l,data:v??d,method:F,filename:T,action:N,onProgress:q=>{S(q,l)},onSuccess:q=>{A(q,l),delete i.value[Z]},onError:q=>{Re(q,l),delete i.value[Z]}},te=Te(ee);i.value[Z]=te,te instanceof Promise&&te.then(ee.onSuccess,ee.onError)},k=l=>{const v=l.target.files;v&&$(Array.from(v))},m=()=>{c.value||(f.value.value="",f.value.click())},n=()=>{m()};return e({abort:l=>{st(i.value).filter(l?([y])=>String(l.uid)===y:()=>!0).forEach(([y,d])=>{d instanceof XMLHttpRequest&&d.abort(),delete i.value[y]})},upload:h}),(l,v)=>(b(),L("div",{class:g([a(s).b(),a(s).m(l.listType),a(s).is("drag",l.drag)]),tabindex:"0",onClick:m,onKeydown:be(V(n,["self"]),["enter","space"])},[l.drag?(b(),B(Vt,{key:0,disabled:a(c),onFile:$},{default:R(()=>[P(l.$slots,"default")]),_:3},8,["disabled"])):P(l.$slots,"default",{key:1}),D("input",{ref_key:"inputRef",ref:f,class:g(a(s).e("input")),name:l.name,multiple:l.multiple,accept:l.accept,type:"file",onChange:k,onClick:v[0]||(v[0]=V(()=>{},["stop"]))},null,42,zt)],42,qt))}});var ve=H(Ht,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const me="ElUpload",Kt=t=>{var e;(e=t.url)!=null&&e.startsWith("blob:")&&URL.revokeObjectURL(t.url)},Gt=(t,e)=>{const o=nt(t,"fileList",void 0,{passive:!0}),s=n=>o.value.find(r=>r.uid===n.uid);function c(n){var r;(r=e.value)==null||r.abort(n)}function i(n=["ready","uploading","success","fail"]){o.value=o.value.filter(r=>!n.includes(r.status))}const f=(n,r)=>{const l=s(r);l&&(console.error(n),l.status="fail",o.value.splice(o.value.indexOf(l),1),t.onError(n,l,o.value),t.onChange(l,o.value))},$=(n,r)=>{const l=s(r);l&&(t.onProgress(n,l,o.value),l.status="uploading",l.percentage=Math.round(n.percent))},h=(n,r)=>{const l=s(r);l&&(l.status="success",l.response=n,t.onSuccess(n,l,o.value),t.onChange(l,o.value))},p=n=>{Le(n.uid)&&(n.uid=oe());const r={name:n.name,percentage:0,status:"ready",size:n.size,raw:n,uid:n.uid};if(t.listType==="picture-card"||t.listType==="picture")try{r.url=URL.createObjectURL(n)}catch(l){lt(me,l.message),t.onError(l,r,o.value)}o.value=[...o.value,r],t.onChange(r,o.value)},k=async n=>{const r=n instanceof File?s(n):n;r||re(me,"file to be removed not found");const l=v=>{c(v);const y=o.value;y.splice(y.indexOf(v),1),t.onRemove(v,y),Kt(v)};t.beforeRemove?await t.beforeRemove(r,o.value)!==!1&&l(r):l(r)};function m(){o.value.filter(({status:n})=>n==="ready").forEach(({raw:n})=>{var r;return n&&((r=e.value)==null?void 0:r.upload(n))})}return ie(()=>t.listType,n=>{n!=="picture-card"&&n!=="picture"||(o.value=o.value.map(r=>{const{raw:l,url:v}=r;if(!v&&l)try{r.url=URL.createObjectURL(l)}catch(y){t.onError(y,r,o.value)}return r}))}),ie(o,n=>{for(const r of n)r.uid||(r.uid=oe()),r.status||(r.status="success")},{immediate:!0,deep:!0}),{uploadFiles:o,abort:c,clearFiles:i,handleError:f,handleProgress:$,handleStart:p,handleSuccess:h,handleRemove:k,submit:m}},Xt=O({name:"ElUpload"}),Yt=O({...Xt,props:St,setup(t,{expose:e}){const o=t,s=Ie(),c=Q(),i=se(),{abort:f,submit:$,clearFiles:h,uploadFiles:p,handleStart:k,handleError:m,handleRemove:n,handleSuccess:r,handleProgress:l}=Gt(o,i),v=E(()=>o.listType==="picture-card"),y=E(()=>({...o,fileList:p.value,onStart:k,onProgress:l,onSuccess:r,onError:m,onRemove:n}));return je(()=>{p.value.forEach(({url:d})=>{d!=null&&d.startsWith("blob:")&&URL.revokeObjectURL(d)})}),Me(_e,{accept:Ve(o,"accept")}),e({abort:f,submit:$,clearFiles:h,handleStart:k,handleRemove:n}),(d,F)=>(b(),L("div",null,[a(v)&&d.showFileList?(b(),B(fe,{key:0,disabled:a(c),"list-type":d.listType,files:a(p),"handle-preview":d.onPreview,onRemove:a(n)},ue({append:R(()=>[U(ve,de({ref_key:"uploadRef",ref:i},a(y)),{default:R(()=>[a(s).trigger?P(d.$slots,"trigger",{key:0}):C("v-if",!0),!a(s).trigger&&a(s).default?P(d.$slots,"default",{key:1}):C("v-if",!0)]),_:3},16)]),_:2},[d.$slots.file?{name:"default",fn:R(({file:u})=>[P(d.$slots,"file",{file:u})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):C("v-if",!0),!a(v)||a(v)&&!d.showFileList?(b(),B(ve,de({key:1,ref_key:"uploadRef",ref:i},a(y)),{default:R(()=>[a(s).trigger?P(d.$slots,"trigger",{key:0}):C("v-if",!0),!a(s).trigger&&a(s).default?P(d.$slots,"default",{key:1}):C("v-if",!0)]),_:3},16)):C("v-if",!0),d.$slots.trigger?P(d.$slots,"default",{key:2}):C("v-if",!0),P(d.$slots,"tip"),!a(v)&&d.showFileList?(b(),B(fe,{key:3,disabled:a(c),"list-type":d.listType,files:a(p),"handle-preview":d.onPreview,onRemove:a(n)},ue({_:2},[d.$slots.file?{name:"default",fn:R(({file:u})=>[P(d.$slots,"file",{file:u})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):C("v-if",!0)]))}});var Jt=H(Yt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const rs=Ce(Jt);function Qt(t){let e;const o=J(!1),s=xe({...t,originalPosition:"",originalOverflow:"",visible:!1});function c(n){s.text=n}function i(){const n=s.parent,r=m.ns;if(!n.vLoadingAddClassList){let l=n.getAttribute("loading-number");l=Number.parseInt(l)-1,l?n.setAttribute("loading-number",l.toString()):(Y(n,r.bm("parent","relative")),n.removeAttribute("loading-number")),Y(n,r.bm("parent","hidden"))}f(),k.unmount()}function f(){var n,r;(r=(n=m.$el)==null?void 0:n.parentNode)==null||r.removeChild(m.$el)}function $(){var n;t.beforeClose&&!t.beforeClose()||(o.value=!0,clearTimeout(e),e=window.setTimeout(h,400),s.visible=!1,(n=t.closed)==null||n.call(t))}function h(){if(!o.value)return;const n=s.parent;o.value=!1,n.vLoadingAddClassList=void 0,i()}const k=qe(O({name:"ElLoading",setup(n,{expose:r}){const{ns:l,zIndex:v}=at("loading");return r({ns:l,zIndex:v}),()=>{const y=s.spinner||s.svg,d=z("svg",{class:"circular",viewBox:s.svgViewBox?s.svgViewBox:"0 0 50 50",...y?{innerHTML:y}:{}},[z("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),F=s.text?z("p",{class:l.b("text")},[s.text]):void 0;return z(Ke,{name:l.b("fade"),onAfterLeave:h},{default:R(()=>[We(U("div",{style:{backgroundColor:s.background||""},class:[l.b("mask"),s.customClass,s.fullscreen?"is-fullscreen":""]},[z("div",{class:l.b("spinner")},[d,F])]),[[He,s.visible]])])})}}})),m=k.mount(document.createElement("div"));return{...ze(s),setText:c,removeElLoadingChild:f,close:$,handleAfterLeave:h,vm:m,get $el(){return m.$el}}}let K;const Zt=function(t={}){if(!ot)return;const e=es(t);if(e.fullscreen&&K)return K;const o=Qt({...e,closed:()=>{var c;(c=e.closed)==null||c.call(e),e.fullscreen&&(K=void 0)}});ts(e,e.parent,o),ge(e,e.parent,o),e.parent.vLoadingAddClassList=()=>ge(e,e.parent,o);let s=e.parent.getAttribute("loading-number");return s?s=`${Number.parseInt(s)+1}`:s="1",e.parent.setAttribute("loading-number",s),e.parent.appendChild(o.$el),he(()=>o.visible.value=e.visible),e.fullscreen&&(K=o),o},es=t=>{var e,o,s,c;let i;return G(t.target)?i=(e=document.querySelector(t.target))!=null?e:document.body:i=t.target||document.body,{parent:i===document.body||t.body?document.body:i,background:t.background||"",svg:t.svg||"",svgViewBox:t.svgViewBox||"",spinner:t.spinner||!1,text:t.text||"",fullscreen:i===document.body&&((o=t.fullscreen)!=null?o:!0),lock:(s=t.lock)!=null?s:!1,customClass:t.customClass||"",visible:(c=t.visible)!=null?c:!0,target:i}},ts=async(t,e,o)=>{const{nextZIndex:s}=o.vm.zIndex,c={};if(t.fullscreen)o.originalPosition.value=W(document.body,"position"),o.originalOverflow.value=W(document.body,"overflow"),c.zIndex=s();else if(t.parent===document.body){o.originalPosition.value=W(document.body,"position"),await he();for(const i of["top","left"]){const f=i==="top"?"scrollTop":"scrollLeft";c[i]=`${t.target.getBoundingClientRect()[i]+document.body[f]+document.documentElement[f]-Number.parseInt(W(document.body,`margin-${i}`),10)}px`}for(const i of["height","width"])c[i]=`${t.target.getBoundingClientRect()[i]}px`}else o.originalPosition.value=W(e,"position");for(const[i,f]of Object.entries(c))o.$el.style[i]=f},ge=(t,e,o)=>{const s=o.vm.ns;["absolute","fixed","sticky"].includes(o.originalPosition.value)?Y(e,s.bm("parent","relative")):ce(e,s.bm("parent","relative")),t.fullscreen&&t.lock?ce(e,s.bm("parent","hidden")):Y(e,s.bm("parent","hidden"))},ne=Symbol("ElLoading"),ye=(t,e)=>{var o,s,c,i;const f=e.instance,$=n=>le(e.value)?e.value[n]:void 0,h=n=>{const r=G(n)&&(f==null?void 0:f[n])||n;return r&&J(r)},p=n=>h($(n)||t.getAttribute(`element-loading-${Xe(n)}`)),k=(o=$("fullscreen"))!=null?o:e.modifiers.fullscreen,m={text:p("text"),svg:p("svg"),svgViewBox:p("svgViewBox"),spinner:p("spinner"),background:p("background"),customClass:p("customClass"),fullscreen:k,target:(s=$("target"))!=null?s:k?void 0:t,body:(c=$("body"))!=null?c:e.modifiers.body,lock:(i=$("lock"))!=null?i:e.modifiers.lock};t[ne]={options:m,instance:Zt(m)}},ss=(t,e)=>{for(const o of Object.keys(e))Ge(e[o])&&(e[o].value=t[o])},is={mounted(t,e){e.value&&ye(t,e)},updated(t,e){const o=t[ne];e.oldValue!==e.value&&(e.value&&!e.oldValue?ye(t,e):e.value&&e.oldValue?le(e.value)&&ss(e.value,o.options):o==null||o.instance.close())},unmounted(t){var e;(e=t[ne])==null||e.instance.close()}};export{rs as E,is as v};
