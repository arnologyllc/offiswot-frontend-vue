import{E as A,_ as x,a as G,b as K}from"./el-overlay.cc8d7c8f.js";import{E as Q,a as Y}from"./el-select.e72b00d4.js";import{E as Z}from"./el-button.efbddc4b.js";import"./el-form-item.4ed993c7.js";import"./el-scrollbar.d58a7d25.js";import"./el-popper.d21866a4.js";import{a as ee,s as oe,b as se,r as p,w as S,e as te,f as m,h as u,i as n,u as e,j as ae,c as h,k as c,l as re,o as l,m as a,t as y,F as le,p as ne,q as ie,v as ue,x as me}from"./entry.d5ce8ebf.js";import{_ as ce}from"./chevron-left.45569363.js";import{_ as _e}from"./chevron-icon.8dee40ad.js";import{_ as de}from"./AccessCheckModal.40b6ab47.js";import{E as pe}from"./ErrorMassageModal.4b7d9029.js";import fe from"./settingsToken.4f8f73e6.js";import ve from"./loginToken.1dcf96fb.js";import ge from"./auth.a45746ca.js";import{_ as be}from"./_plugin-vue_export-helper.c27b6911.js";import"./focus-trap.2184c8ed.js";import"./isEqual.300fe285.js";import"./debounce.261a8b47.js";import"./email-primary-icon.83ef1c2c.js";import"./eye-close-icon.225f2d95.js";const f=v=>(ue("data-v-bd6b7a59"),v=v(),me(),v),ke={class:"main"},we={class:"main__form--title"},Se={class:"main__title"},he=f(()=>a("div",{class:"main__subtitle"},"Please fill the form to create workspace.",-1)),ye={key:0,class:"el-form-item__global-error-container"},Ee={class:"el-form-item__global-error"},$e=f(()=>a("img",{src:x,alt:""},null,-1)),Ie=f(()=>a("span",{for:"name",class:"custom_placeholder"}," Workspace Name ",-1)),xe=[Ie],Ce={key:0,class:"el-form-item__error"},Ve=["innerHTML"],We=f(()=>a("div",null,null,-1)),Fe={class:"main__form--actions"},Le={class:"submit-button__text"},Me=f(()=>a("img",{src:_e,alt:"arrow"},null,-1)),Be={__name:"create-workspace",setup(v){const b=ee(),{isLoadingIndustries:C,industriesList:V,industriesError:W,isLoadingSubmit:E,createWorkspaceSuccess:F,createWorkspaceError:L}=oe(b),g=re(),M=se(),i=p({name:null,industry_id:null}),B=p({name:{required:!0,message:"Please input workspace name",trigger:"blur"}}),t=p({name:{value:"",isShow:!1},global:{value:""}}),_=p(!1),$=p(!1);S(F,o=>{o&&ie("/profile")}),S(L,o=>{o&&(t.value.global.value=o)}),S(W,o=>{o&&(t.value.global.value=o)}),te(async()=>{ge(),$.value=JSON.parse(localStorage.getItem("accounts"))[0].email,_.value=ve(),_.value=fe(),window.addEventListener("resize",z),await b.getIndustries()});const T=()=>{g.refs.createForm.validate(o=>{if(o)b.createWorkspace(i.value);else return t.value.global.value="Please fill empty areas",!1})},N=o=>{g.refs[o].focus()},P=o=>{g.refs.createForm.validateField(o,(s,k)=>{s?t.value[o].value="":t.value[o].value=k[o][0].message})},q=o=>{t.value[o].isShow=!0},O=o=>{d()&&(t.value[o].isShow=!0)},R=o=>{d()&&(t.value[o].isShow=!1)},z=()=>{g.update()},d=()=>window.innerWidth>990,D=()=>{t.value.global.value=""};return(o,s)=>{const k=G,w=K,H=Q,U=Y,j=Z,J=A;return l(),m("div",ke,[u(J,{ref:"createForm",class:"main__form","hide-required-asterisk":"",rules:e(B),model:e(i),onSubmit:ae(T,["prevent"])},{default:n(()=>[a("div",we,[a("img",{src:ce,alt:"chevron-left",onClick:s[0]||(s[0]=r=>e(M).go(-1))}),a("div",Se,"Create workspace as "+y(e($)),1)]),he,e(t).global.value?(l(),m("div",ye,[a("div",Ee,[$e,a("span",null,y(e(t).global.value),1)]),a("span",{class:"clear-error",onClick:D},"X")])):c("",!0),u(w,{prop:"name"},{error:n(()=>[e(t).name.isShow&&d()?(l(),m("div",Ce,[a("span",{innerHTML:e(t).name.value},null,8,Ve)])):c("",!0),We]),default:n(()=>[u(k,{modelValue:e(i).name,"onUpdate:modelValue":s[5]||(s[5]=r=>e(i).name=r),class:"main__form--input",placeholder:"Workspace name",onBlur:s[6]||(s[6]=r=>P("name"))},{suffix:n(()=>[e(i).name?(l(),m("div",{key:0,style:{position:"relative"},onClick:s[1]||(s[1]=r=>N("name"))},xe)):c("",!0),e(t).name.value?(l(),m("img",{key:1,src:x,alt:"",class:"error_icon",onMouseover:s[2]||(s[2]=r=>O("name")),onMouseout:s[3]||(s[3]=r=>R("name")),onClick:s[4]||(s[4]=r=>q("name"))},null,32)):c("",!0)]),_:1},8,["modelValue"])]),_:1}),u(w,{prop:"industry_id"},{default:n(()=>[u(U,{modelValue:e(i).industry_id,"onUpdate:modelValue":s[7]||(s[7]=r=>e(i).industry_id=r),loading:e(C),class:"main__form--input",placeholder:"Select Industry"},{default:n(()=>{var r;return[(l(!0),m(le,null,ne((r=e(V))==null?void 0:r.industries,(I,X)=>(l(),h(H,{key:`option_${X}`,value:I.id,label:I.name},null,8,["value","label"]))),128))]}),_:1},8,["modelValue","loading"])]),_:1}),u(w,{class:"main__form--footer"},{default:n(()=>[a("div",Fe,[u(j,{"native-type":"submit",loading:e(E),class:"submit-button"},{default:n(()=>[a("span",null,[a("span",Le,y(e(E)?"":"Next"),1),Me])]),_:1},8,["loading"])])]),_:1}),e(t).name.isShow&&!d()?(l(),h(pe,{key:1,"dialog-visible":e(t).name.isShow&&!d(),"error-text":e(t).name.value,onVisible:s[8]||(s[8]=r=>e(t).name.isShow=!1)},null,8,["dialog-visible","error-text"])):c("",!0)]),_:1},8,["rules","model","onSubmit"]),e(_)?(l(),h(de,{key:0,"dialog-visible":e(_),onClose:s[9]||(s[9]=r=>_.value=!1)},null,8,["dialog-visible"])):c("",!0)])}}},oo=be(Be,[["__scopeId","data-v-bd6b7a59"]]);export{oo as default};
