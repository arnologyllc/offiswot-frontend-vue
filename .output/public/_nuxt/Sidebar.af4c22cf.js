import{_ as j,b as pe,d as V,J as We,E as ge,j as Ne,l as He,a as Ve,ao as je,h as qe,w as Ze,r as Fe}from"./el-button.54301017.js";import{c as z,b as Qe,u as Ce,E as Xe,O as xe,w as $e}from"./el-popper.a5bde8af.js";import{E as eo}from"./el-scrollbar.8a70161e.js";import{E as C,e as oo,c as Re,F as no}from"./focus-trap.24649fb3.js";import{M as q,S as Y,r as E,Q as le,O as L,e as De,u as N,ad as Ae,C as K,bq as to,a5 as re,w as x,a8 as D,o as F,c as ae,j as g,i as $,n as so,g as ro,Z as Pe,P as lo,N as we,h as J,aj as ao,T as ie,G as Z,l as ue,m as be,L as io,p as B,R as uo,k as _e,F as de,J as co,A as po,B as fo,E as mo,a as vo,s as _o,bZ as go,b as wo,H as bo,f as w,q as Se,v as X,z as ho,t as Io,D as ko,x as Eo,y as yo}from"./entry.3cdac9c8.js";/* empty css                        */import{d as se}from"./default-user-icon.8ea24633.js";import{_ as Co}from"./_plugin-vue_export-helper.c27b6911.js";const $o=q({inheritAttrs:!1});function So(e,o,u,s,f,d){return Y(e.$slots,"default")}var To=j($o,[["render",So],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);const Oo=q({name:"ElCollectionItem",inheritAttrs:!1});function No(e,o,u,s,f,d){return Y(e.$slots,"default")}var Fo=j(Oo,[["render",No],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const Le="data-el-collection-item",Me=e=>{const o=`El${e}Collection`,u=`${o}Item`,s=Symbol(o),f=Symbol(u),d={...To,name:o,setup(){const l=E(null),v=new Map;le(s,{itemMap:v,getItems:()=>{const I=N(l);if(!I)return[];const _=Array.from(I.querySelectorAll(`[${Le}]`));return[...v.values()].sort((t,m)=>_.indexOf(t.ref)-_.indexOf(m.ref))},collectionRef:l})}},a={...Fo,name:u,setup(l,{attrs:v}){const b=E(null),I=L(s,void 0);le(f,{collectionItemRef:b}),De(()=>{const _=N(b);_&&I.itemMap.set(_,{ref:_,...v})}),Ae(()=>{const _=N(b);I.itemMap.delete(_)})}};return{COLLECTION_INJECTION_KEY:s,COLLECTION_ITEM_INJECTION_KEY:f,ElCollection:d,ElCollectionItem:a}},Ro=pe({style:{type:V([String,Array,Object])},currentTabId:{type:V(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:V(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:Do,ElCollectionItem:Ao,COLLECTION_INJECTION_KEY:he,COLLECTION_ITEM_INJECTION_KEY:Po}=Me("RovingFocusGroup"),Ie=Symbol("elRovingFocusGroup"),Be=Symbol("elRovingFocusGroupItem"),Lo={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},Mo=(e,o)=>{if(o!=="rtl")return e;switch(e){case C.right:return C.left;case C.left:return C.right;default:return e}},Bo=(e,o,u)=>{const s=Mo(e.key,u);if(!(o==="vertical"&&[C.left,C.right].includes(s))&&!(o==="horizontal"&&[C.up,C.down].includes(s)))return Lo[s]},Ko=(e,o)=>e.map((u,s)=>e[(s+o)%e.length]),ke=e=>{const{activeElement:o}=document;for(const u of e)if(u===o||(u.focus(),o!==document.activeElement))return},Te="currentTabIdChange",Oe="rovingFocusGroup.entryFocus",Uo={bubbles:!1,cancelable:!0},Go=q({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:Ro,emits:[Te,"entryFocus"],setup(e,{emit:o}){var u;const s=E((u=e.currentTabId||e.defaultCurrentTabId)!=null?u:null),f=E(!1),d=E(!1),a=E(null),{getItems:l}=L(he,void 0),v=K(()=>[{outline:"none"},e.style]),b=c=>{o(Te,c)},I=()=>{f.value=!0},_=z(c=>{var h;(h=e.onMousedown)==null||h.call(e,c)},()=>{d.value=!0}),k=z(c=>{var h;(h=e.onFocus)==null||h.call(e,c)},c=>{const h=!N(d),{target:r,currentTarget:A}=c;if(r===A&&h&&!N(f)){const T=new Event(Oe,Uo);if(A==null||A.dispatchEvent(T),!T.defaultPrevented){const y=l().filter(M=>M.focusable),U=y.find(M=>M.active),O=y.find(M=>M.id===N(s)),H=[U,O,...y].filter(Boolean).map(M=>M.ref);ke(H)}}d.value=!1}),t=z(c=>{var h;(h=e.onBlur)==null||h.call(e,c)},()=>{f.value=!1}),m=(...c)=>{o("entryFocus",...c)};le(Ie,{currentTabbedId:to(s),loop:re(e,"loop"),tabIndex:K(()=>N(f)?-1:0),rovingFocusGroupRef:a,rovingFocusGroupRootStyle:v,orientation:re(e,"orientation"),dir:re(e,"dir"),onItemFocus:b,onItemShiftTab:I,onBlur:t,onFocus:k,onMousedown:_}),x(()=>e.currentTabId,c=>{s.value=c??null}),oo(a,Oe,m)}});function Jo(e,o,u,s,f,d){return Y(e.$slots,"default")}var zo=j(Go,[["render",Jo],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group-impl.vue"]]);const Yo=q({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:Do,ElRovingFocusGroupImpl:zo}});function Wo(e,o,u,s,f,d){const a=D("el-roving-focus-group-impl"),l=D("el-focus-group-collection");return F(),ae(l,null,{default:g(()=>[$(a,so(ro(e.$attrs)),{default:g(()=>[Y(e.$slots,"default")]),_:3},16)]),_:3})}var Ho=j(Yo,[["render",Wo],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group.vue"]]);const Vo=q({components:{ElRovingFocusCollectionItem:Ao},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:o}){const{currentTabbedId:u,loop:s,onItemFocus:f,onItemShiftTab:d}=L(Ie,void 0),{getItems:a}=L(he,void 0),l=Pe(),v=E(null),b=z(t=>{o("mousedown",t)},t=>{e.focusable?f(N(l)):t.preventDefault()}),I=z(t=>{o("focus",t)},()=>{f(N(l))}),_=z(t=>{o("keydown",t)},t=>{const{key:m,shiftKey:c,target:h,currentTarget:r}=t;if(m===C.tab&&c){d();return}if(h!==r)return;const A=Bo(t);if(A){t.preventDefault();let y=a().filter(U=>U.focusable).map(U=>U.ref);switch(A){case"last":{y.reverse();break}case"prev":case"next":{A==="prev"&&y.reverse();const U=y.indexOf(r);y=s.value?Ko(y,U+1):y.slice(U+1);break}}lo(()=>{ke(y)})}}),k=K(()=>u.value===N(l));return le(Be,{rovingFocusGroupItemRef:v,tabIndex:K(()=>N(k)?0:-1),handleMousedown:b,handleFocus:I,handleKeydown:_}),{id:l,handleKeydown:_,handleFocus:I,handleMousedown:b}}});function jo(e,o,u,s,f,d){const a=D("el-roving-focus-collection-item");return F(),ae(a,{id:e.id,focusable:e.focusable,active:e.active},{default:g(()=>[Y(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var qo=j(Vo,[["render",jo],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-item.vue"]]);const Zo=pe({trigger:Qe.trigger,effect:{...Ce.effect,default:"light"},type:{type:V(String)},placement:{type:V(String),default:"bottom"},popperOptions:{type:V(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:V([Number,String]),default:0},maxHeight:{type:V([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:V(Object)},teleported:Ce.teleported}),Ke=pe({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:We}}),Qo=pe({onKeydown:{type:V(Function)}}),Xo=[C.down,C.pageDown,C.home],Ue=[C.up,C.pageUp,C.end],xo=[...Xo,...Ue],{ElCollection:en,ElCollectionItem:on,COLLECTION_INJECTION_KEY:nn,COLLECTION_ITEM_INJECTION_KEY:tn}=Me("Dropdown"),fe=Symbol("elDropdown"),{ButtonGroup:sn}=ge,rn=q({name:"ElDropdown",components:{ElButton:ge,ElButtonGroup:sn,ElScrollbar:eo,ElDropdownCollection:en,ElTooltip:Xe,ElRovingFocusGroup:Ho,ElOnlyChild:xe,ElIcon:Ne,ArrowDown:He},props:Zo,emits:["visible-change","click","command"],setup(e,{emit:o}){const u=be(),s=we("dropdown"),{t:f}=Ve(),d=E(),a=E(),l=E(null),v=E(null),b=E(null),I=E(null),_=E(!1),k=[C.enter,C.space,C.down],t=K(()=>({maxHeight:je(e.maxHeight)})),m=K(()=>[s.m(y.value)]),c=Pe().value,h=K(()=>e.id||c);x([d,re(e,"trigger")],([i,P],[n])=>{var p,S,R;const ne=io(P)?P:[P];(p=n==null?void 0:n.$el)!=null&&p.removeEventListener&&n.$el.removeEventListener("pointerenter",O),(S=i==null?void 0:i.$el)!=null&&S.removeEventListener&&i.$el.removeEventListener("pointerenter",O),(R=i==null?void 0:i.$el)!=null&&R.addEventListener&&ne.includes("hover")&&i.$el.addEventListener("pointerenter",O)},{immediate:!0}),Ae(()=>{var i,P;(P=(i=d.value)==null?void 0:i.$el)!=null&&P.removeEventListener&&d.value.$el.removeEventListener("pointerenter",O)});function r(){A()}function A(){var i;(i=l.value)==null||i.onClose()}function T(){var i;(i=l.value)==null||i.onOpen()}const y=qe();function U(...i){o("command",...i)}function O(){var i,P;(P=(i=d.value)==null?void 0:i.$el)==null||P.focus()}function W(){}function H(){const i=N(v);i==null||i.focus(),I.value=null}function M(i){I.value=i}function ee(i){_.value||(i.preventDefault(),i.stopImmediatePropagation())}function oe(){o("visible-change",!0)}function Q(i){(i==null?void 0:i.type)==="keydown"&&v.value.focus()}function me(){o("visible-change",!1)}return le(fe,{contentRef:v,role:K(()=>e.role),triggerId:h,isUsingKeyboard:_,onItemEnter:W,onItemLeave:H}),le("elDropdown",{instance:u,dropdownSize:y,handleClick:r,commandHandler:U,trigger:re(e,"trigger"),hideOnClick:re(e,"hideOnClick")}),{t:f,ns:s,scrollbar:b,wrapStyle:t,dropdownTriggerKls:m,dropdownSize:y,triggerId:h,triggerKeys:k,currentTabId:I,handleCurrentTabIdChange:M,handlerMainButtonClick:i=>{o("click",i)},handleEntryFocus:ee,handleClose:A,handleOpen:T,handleBeforeShowTooltip:oe,handleShowTooltip:Q,handleBeforeHideTooltip:me,onFocusAfterTrapped:i=>{var P,n;i.preventDefault(),(n=(P=v.value)==null?void 0:P.focus)==null||n.call(P,{preventScroll:!0})},popperRef:l,contentRef:v,triggeringElementRef:d,referenceElementRef:a}}});function ln(e,o,u,s,f,d){var a;const l=D("el-dropdown-collection"),v=D("el-roving-focus-group"),b=D("el-scrollbar"),I=D("el-only-child"),_=D("el-tooltip"),k=D("el-button"),t=D("arrow-down"),m=D("el-icon"),c=D("el-button-group");return F(),J("div",{class:Z([e.ns.b(),e.ns.is("disabled",e.disabled)])},[$(_,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":(a=e.referenceElementRef)==null?void 0:a.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"",persistent:"",onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},ao({content:g(()=>[$(b,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:g(()=>[$(v,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:g(()=>[$(l,null,{default:g(()=>[Y(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:g(()=>[$(I,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:g(()=>[Y(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(F(),ae(c,{key:0},{default:g(()=>[$(k,ie({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:g(()=>[Y(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),$(k,ie({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:g(()=>[$(m,{class:Z(e.ns.e("icon"))},{default:g(()=>[$(t)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):ue("v-if",!0)],2)}var an=j(rn,[["render",ln],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown.vue"]]);const un=q({name:"DropdownItemImpl",components:{ElIcon:Ne},props:Ke,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:o}){const u=we("dropdown"),{role:s}=L(fe,void 0),{collectionItemRef:f}=L(tn,void 0),{collectionItemRef:d}=L(Po,void 0),{rovingFocusGroupItemRef:a,tabIndex:l,handleFocus:v,handleKeydown:b,handleMousedown:I}=L(Be,void 0),_=Re(f,d,a),k=K(()=>s.value==="menu"?"menuitem":s.value==="navigation"?"link":"button"),t=z(m=>{const{code:c}=m;if(c===C.enter||c===C.space)return m.preventDefault(),m.stopImmediatePropagation(),o("clickimpl",m),!0},b);return{ns:u,itemRef:_,dataset:{[Le]:""},role:k,tabIndex:l,handleFocus:v,handleKeydown:t,handleMousedown:I}}}),cn=["aria-disabled","tabindex","role"];function dn(e,o,u,s,f,d){const a=D("el-icon");return F(),J(de,null,[e.divided?(F(),J("li",ie({key:0,role:"separator",class:e.ns.bem("menu","item","divided")},e.$attrs),null,16)):ue("v-if",!0),B("li",ie({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:o[0]||(o[0]=l=>e.$emit("clickimpl",l)),onFocus:o[1]||(o[1]=(...l)=>e.handleFocus&&e.handleFocus(...l)),onKeydown:o[2]||(o[2]=_e((...l)=>e.handleKeydown&&e.handleKeydown(...l),["self"])),onMousedown:o[3]||(o[3]=(...l)=>e.handleMousedown&&e.handleMousedown(...l)),onPointermove:o[4]||(o[4]=l=>e.$emit("pointermove",l)),onPointerleave:o[5]||(o[5]=l=>e.$emit("pointerleave",l))}),[e.icon?(F(),ae(a,{key:0},{default:g(()=>[(F(),ae(uo(e.icon)))]),_:1})):ue("v-if",!0),Y(e.$slots,"default")],16,cn)],64)}var pn=j(un,[["render",dn],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item-impl.vue"]]);const Ge=()=>{const e=L("elDropdown",{}),o=K(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:o}},fn=q({name:"ElDropdownItem",components:{ElDropdownCollectionItem:on,ElRovingFocusItem:qo,ElDropdownItemImpl:pn},inheritAttrs:!1,props:Ke,emits:["pointermove","pointerleave","click"],setup(e,{emit:o,attrs:u}){const{elDropdown:s}=Ge(),f=be(),d=E(null),a=K(()=>{var t,m;return(m=(t=N(d))==null?void 0:t.textContent)!=null?m:""}),{onItemEnter:l,onItemLeave:v}=L(fe,void 0),b=z(t=>(o("pointermove",t),t.defaultPrevented),$e(t=>{if(e.disabled){v(t);return}const m=t.currentTarget;m===document.activeElement||m.contains(document.activeElement)||(l(t),t.defaultPrevented||m==null||m.focus())})),I=z(t=>(o("pointerleave",t),t.defaultPrevented),$e(t=>{v(t)})),_=z(t=>{if(!e.disabled)return o("click",t),t.type!=="keydown"&&t.defaultPrevented},t=>{var m,c,h;if(e.disabled){t.stopImmediatePropagation();return}(m=s==null?void 0:s.hideOnClick)!=null&&m.value&&((c=s.handleClick)==null||c.call(s)),(h=s.commandHandler)==null||h.call(s,e.command,f,t)}),k=K(()=>({...e,...u}));return{handleClick:_,handlePointerMove:b,handlePointerLeave:I,textContent:a,propsAndAttrs:k}}});function mn(e,o,u,s,f,d){var a;const l=D("el-dropdown-item-impl"),v=D("el-roving-focus-item"),b=D("el-dropdown-collection-item");return F(),ae(b,{disabled:e.disabled,"text-value":(a=e.textValue)!=null?a:e.textContent},{default:g(()=>[$(v,{focusable:!e.disabled},{default:g(()=>[$(l,ie(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:g(()=>[Y(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var Je=j(fn,[["render",mn],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item.vue"]]);const vn=q({name:"ElDropdownMenu",props:Qo,setup(e){const o=we("dropdown"),{_elDropdownSize:u}=Ge(),s=u.value,{focusTrapRef:f,onKeydown:d}=L(no,void 0),{contentRef:a,role:l,triggerId:v}=L(fe,void 0),{collectionRef:b,getItems:I}=L(nn,void 0),{rovingFocusGroupRef:_,rovingFocusGroupRootStyle:k,tabIndex:t,onBlur:m,onFocus:c,onMousedown:h}=L(Ie,void 0),{collectionRef:r}=L(he,void 0),A=K(()=>[o.b("menu"),o.bm("menu",s==null?void 0:s.value)]),T=Re(a,b,f,_,r),y=z(O=>{var W;(W=e.onKeydown)==null||W.call(e,O)},O=>{const{currentTarget:W,code:H,target:M}=O;if(W.contains(M),C.tab===H&&O.stopImmediatePropagation(),O.preventDefault(),M!==N(a)||!xo.includes(H))return;const oe=I().filter(Q=>!Q.disabled).map(Q=>Q.ref);Ue.includes(H)&&oe.reverse(),ke(oe)});return{size:s,rovingFocusGroupRootStyle:k,tabIndex:t,dropdownKls:A,role:l,triggerId:v,dropdownListWrapperRef:T,handleKeydown:O=>{y(O),d(O)},onBlur:m,onFocus:c,onMousedown:h}}}),_n=["role","aria-labelledby"];function gn(e,o,u,s,f,d){return F(),J("ul",{ref:e.dropdownListWrapperRef,class:Z(e.dropdownKls),style:co(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:o[0]||(o[0]=(...a)=>e.onBlur&&e.onBlur(...a)),onFocus:o[1]||(o[1]=(...a)=>e.onFocus&&e.onFocus(...a)),onKeydown:o[2]||(o[2]=_e((...a)=>e.handleKeydown&&e.handleKeydown(...a),["self"])),onMousedown:o[3]||(o[3]=_e((...a)=>e.onMousedown&&e.onMousedown(...a),["self"]))},[Y(e.$slots,"default")],46,_n)}var ze=j(vn,[["render",gn],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-menu.vue"]]);const wn=Ze(an,{DropdownItem:Je,DropdownMenu:ze}),bn=Fe(Je),hn=Fe(ze);const ce=e=>(Eo("data-v-38db9711"),e=e(),yo(),e),In={class:"main"},kn={class:"users"},En={key:0,class:"main__top"},yn=["onClick"],Cn=ce(()=>B("div",{class:"current__user-selector"},null,-1)),$n=["src"],Sn=ce(()=>B("i",{class:"el-icon-caret-bottom"},null,-1)),Tn=ce(()=>B("span",null,"Logout",-1)),On=ce(()=>B("div",{class:"current__workspace-selector"},null,-1)),Nn=["src","title","onClick"],Fn={class:"main__bottom"},Rn=ce(()=>B("div",{class:"main__user-actions--add_button"},[B("span",null,"+")],-1)),Dn={__name:"Sidebar",setup(e){const o=po(),u=fo(),s=mo(),f=vo(),{profileSuccessData:d,profileFailureData:a,editProfileData:l,editFailureData:v,workspacesSuccessData:b}=_o(o),{$myFetch:I}=go(),_=ko();E(se);const k=E(!1),t=be(),m=E(null),c=wo(),h=E(!1),r=E(!1),A=bo(),T=E(w.get("currentAccountID")?+w.get("currentAccountID"):0),y=E(!1),U=n=>{m.value=n,n!=null&&n.user.avatar?r.value[T.value].avatarUrl=`${_.public.env.serverUrl}${n.avatarPath}/${n.user.avatar}`:r.value[T.value].avatarUrl=`${se}`,localStorage.setItem("accounts",JSON.stringify(r.value))},O=n=>{r.value=JSON.parse(localStorage.getItem("accounts")),r.value[T.value].workspaces=n==null?void 0:n.myWorkspaces,localStorage.setItem("accounts",JSON.stringify(r.value))};x(b,n=>O(n)),x(d,n=>{n!=null&&n.user.avatar?r.value[T.value].avatarUrl=`${_.public.env.serverUrl}${n.avatarPath}/${n.user.avatar}`:r.value[T.value].avatarUrl=`${se}`,localStorage.setItem("accounts",JSON.stringify(r.value))}),x(v,n=>{(n==null?void 0:n.error)==="You don't have permission to access this resource"&&(w.remove("login_pin_token"),w.remove("settings_pin_token"),n=null,c.go())}),x(a,n=>{(n==null?void 0:n.error)==="You don't have permission to access this resource"&&(w.remove("login_pin_token"),w.remove("settings_pin_token"),n=null,c.go())}),x(l,n=>{n!=null&&n.user.avatar?r.value[T.value].avatarUrl=`${n.avatarPath}/${n.user.avatar}`:r.value[T.value].avatarUrl=`${se}`,localStorage.setItem("accounts",JSON.stringify(r.value))}),De(async()=>{r.value=JSON.parse(localStorage.getItem("accounts")).filter(n=>n.token),w.get("login_pin_token")&&(d.value?U(d.value):o.getProfile(),b.value?O(b.value):await o.getWorkSpaces()),window.addEventListener("resize",M)});const W=()=>{h.value="hovered"},H=()=>{h.value=!1},M=()=>{window.innerWidth<800&&(k.value=!1),t.update()},ee=async n=>{if(y.value=-1,T.value=n,w.set("currentAccountID",n),r.value[n].token===w.get("token")){X("/");return}if(o.$reset(),u.$reset(),s.$reset(),f.$reset(),(Date.parse(r.value[n].token_expires)-Date.now())/864e5<0){r.value.splice(n,1),localStorage.setItem("accounts",JSON.stringify(r.value)),r.value[0]?ee(0):(Object.keys(w.get()).forEach(function(p){w.remove(p,neededAttributes)}),c.go());return}w.set("token",r.value[n].token,{expires:(Date.parse(r.value[n].token_expires)-Date.now())/864e5}),w.set("first_login",r.value[n].first_login),r.value[n].settings_pin_token&&w.set("settings_pin_token",r.value[n].settings_pin_token),r.value[n].login_pin_token&&w.set("login_pin_token",r.value[n].login_pin_token,{expires:(Date.parse(r.value[n].login_pin_token_expires)-new Date)/864e5}),localStorage.setItem("accounts",JSON.stringify(r.value)),r.value[n].first_login===!0?X("/pin"):A.path==="/pin"&&X("/"),o.getProfile(),await o.getWorkSpaces(),X("/")},oe=n=>{T.value=-1,y.value=n,Q(n)},Q=n=>{X(`/workspace/staff/${n}`)},me=()=>{w.set("currentAccountID",r.value.length),w.set("addAccount",!0),window.open("/login","_blank")},Ee=async n=>{r.value.forEach((R,ne)=>R.ID=ne),ee(n),await I("logout",{method:"post"});const p=r.value.map(R=>(R.ID===n&&(R.token=null,R.token_expires=null,R.first_login=null,R.settings_pin_token=null),R));o.$reset(),u.$reset(),s.$reset(),f.$reset();const S=p.findIndex(R=>R.token);p[S]?Date.parse(p[S].token_expires)-Date.now()>0?(w.set("token",p[S].token,{expires:(Date.parse(p[S].token_expires)-Date.now())/864e5}),p[S].first_login===!0&&w.set("first_login",p[S].first_login),p[S].settings_pin_token&&w.set("settings_pin_token",p[S].settings_pin_token),p[S].login_pin_token&&w.set("login_pin_token",p[S].login_pin_token,{expires:(Date.parse(p[S].login_pin_token_expires)-new Date)/864e5}),w.set("currentAccountID",S),o.getProfile(),await o.getWorkSpaces(),r.value=p,localStorage.setItem("accounts",JSON.stringify(p)),c.go()):p.shift():(w.remove("token"),w.remove("first_login"),w.remove("settings_pin_token"),w.remove("login_pin_token"),localStorage.setItem("accounts",JSON.stringify(p)),r.value=p,X("/login"))},ve=(n,p)=>{switch(n){case"u":return p===T.value?"currentUser":!1;default:return p===+y.value?"currentWorkspace":!1}},i=()=>{window.innerWidth>800?k.value=!k.value:k.value=!1},P=K(()=>r.value.reduce((n,p)=>(p.token&&n.push(p),n),[]));return(n,p)=>{const S=bn,R=hn,ne=wn,Ye=ge;return F(),J("nav",In,[B("div",kn,[r.value?(F(),J("div",En,[(F(!0),J(de,null,Se(P.value,G=>{var ye;return F(),J(de,{key:G.ID},[$(ne,{class:Z(["main__user-actions",{currentUser:ve("u",G.ID),bordered:(ye=G.workspaces)==null?void 0:ye.length}])},{dropdown:g(()=>[$(R,null,{default:g(()=>[$(S,{class:"main__user-actions--add_element",onClick:te=>Ee(G.ID)},{default:g(()=>[Tn]),_:2},1032,["onClick"])]),_:2},1024)]),default:g(()=>[B("div",{class:"main__user-actions--user",onClick:te=>ee(G.ID)},[Cn,B("img",{src:G.avatarUrl?G.avatarUrl:N(se),alt:"Avatar",class:"main__user-actions--avatar"},null,8,$n),Sn],8,yn)]),_:2},1032,["class"]),(F(!0),J(de,null,Se(G.workspaces,te=>(F(),J("div",{key:te.id,class:Z(["main__user-workspaces",ve("w",te.id)])},[On,B("img",{src:G.avatarUrl?G.avatarUrl:N(se),alt:"Avatar",class:"main__user-workspaces--avatar",title:te.name,onClick:An=>oe(te.id)},null,8,Nn)],2))),128))],64)}),128))])):ue("",!0),B("div",Fn,[$(ne,{class:"main__user-actions-add"},{dropdown:g(()=>[$(R,{class:"main__user-actions--add_actions"},{default:g(()=>[$(S,{class:"main__user-actions--add_element"},{default:g(()=>[B("span",{class:Z(h.value),onClick:me,onMouseover:W,onMouseout:H}," Add account ",34)]),_:1}),$(S,{class:"main__user-actions--add_element"},{default:g(()=>[B("span",{class:Z(h.value),onClick:p[0]||(p[0]=G=>("navigateTo"in n?n.navigateTo:N(X))("/create-workspace")),onMouseover:W,onMouseout:H}," Add workspace ",34)]),_:1})]),_:1})]),default:g(()=>[Rn]),_:1})])]),N(A).path.includes("/pin/reset")?(F(),J("div",{key:0,class:Z(["chats",k.value?"large":"small"])},[$(Ye,{class:"chats-button",onClick:i},{default:g(()=>[ho(Io(k.value?"<":">"),1)]),_:1})],2)):ue("",!0)])}}},zn=Co(Dn,[["__scopeId","data-v-38db9711"]]);export{zn as default};
