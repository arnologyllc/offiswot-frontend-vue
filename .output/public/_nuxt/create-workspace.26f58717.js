import{E as J,_ as V,a as X,b as G}from"./el-overlay.4bb92685.js";import{E as K,a as Q}from"./el-select.b2a1b3b8.js";import{E as Y}from"./el-button.42bf09d7.js";import"./el-scrollbar.d52c227d.js";import"./el-popper.b1bac14d.js";import{a as Z,b as ee,s as oe,e as se,r as d,w as y,f as te,h as ae,i as m,j as a,u as o,t as h,k as u,l as i,m as re,c as E,p as c,q as le,o as l,F as ne,v as ie,x as ue,y as me,z as ce}from"./entry.02181b34.js";import{_ as _e}from"./chevron-left.65c64b6d.js";import{_ as de}from"./chevron-icon.72c85d0a.js";import{_ as pe}from"./AccessCheckModal.502142f1.js";import{E as fe}from"./ErrorMassageModal.5cb0f6ed.js";import ve from"./settingsToken.343eb467.js";import ge from"./loginToken.15d26e2d.js";import be from"./auth.ef07dd60.js";import{_ as ke}from"./_plugin-vue_export-helper.c27b6911.js";import"./focus-trap.456847b7.js";import"./isEqual.4f47e896.js";import"./debounce.b0d42ffe.js";import"./email-primary-icon.b4737d42.js";import"./eye-close-icon.a6bcbe4b.js";const p=f=>(ue("data-v-af19bea7"),f=f(),me(),f),we={class:"main"},Se={class:"main__header"},ye={class:"main__form--title"},he={class:"main__title"},Ee=p(()=>a("div",{class:"main__subtitle"},"Please fill the form to create workspace.",-1)),Ie={key:0,class:"el-form-item__global-error-container"},$e={class:"el-form-item__global-error"},xe=p(()=>a("img",{src:V,alt:""},null,-1)),We=p(()=>a("span",{for:"name",class:"custom_placeholder"}," Workspace Name ",-1)),Ve=[We],Ce={key:0,class:"el-form-item__error"},Fe=["innerHTML"],Le=p(()=>a("div",null,null,-1)),Me={class:"main__form--actions"},Be={class:"submit-button__text"},Te=p(()=>a("img",{src:de,alt:"arrow"},null,-1)),Pe={__name:"create-workspace",setup(f){const k=Z(),C=ee(),{isLoadingIndustries:F,industriesList:L,industriesError:M,isLoadingSubmit:I,createWorkspaceSuccess:B,createWorkspaceError:T}=oe(k),v=le(),P=se(),n=d({name:null,industry_id:null}),q=d({name:{required:!0,message:"Please input workspace name",trigger:"blur"}}),t=d({name:{value:"",isShow:!1},global:{value:""}}),_=d(!1),$=d(!1);y(B,s=>{C.getWorkSpaces(),s&&ce("/")}),y(T,s=>{s&&(t.value.global.value=s)}),y(M,s=>{s&&(t.value.global.value=s)}),te(async()=>{be(),$.value=JSON.parse(localStorage.getItem("accounts"))[ae.get("currentAccountID")].email,_.value=ge(),_.value=ve(),window.addEventListener("resize",D),await k.getIndustries()});const z=()=>{v.refs.createForm.validate(s=>{if(s)k.createWorkspace(n.value);else return t.value.global.value="Please fill workspace name",!1})},A=s=>{v.refs[s].focus()},x=s=>{v.refs.createForm.validateField(s,(e,b)=>{e?t.value[s].value="":t.value[s].value=b[s][0].message})},w=(s,e)=>{g()?t.value[s].isShow=e==="mouseover":e==="click"&&(t.value[s].isShow=!0)},D=()=>{v.update()},g=()=>window.innerWidth>990,N=()=>{t.value.global.value=""};return(s,e)=>{const b=X,S=G,O=K,R=Q,H=Y,U=J;return l(),m("div",we,[a("div",Se,[a("div",ye,[a("img",{src:_e,alt:"chevron-left",onClick:e[0]||(e[0]=r=>o(P).go(-1))}),a("div",he,"Create workspace as "+h(o($)),1)]),Ee]),u(U,{ref:"createForm",class:"main__form","hide-required-asterisk":"",rules:o(q),model:o(n),onSubmit:re(z,["prevent"])},{default:i(()=>[o(t).global.value?(l(),m("div",Ie,[a("div",$e,[xe,a("span",null,h(o(t).global.value),1)]),a("span",{class:"clear-error",onClick:N},"X")])):c("",!0),u(S,{prop:"name"},{error:i(()=>[o(t).name.isShow&&g()?(l(),m("div",Ce,[a("span",{innerHTML:o(t).name.value},null,8,Fe)])):c("",!0),Le]),default:i(()=>[u(b,{modelValue:o(n).name,"onUpdate:modelValue":e[5]||(e[5]=r=>o(n).name=r),class:"main__form--input",placeholder:"Workspace name",onInput:e[6]||(e[6]=r=>x("name")),onBlur:e[7]||(e[7]=r=>x("name"))},{suffix:i(()=>[o(n).name?(l(),m("div",{key:0,style:{position:"relative"},onClick:e[1]||(e[1]=r=>A("name"))},Ve)):c("",!0),o(t).name.value?(l(),m("img",{key:1,src:V,alt:"",class:"error_icon",onMouseover:e[2]||(e[2]=r=>w("name","mouseover")),onMouseout:e[3]||(e[3]=r=>w("name","mouseout")),onClick:e[4]||(e[4]=r=>w("name","click"))},null,32)):c("",!0)]),_:1},8,["modelValue"])]),_:1}),u(S,{prop:"industry_id"},{default:i(()=>[u(R,{modelValue:o(n).industry_id,"onUpdate:modelValue":e[8]||(e[8]=r=>o(n).industry_id=r),loading:o(F),class:"main__form--input",placeholder:"Select Industry"},{default:i(()=>{var r;return[(l(!0),m(ne,null,ie((r=o(L))==null?void 0:r.industries,(W,j)=>(l(),E(O,{key:`option_${j}`,value:W.id,label:W.name},null,8,["value","label"]))),128))]}),_:1},8,["modelValue","loading"])]),_:1}),u(S,{class:"main__form--footer"},{default:i(()=>[a("div",Me,[u(H,{"native-type":"submit",loading:o(I),class:"submit-button",disabled:!o(n).name},{default:i(()=>[a("span",null,[a("span",Be,h(o(I)?"":"Next"),1),Te])]),_:1},8,["loading","disabled"])])]),_:1}),o(t).name.isShow&&!g()?(l(),E(fe,{key:1,"dialog-visible":o(t).name.isShow&&!g(),"error-text":o(t).name.value,onVisible:e[9]||(e[9]=r=>o(t).name.isShow=!1)},null,8,["dialog-visible","error-text"])):c("",!0)]),_:1},8,["rules","model","onSubmit"]),o(_)?(l(),E(pe,{key:0,"dialog-visible":o(_),onClose:e[10]||(e[10]=r=>_.value=!1)},null,8,["dialog-visible"])):c("",!0)])}}},so=ke(Pe,[["__scopeId","data-v-af19bea7"]]);export{so as default};
