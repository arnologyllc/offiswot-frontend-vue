import{_ as H,b as de,d as Y,J as Ye,E as ge,j as Ne,l as We,a as He,ao as Ve,h as je,w as qe,r as Fe}from"./el-button.c5c7c37a.js";import{c as B,b as Ze,u as Ce,E as Qe,O as Xe,w as $e}from"./el-popper.08d27f54.js";import{E as xe}from"./el-scrollbar.53dcb553.js";import{E as C,e as eo,c as Re,F as oo}from"./focus-trap.84023b48.js";import{M as V,S as K,r as k,Q as se,O as D,e as De,u as F,ad as Ae,B as M,bq as no,a5 as te,w as Q,a8 as O,o as N,c as le,i as g,h as $,n as to,g as so,Z as Pe,P as lo,N as we,f as W,aj as ro,T as ae,E as j,k as ce,l as be,L as ao,m as R,R as io,j as _e,F as ue,J as uo,z as co,A as po,D as fo,a as mo,s as vo,bZ as _o,b as go,H as wo,G as w,p as Se,y as bo,t as ho,C as Io,q as oe,v as Eo,x as ko}from"./entry.b1b4faa5.js";/* empty css                        */import{d as ne}from"./default-user-icon.47d3977e.js";import{_ as yo}from"./_plugin-vue_export-helper.c27b6911.js";const Co=V({inheritAttrs:!1});function $o(e,o,u,s,p,d){return K(e.$slots,"default")}var So=H(Co,[["render",$o],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);const To=V({name:"ElCollectionItem",inheritAttrs:!1});function Oo(e,o,u,s,p,d){return K(e.$slots,"default")}var No=H(To,[["render",Oo],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const Le="data-el-collection-item",Me=e=>{const o=`El${e}Collection`,u=`${o}Item`,s=Symbol(o),p=Symbol(u),d={...So,name:o,setup(){const r=k(null),v=new Map;se(s,{itemMap:v,getItems:()=>{const I=F(r);if(!I)return[];const _=Array.from(I.querySelectorAll(`[${Le}]`));return[...v.values()].sort((t,f)=>_.indexOf(t.ref)-_.indexOf(f.ref))},collectionRef:r})}},a={...No,name:u,setup(r,{attrs:v}){const b=k(null),I=D(s,void 0);se(p,{collectionItemRef:b}),De(()=>{const _=F(b);_&&I.itemMap.set(_,{ref:_,...v})}),Ae(()=>{const _=F(b);I.itemMap.delete(_)})}};return{COLLECTION_INJECTION_KEY:s,COLLECTION_ITEM_INJECTION_KEY:p,ElCollection:d,ElCollectionItem:a}},Fo=de({style:{type:Y([String,Array,Object])},currentTabId:{type:Y(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:Y(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:Ro,ElCollectionItem:Do,COLLECTION_INJECTION_KEY:he,COLLECTION_ITEM_INJECTION_KEY:Ao}=Me("RovingFocusGroup"),Ie=Symbol("elRovingFocusGroup"),Be=Symbol("elRovingFocusGroupItem"),Po={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},Lo=(e,o)=>{if(o!=="rtl")return e;switch(e){case C.right:return C.left;case C.left:return C.right;default:return e}},Mo=(e,o,u)=>{const s=Lo(e.key,u);if(!(o==="vertical"&&[C.left,C.right].includes(s))&&!(o==="horizontal"&&[C.up,C.down].includes(s)))return Po[s]},Bo=(e,o)=>e.map((u,s)=>e[(s+o)%e.length]),Ee=e=>{const{activeElement:o}=document;for(const u of e)if(u===o||(u.focus(),o!==document.activeElement))return},Te="currentTabIdChange",Oe="rovingFocusGroup.entryFocus",Ko={bubbles:!1,cancelable:!0},Uo=V({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:Fo,emits:[Te,"entryFocus"],setup(e,{emit:o}){var u;const s=k((u=e.currentTabId||e.defaultCurrentTabId)!=null?u:null),p=k(!1),d=k(!1),a=k(null),{getItems:r}=D(he,void 0),v=M(()=>[{outline:"none"},e.style]),b=c=>{o(Te,c)},I=()=>{p.value=!0},_=B(c=>{var h;(h=e.onMousedown)==null||h.call(e,c)},()=>{d.value=!0}),E=B(c=>{var h;(h=e.onFocus)==null||h.call(e,c)},c=>{const h=!F(d),{target:l,currentTarget:A}=c;if(l===A&&h&&!F(p)){const S=new Event(Oe,Ko);if(A==null||A.dispatchEvent(S),!S.defaultPrevented){const y=r().filter(P=>P.focusable),L=y.find(P=>P.active),T=y.find(P=>P.id===F(s)),G=[L,T,...y].filter(Boolean).map(P=>P.ref);Ee(G)}}d.value=!1}),t=B(c=>{var h;(h=e.onBlur)==null||h.call(e,c)},()=>{p.value=!1}),f=(...c)=>{o("entryFocus",...c)};se(Ie,{currentTabbedId:no(s),loop:te(e,"loop"),tabIndex:M(()=>F(p)?-1:0),rovingFocusGroupRef:a,rovingFocusGroupRootStyle:v,orientation:te(e,"orientation"),dir:te(e,"dir"),onItemFocus:b,onItemShiftTab:I,onBlur:t,onFocus:E,onMousedown:_}),Q(()=>e.currentTabId,c=>{s.value=c??null}),eo(a,Oe,f)}});function Go(e,o,u,s,p,d){return K(e.$slots,"default")}var Jo=H(Uo,[["render",Go],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group-impl.vue"]]);const zo=V({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:Ro,ElRovingFocusGroupImpl:Jo}});function Yo(e,o,u,s,p,d){const a=O("el-roving-focus-group-impl"),r=O("el-focus-group-collection");return N(),le(r,null,{default:g(()=>[$(a,to(so(e.$attrs)),{default:g(()=>[K(e.$slots,"default")]),_:3},16)]),_:3})}var Wo=H(zo,[["render",Yo],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group.vue"]]);const Ho=V({components:{ElRovingFocusCollectionItem:Do},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:o}){const{currentTabbedId:u,loop:s,onItemFocus:p,onItemShiftTab:d}=D(Ie,void 0),{getItems:a}=D(he,void 0),r=Pe(),v=k(null),b=B(t=>{o("mousedown",t)},t=>{e.focusable?p(F(r)):t.preventDefault()}),I=B(t=>{o("focus",t)},()=>{p(F(r))}),_=B(t=>{o("keydown",t)},t=>{const{key:f,shiftKey:c,target:h,currentTarget:l}=t;if(f===C.tab&&c){d();return}if(h!==l)return;const A=Mo(t);if(A){t.preventDefault();let y=a().filter(L=>L.focusable).map(L=>L.ref);switch(A){case"last":{y.reverse();break}case"prev":case"next":{A==="prev"&&y.reverse();const L=y.indexOf(l);y=s.value?Bo(y,L+1):y.slice(L+1);break}}lo(()=>{Ee(y)})}}),E=M(()=>u.value===F(r));return se(Be,{rovingFocusGroupItemRef:v,tabIndex:M(()=>F(E)?0:-1),handleMousedown:b,handleFocus:I,handleKeydown:_}),{id:r,handleKeydown:_,handleFocus:I,handleMousedown:b}}});function Vo(e,o,u,s,p,d){const a=O("el-roving-focus-collection-item");return N(),le(a,{id:e.id,focusable:e.focusable,active:e.active},{default:g(()=>[K(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var jo=H(Ho,[["render",Vo],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-item.vue"]]);const qo=de({trigger:Ze.trigger,effect:{...Ce.effect,default:"light"},type:{type:Y(String)},placement:{type:Y(String),default:"bottom"},popperOptions:{type:Y(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:Y([Number,String]),default:0},maxHeight:{type:Y([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:Y(Object)},teleported:Ce.teleported}),Ke=de({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:Ye}}),Zo=de({onKeydown:{type:Y(Function)}}),Qo=[C.down,C.pageDown,C.home],Ue=[C.up,C.pageUp,C.end],Xo=[...Qo,...Ue],{ElCollection:xo,ElCollectionItem:en,COLLECTION_INJECTION_KEY:on,COLLECTION_ITEM_INJECTION_KEY:nn}=Me("Dropdown"),pe=Symbol("elDropdown"),{ButtonGroup:tn}=ge,sn=V({name:"ElDropdown",components:{ElButton:ge,ElButtonGroup:tn,ElScrollbar:xe,ElDropdownCollection:xo,ElTooltip:Qe,ElRovingFocusGroup:Wo,ElOnlyChild:Xe,ElIcon:Ne,ArrowDown:We},props:qo,emits:["visible-change","click","command"],setup(e,{emit:o}){const u=be(),s=we("dropdown"),{t:p}=He(),d=k(),a=k(),r=k(null),v=k(null),b=k(null),I=k(null),_=k(!1),E=[C.enter,C.space,C.down],t=M(()=>({maxHeight:Ve(e.maxHeight)})),f=M(()=>[s.m(y.value)]),c=Pe().value,h=M(()=>e.id||c);Q([d,te(e,"trigger")],([i,n],[m])=>{var J,Z,re;const ve=ao(n)?n:[n];(J=m==null?void 0:m.$el)!=null&&J.removeEventListener&&m.$el.removeEventListener("pointerenter",T),(Z=i==null?void 0:i.$el)!=null&&Z.removeEventListener&&i.$el.removeEventListener("pointerenter",T),(re=i==null?void 0:i.$el)!=null&&re.addEventListener&&ve.includes("hover")&&i.$el.addEventListener("pointerenter",T)},{immediate:!0}),Ae(()=>{var i,n;(n=(i=d.value)==null?void 0:i.$el)!=null&&n.removeEventListener&&d.value.$el.removeEventListener("pointerenter",T)});function l(){A()}function A(){var i;(i=r.value)==null||i.onClose()}function S(){var i;(i=r.value)==null||i.onOpen()}const y=je();function L(...i){o("command",...i)}function T(){var i,n;(n=(i=d.value)==null?void 0:i.$el)==null||n.focus()}function U(){}function G(){const i=F(v);i==null||i.focus(),I.value=null}function P(i){I.value=i}function X(i){_.value||(i.preventDefault(),i.stopImmediatePropagation())}function x(){o("visible-change",!0)}function q(i){(i==null?void 0:i.type)==="keydown"&&v.value.focus()}function fe(){o("visible-change",!1)}return se(pe,{contentRef:v,role:M(()=>e.role),triggerId:h,isUsingKeyboard:_,onItemEnter:U,onItemLeave:G}),se("elDropdown",{instance:u,dropdownSize:y,handleClick:l,commandHandler:L,trigger:te(e,"trigger"),hideOnClick:te(e,"hideOnClick")}),{t:p,ns:s,scrollbar:b,wrapStyle:t,dropdownTriggerKls:f,dropdownSize:y,triggerId:h,triggerKeys:E,currentTabId:I,handleCurrentTabIdChange:P,handlerMainButtonClick:i=>{o("click",i)},handleEntryFocus:X,handleClose:A,handleOpen:S,handleBeforeShowTooltip:x,handleShowTooltip:q,handleBeforeHideTooltip:fe,onFocusAfterTrapped:i=>{var n,m;i.preventDefault(),(m=(n=v.value)==null?void 0:n.focus)==null||m.call(n,{preventScroll:!0})},popperRef:r,contentRef:v,triggeringElementRef:d,referenceElementRef:a}}});function ln(e,o,u,s,p,d){var a;const r=O("el-dropdown-collection"),v=O("el-roving-focus-group"),b=O("el-scrollbar"),I=O("el-only-child"),_=O("el-tooltip"),E=O("el-button"),t=O("arrow-down"),f=O("el-icon"),c=O("el-button-group");return N(),W("div",{class:j([e.ns.b(),e.ns.is("disabled",e.disabled)])},[$(_,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":(a=e.referenceElementRef)==null?void 0:a.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"",persistent:"",onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},ro({content:g(()=>[$(b,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:g(()=>[$(v,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:g(()=>[$(r,null,{default:g(()=>[K(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:g(()=>[$(I,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:g(()=>[K(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(N(),le(c,{key:0},{default:g(()=>[$(E,ae({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:g(()=>[K(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),$(E,ae({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:g(()=>[$(f,{class:j(e.ns.e("icon"))},{default:g(()=>[$(t)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):ce("v-if",!0)],2)}var rn=H(sn,[["render",ln],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown.vue"]]);const an=V({name:"DropdownItemImpl",components:{ElIcon:Ne},props:Ke,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:o}){const u=we("dropdown"),{role:s}=D(pe,void 0),{collectionItemRef:p}=D(nn,void 0),{collectionItemRef:d}=D(Ao,void 0),{rovingFocusGroupItemRef:a,tabIndex:r,handleFocus:v,handleKeydown:b,handleMousedown:I}=D(Be,void 0),_=Re(p,d,a),E=M(()=>s.value==="menu"?"menuitem":s.value==="navigation"?"link":"button"),t=B(f=>{const{code:c}=f;if(c===C.enter||c===C.space)return f.preventDefault(),f.stopImmediatePropagation(),o("clickimpl",f),!0},b);return{ns:u,itemRef:_,dataset:{[Le]:""},role:E,tabIndex:r,handleFocus:v,handleKeydown:t,handleMousedown:I}}}),un=["aria-disabled","tabindex","role"];function cn(e,o,u,s,p,d){const a=O("el-icon");return N(),W(ue,null,[e.divided?(N(),W("li",ae({key:0,role:"separator",class:e.ns.bem("menu","item","divided")},e.$attrs),null,16)):ce("v-if",!0),R("li",ae({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:o[0]||(o[0]=r=>e.$emit("clickimpl",r)),onFocus:o[1]||(o[1]=(...r)=>e.handleFocus&&e.handleFocus(...r)),onKeydown:o[2]||(o[2]=_e((...r)=>e.handleKeydown&&e.handleKeydown(...r),["self"])),onMousedown:o[3]||(o[3]=(...r)=>e.handleMousedown&&e.handleMousedown(...r)),onPointermove:o[4]||(o[4]=r=>e.$emit("pointermove",r)),onPointerleave:o[5]||(o[5]=r=>e.$emit("pointerleave",r))}),[e.icon?(N(),le(a,{key:0},{default:g(()=>[(N(),le(io(e.icon)))]),_:1})):ce("v-if",!0),K(e.$slots,"default")],16,un)],64)}var dn=H(an,[["render",cn],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item-impl.vue"]]);const Ge=()=>{const e=D("elDropdown",{}),o=M(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:o}},pn=V({name:"ElDropdownItem",components:{ElDropdownCollectionItem:en,ElRovingFocusItem:jo,ElDropdownItemImpl:dn},inheritAttrs:!1,props:Ke,emits:["pointermove","pointerleave","click"],setup(e,{emit:o,attrs:u}){const{elDropdown:s}=Ge(),p=be(),d=k(null),a=M(()=>{var t,f;return(f=(t=F(d))==null?void 0:t.textContent)!=null?f:""}),{onItemEnter:r,onItemLeave:v}=D(pe,void 0),b=B(t=>(o("pointermove",t),t.defaultPrevented),$e(t=>{if(e.disabled){v(t);return}const f=t.currentTarget;f===document.activeElement||f.contains(document.activeElement)||(r(t),t.defaultPrevented||f==null||f.focus())})),I=B(t=>(o("pointerleave",t),t.defaultPrevented),$e(t=>{v(t)})),_=B(t=>{if(!e.disabled)return o("click",t),t.type!=="keydown"&&t.defaultPrevented},t=>{var f,c,h;if(e.disabled){t.stopImmediatePropagation();return}(f=s==null?void 0:s.hideOnClick)!=null&&f.value&&((c=s.handleClick)==null||c.call(s)),(h=s.commandHandler)==null||h.call(s,e.command,p,t)}),E=M(()=>({...e,...u}));return{handleClick:_,handlePointerMove:b,handlePointerLeave:I,textContent:a,propsAndAttrs:E}}});function fn(e,o,u,s,p,d){var a;const r=O("el-dropdown-item-impl"),v=O("el-roving-focus-item"),b=O("el-dropdown-collection-item");return N(),le(b,{disabled:e.disabled,"text-value":(a=e.textValue)!=null?a:e.textContent},{default:g(()=>[$(v,{focusable:!e.disabled},{default:g(()=>[$(r,ae(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:g(()=>[K(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var Je=H(pn,[["render",fn],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item.vue"]]);const mn=V({name:"ElDropdownMenu",props:Zo,setup(e){const o=we("dropdown"),{_elDropdownSize:u}=Ge(),s=u.value,{focusTrapRef:p,onKeydown:d}=D(oo,void 0),{contentRef:a,role:r,triggerId:v}=D(pe,void 0),{collectionRef:b,getItems:I}=D(on,void 0),{rovingFocusGroupRef:_,rovingFocusGroupRootStyle:E,tabIndex:t,onBlur:f,onFocus:c,onMousedown:h}=D(Ie,void 0),{collectionRef:l}=D(he,void 0),A=M(()=>[o.b("menu"),o.bm("menu",s==null?void 0:s.value)]),S=Re(a,b,p,_,l),y=B(T=>{var U;(U=e.onKeydown)==null||U.call(e,T)},T=>{const{currentTarget:U,code:G,target:P}=T;if(U.contains(P),C.tab===G&&T.stopImmediatePropagation(),T.preventDefault(),P!==F(a)||!Xo.includes(G))return;const x=I().filter(q=>!q.disabled).map(q=>q.ref);Ue.includes(G)&&x.reverse(),Ee(x)});return{size:s,rovingFocusGroupRootStyle:E,tabIndex:t,dropdownKls:A,role:r,triggerId:v,dropdownListWrapperRef:S,handleKeydown:T=>{y(T),d(T)},onBlur:f,onFocus:c,onMousedown:h}}}),vn=["role","aria-labelledby"];function _n(e,o,u,s,p,d){return N(),W("ul",{ref:e.dropdownListWrapperRef,class:j(e.dropdownKls),style:uo(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:o[0]||(o[0]=(...a)=>e.onBlur&&e.onBlur(...a)),onFocus:o[1]||(o[1]=(...a)=>e.onFocus&&e.onFocus(...a)),onKeydown:o[2]||(o[2]=_e((...a)=>e.handleKeydown&&e.handleKeydown(...a),["self"])),onMousedown:o[3]||(o[3]=_e((...a)=>e.onMousedown&&e.onMousedown(...a),["self"]))},[K(e.$slots,"default")],46,vn)}var ze=H(mn,[["render",_n],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-menu.vue"]]);const gn=qe(rn,{DropdownItem:Je,DropdownMenu:ze}),wn=Fe(Je),bn=Fe(ze);const ie=e=>(Eo("data-v-201a4344"),e=e(),ko(),e),hn={class:"main"},In={class:"users"},En={key:0,class:"main__top"},kn=["onClick"],yn=ie(()=>R("div",{class:"current__user-selector"},null,-1)),Cn=["src"],$n=ie(()=>R("i",{class:"el-icon-caret-bottom"},null,-1)),Sn=ie(()=>R("span",null,"Logout",-1)),Tn=ie(()=>R("div",{class:"current__workspace-selector"},null,-1)),On=["src","title","onClick"],Nn={class:"main__bottom"},Fn=ie(()=>R("div",{class:"main__user-actions--add_button"},[R("span",null,"+")],-1)),Rn={__name:"Sidebar",setup(e){const o=co(),u=po(),s=fo(),p=mo(),{profileSuccessData:d,profileFailureData:a,editProfileData:r,editFailureData:v,workspacesSuccessData:b}=vo(o),{$myFetch:I}=_o(),_=Io();k(ne);const E=k(!1),t=be(),f=k(null),c=go(),h=k(!1),l=k(!1),A=wo(),S=k(w.get("currentAccountID")?+w.get("currentAccountID"):0),y=k(!1),L=n=>{f.value=n,n!=null&&n.user.avatar?l.value[S.value].avatarUrl=`${_.public.env.serverUrl}${n.avatarPath}/${n.user.avatar}`:l.value[S.value].avatarUrl=`${ne}`,localStorage.setItem("accounts",JSON.stringify(l.value))},T=n=>{l.value=JSON.parse(localStorage.getItem("accounts")),l.value[S.value].workspaces=n==null?void 0:n.myWorkspaces,localStorage.setItem("accounts",JSON.stringify(l.value))};Q(b,n=>T(n)),Q(d,n=>{n!=null&&n.user.avatar?l.value[S.value].avatarUrl=`${_.public.env.serverUrl}${n.avatarPath}/${n.user.avatar}`:l.value[S.value].avatarUrl=`${ne}`,localStorage.setItem("accounts",JSON.stringify(l.value))}),Q(v,n=>{(n==null?void 0:n.error)==="You don't have permission to access this resource"&&(w.remove("login_pin_token"),w.remove("settings_pin_token"),n=null,c.go())}),Q(a,n=>{(n==null?void 0:n.error)==="You don't have permission to access this resource"&&(w.remove("login_pin_token"),w.remove("settings_pin_token"),n=null,c.go())}),Q(r,n=>{n!=null&&n.user.avatar?l.value[S.value].avatarUrl=`${n.avatarPath}/${n.user.avatar}`:l.value[S.value].avatarUrl=`${ne}`,localStorage.setItem("accounts",JSON.stringify(l.value))}),De(async()=>{l.value=JSON.parse(localStorage.getItem("accounts")),w.get("login_pin_token")&&(d.value?L(d.value):o.getProfile(),b.value?T(b.value):await o.getWorkSpaces()),window.addEventListener("resize",P)});const U=()=>{h.value="hovered"},G=()=>{h.value=!1},P=()=>{window.innerWidth<800&&(E.value=!1),t.update()},X=async n=>{if(y.value=-1,S.value=n,w.set("currentAccountID",n),l.value[n].token===w.get("token")){oe("/");return}if(o.$reset(),u.$reset(),s.$reset(),p.$reset(),(Date.parse(l.value[n].token_expires)-Date.now())/864e5<0){l.value.splice(n,1),localStorage.setItem("accounts",JSON.stringify(l.value)),l.value[0]?X(0):(Object.keys(w.get()).forEach(function(m){w.remove(m,neededAttributes)}),c.go());return}w.set("token",l.value[n].token,{expires:(Date.parse(l.value[n].token_expires)-Date.now())/864e5}),w.set("first_login",l.value[n].first_login),l.value[n].settings_pin_token&&w.set("settings_pin_token",l.value[n].settings_pin_token),l.value[n].login_pin_token&&w.set("login_pin_token",l.value[n].login_pin_token,{expires:(Date.parse(l.value[n].login_pin_token_expires)-new Date)/864e5}),localStorage.setItem("accounts",JSON.stringify(l.value)),l.value[n].first_login===!0?oe("/pin"):A.path==="/pin"&&oe("/"),o.getProfile(),await o.getWorkSpaces(),oe("/")},x=n=>{S.value=-1,y.value=n,q(n)},q=n=>{oe(`/workspace/staff/${n}`)},fe=()=>{w.set("currentAccountID",l.value.length),w.set("addAccount",!0),window.open("/login","_blank")},ke=async n=>{l.value.forEach((J,Z)=>J.ID=Z);const m=l.value.filter(J=>J.ID!==n);X(n),await I("logout",{method:"post"}),o.$reset(),u.$reset(),s.$reset(),p.$reset(),m[0]?Date.parse(m[0].token_expires)-Date.now()>0?(w.set("token",m[0].token,{expires:(Date.parse(m[0].token_expires)-Date.now())/864e5}),m[0].first_login===!0&&w.set("first_login",m[0].first_login),m[0].settings_pin_token&&w.set("settings_pin_token",m[0].settings_pin_token),m[0].login_pin_token&&w.set("login_pin_token",m[0].login_pin_token,{expires:(Date.parse(m[0].login_pin_token_expires)-new Date)/864e5}),w.set("currentAccountID",0),o.getProfile(),await o.getWorkSpaces(),l.value=m,localStorage.setItem("accounts",JSON.stringify(m)),c.go()):m.shift():(w.remove("token"),w.remove("first_login"),w.remove("settings_pin_token"),w.remove("login_pin_token"),localStorage.setItem("accounts",JSON.stringify(m)),l.value=m,oe("/login"))},me=(n,m)=>{switch(n){case"u":return m===S.value?"currentUser":!1;default:return m===+y.value?"currentWorkspace":!1}},i=()=>{window.innerWidth>800?E.value=!E.value:E.value=!1};return(n,m)=>{const J=wn,Z=bn,re=gn,ve=ge;return N(),W("nav",hn,[R("div",In,[l.value?(N(),W("div",En,[(N(!0),W(ue,null,Se(l.value,z=>{var ye;return N(),W(ue,{key:z.ID},[$(re,{class:j(["main__user-actions",{currentUser:me("u",z.ID),bordered:(ye=z.workspaces)==null?void 0:ye.length}])},{dropdown:g(()=>[$(Z,null,{default:g(()=>[$(J,{class:"main__user-actions--add_element",onClick:ee=>ke(z.ID)},{default:g(()=>[Sn]),_:2},1032,["onClick"])]),_:2},1024)]),default:g(()=>[R("div",{class:"main__user-actions--user",onClick:ee=>X(z.ID)},[yn,R("img",{src:z.avatarUrl?z.avatarUrl:F(ne),alt:"Avatar",class:"main__user-actions--avatar"},null,8,Cn),$n],8,kn)]),_:2},1032,["class"]),(N(!0),W(ue,null,Se(z.workspaces,ee=>(N(),W("div",{key:ee.id,class:j(["main__user-workspaces",me("w",ee.id)])},[Tn,R("img",{src:z.avatarUrl?z.avatarUrl:F(ne),alt:"Avatar",class:"main__user-workspaces--avatar",title:ee.name,onClick:Dn=>x(ee.id)},null,8,On)],2))),128))],64)}),128))])):ce("",!0),R("div",Nn,[$(re,{class:"main__user-actions-add"},{dropdown:g(()=>[$(Z,{class:"main__user-actions--add_actions"},{default:g(()=>[$(J,{class:"main__user-actions--add_element"},{default:g(()=>[R("span",{class:j(h.value),onClick:fe,onMouseover:U,onMouseout:G}," Add account ",34)]),_:1}),$(J,{class:"main__user-actions--add_element"},{default:g(()=>[R("span",{class:j(h.value),onMouseover:U,onMouseout:G}," Add workspace ",34)]),_:1})]),_:1})]),default:g(()=>[Fn]),_:1})])]),R("div",{class:j(["chats",E.value?"large":"small"])},[$(ve,{class:"chats-button",onClick:i},{default:g(()=>[bo(ho(E.value?"<":">"),1)]),_:1})],2)])}}},Jn=yo(Rn,[["__scopeId","data-v-201a4344"]]);export{Jn as default};
