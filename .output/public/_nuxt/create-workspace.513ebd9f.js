import{E as J,_ as W,a as X,b as G}from"./el-overlay.6ca4e62b.js";import{E as K,a as Q}from"./el-select.3ca3abfd.js";import{E as Y}from"./el-button.e243c5d4.js";import"./el-form-item.4ed993c7.js";import"./el-scrollbar.be1d11a1.js";import"./el-popper.5c753708.js";import{a as Z,s as ee,b as oe,r as d,w as y,e as se,f as V,h as m,i as u,j as n,u as o,k as te,c as h,l as c,m as ae,o as l,p as a,t as E,F as re,q as le,v as ne,x as ie,y as ue}from"./entry.a509592d.js";import{_ as me}from"./chevron-left.0770b46e.js";import{_ as ce}from"./chevron-icon.91af5d67.js";import{_ as _e}from"./AccessCheckModal.34efd2e4.js";import{E as de}from"./ErrorMassageModal.1c89c491.js";import pe from"./settingsToken.3af67707.js";import ve from"./loginToken.a0684f54.js";import fe from"./auth.8c39c358.js";import{_ as ge}from"./_plugin-vue_export-helper.c27b6911.js";import"./focus-trap.14e866f0.js";import"./isEqual.763bc349.js";import"./debounce.39261df9.js";import"./email-primary-icon.86041680.js";import"./eye-close-icon.545039e0.js";const p=v=>(ie("data-v-ba844c84"),v=v(),ue(),v),be={class:"main"},ke={class:"main__form--title"},we={class:"main__title"},Se=p(()=>a("div",{class:"main__subtitle"},"Please fill the form to create workspace.",-1)),ye={key:0,class:"el-form-item__global-error-container"},he={class:"el-form-item__global-error"},Ee=p(()=>a("img",{src:W,alt:""},null,-1)),Ie=p(()=>a("span",{for:"name",class:"custom_placeholder"}," Workspace Name ",-1)),$e=[Ie],xe={key:0,class:"el-form-item__error"},Ve=["innerHTML"],We=p(()=>a("div",null,null,-1)),Ce={class:"main__form--actions"},Fe={class:"submit-button__text"},Le=p(()=>a("img",{src:ce,alt:"arrow"},null,-1)),Me={__name:"create-workspace",setup(v){const k=Z(),{isLoadingIndustries:C,industriesList:F,industriesError:L,isLoadingSubmit:I,createWorkspaceSuccess:M,createWorkspaceError:B}=ee(k),f=ae(),T=oe(),i=d({name:null,industry_id:null}),A=d({name:{required:!0,message:"Please input workspace name",trigger:"blur"}}),t=d({name:{value:"",isShow:!1},global:{value:""}}),_=d(!1),$=d(!1);y(M,s=>{s&&ne("/profile")}),y(B,s=>{s&&(t.value.global.value=s)}),y(L,s=>{s&&(t.value.global.value=s)}),se(async()=>{fe(),$.value=JSON.parse(localStorage.getItem("accounts"))[V.get("currentAccountID")].email,console.log(V.get("currentAccountID")),_.value=ve(),_.value=pe(),window.addEventListener("resize",N),await k.getIndustries()});const D=()=>{f.refs.createForm.validate(s=>{if(s)k.createWorkspace(i.value);else return t.value.global.value="Please fill empty areas",!1})},P=s=>{f.refs[s].focus()},q=s=>{f.refs.createForm.validateField(s,(e,b)=>{e?t.value[s].value="":t.value[s].value=b[s][0].message})},w=(s,e)=>{g()?t.value[s].isShow=e==="mouseover":e==="click"&&(t.value[s].isShow=!0)},N=()=>{f.update()},g=()=>window.innerWidth>990,O=()=>{t.value.global.value=""};return(s,e)=>{const b=X,S=G,R=K,z=Q,H=Y,U=J;return l(),m("div",be,[u(U,{ref:"createForm",class:"main__form","hide-required-asterisk":"",rules:o(A),model:o(i),onSubmit:te(D,["prevent"])},{default:n(()=>[a("div",ke,[a("img",{src:me,alt:"chevron-left",onClick:e[0]||(e[0]=r=>o(T).go(-1))}),a("div",we,"Create workspace as "+E(o($)),1)]),Se,o(t).global.value?(l(),m("div",ye,[a("div",he,[Ee,a("span",null,E(o(t).global.value),1)]),a("span",{class:"clear-error",onClick:O},"X")])):c("",!0),u(S,{prop:"name"},{error:n(()=>[o(t).name.isShow&&g()?(l(),m("div",xe,[a("span",{innerHTML:o(t).name.value},null,8,Ve)])):c("",!0),We]),default:n(()=>[u(b,{modelValue:o(i).name,"onUpdate:modelValue":e[5]||(e[5]=r=>o(i).name=r),class:"main__form--input",placeholder:"Workspace name",onBlur:e[6]||(e[6]=r=>q("name"))},{suffix:n(()=>[o(i).name?(l(),m("div",{key:0,style:{position:"relative"},onClick:e[1]||(e[1]=r=>P("name"))},$e)):c("",!0),o(t).name.value?(l(),m("img",{key:1,src:W,alt:"",class:"error_icon",onMouseover:e[2]||(e[2]=r=>w("name","mouseover")),onMouseout:e[3]||(e[3]=r=>w("name","mouseout")),onClick:e[4]||(e[4]=r=>w("name","click"))},null,32)):c("",!0)]),_:1},8,["modelValue"])]),_:1}),u(S,{prop:"industry_id"},{default:n(()=>[u(z,{modelValue:o(i).industry_id,"onUpdate:modelValue":e[7]||(e[7]=r=>o(i).industry_id=r),loading:o(C),class:"main__form--input",placeholder:"Select Industry"},{default:n(()=>{var r;return[(l(!0),m(re,null,le((r=o(F))==null?void 0:r.industries,(x,j)=>(l(),h(R,{key:`option_${j}`,value:x.id,label:x.name},null,8,["value","label"]))),128))]}),_:1},8,["modelValue","loading"])]),_:1}),u(S,{class:"main__form--footer"},{default:n(()=>[a("div",Ce,[u(H,{"native-type":"submit",loading:o(I),class:"submit-button"},{default:n(()=>[a("span",null,[a("span",Fe,E(o(I)?"":"Next"),1),Le])]),_:1},8,["loading"])])]),_:1}),o(t).name.isShow&&!g()?(l(),h(de,{key:1,"dialog-visible":o(t).name.isShow&&!g(),"error-text":o(t).name.value,onVisible:e[8]||(e[8]=r=>o(t).name.isShow=!1)},null,8,["dialog-visible","error-text"])):c("",!0)]),_:1},8,["rules","model","onSubmit"]),o(_)?(l(),h(_e,{key:0,"dialog-visible":o(_),onClose:e[9]||(e[9]=r=>_.value=!1)},null,8,["dialog-visible"])):c("",!0)])}}},eo=ge(Me,[["__scopeId","data-v-ba844c84"]]);export{eo as default};
