import{E as O}from"./focus-trap.04464a06.js";import{_ as b,E as X,a as J}from"./error.3564d58a.js";import{A as K,s as Q,b as N,e as ee,r as w,h as se,B as oe,x as re,w as U,o as n,i as u,l as i,j as g,k as m,u as s,t as z,m as d,C as y,F as te,v as ie,c as h,y as ae,z as ne,q as le}from"./entry.dabfc507.js";import{_ as ue}from"./email-icon.ad68752d.js";import{C as de,_ as me}from"./user-icon.168da3a9.js";import{_ as H,a as pe}from"./good.9906b833.js";import{_ as A}from"./lock-icon.3790485a.js";import{L as _e}from"./LoginButtons.a98def6d.js";import{E as P}from"./ErrorMassageModal.8c97b422.js";import{h as B,s as F}from"./eye-close-icon.eaa88d21.js";import{_ as fe}from"./_plugin-vue_export-helper.c27b6911.js";import"./index.9ce43428.js";import"./email-primary-icon.1455806e.js";import"./chevron-icon.ef3f9a72.js";const _=S=>(ae("data-v-2083b14e"),S=S(),ne(),S),ge={class:"main"},ve={class:"main__form"},we=_(()=>i("div",{class:"main__form--title"},"Register",-1)),ce=_(()=>i("div",{class:"main__form--subtitle"},"Please fill the forms to register",-1)),ye={key:0,class:"el-form-item__global-error-container"},he={class:"el-form-item__global-error"},be=_(()=>i("img",{src:b,alt:""},null,-1)),Se=_(()=>i("img",{src:ue,alt:"email_icon"},null,-1)),xe=_(()=>i("span",{for:"email",class:"placeholder placeholder__email"}," Email ",-1)),ke=[xe],$e={key:0,class:"el-form-item__error"},Me=_(()=>i("div",null,null,-1)),Ce=_(()=>i("img",{src:me,alt:"user_icon"},null,-1)),Ve={key:0,src:H,alt:""},Ee={key:1,src:b,alt:""},Te={key:2,class:"el-form-item__error strength warning"},Pe=["innerHTML"],Le=_(()=>i("div",null,null,-1)),qe={key:0,class:"el-form-item__error"},Ie=["innerHTML"],Ue=_(()=>i("div",null,null,-1)),ze=_(()=>i("img",{src:A,alt:"password_icon"},null,-1)),Be=_(()=>i("span",{for:"password",class:"placeholder placeholder__password"}," Password ",-1)),Fe=[Be],He=["src"],Ae={key:0,src:H,alt:""},Re={key:1,src:pe,alt:""},We={key:2,src:b,alt:""},Ze=["innerHTML"],De=["innerHTML"],Ye=_(()=>i("img",{src:A,alt:"password_icon"},null,-1)),je=_(()=>i("span",{for:"password_confirmation",class:"placeholder placeholder__passwordConfirmation"}," Confirm Password ",-1)),Ge=[je],Oe=["src"],Xe={key:0,class:"el-form-item__error"},Je=["innerHTML"],Ke=_(()=>i("div",null,null,-1)),Qe=_(()=>i("div",{class:"terms"},[i("span",null,[le("By signing up you agree on our "),i("u",null,"Term and Conditions")])],-1)),Ne={__name:"register",setup(S){const L=K(),{registerFailureData:R,registerSuccessData:W}=Q(L),x=N(),q=ee(),k=w(!1),$=w(!1),c=w(!1),l=w({email:null,username:null,password:null,password_confirmation:null}),o=w({email:{value:"",isShow:!1},username:{value:"",status:null,isShow:!1},password:{value:"",status:null,isShow:!1},password_confirmation:{value:"",isShow:!1},global:{value:null}}),Z=w({email:[{required:!0,message:"This field is required.",trigger:"blur"},{type:"email",message:"Email is not valid.",trigger:"blur"}],username:[{required:!0,message:"This field is required.",trigger:"blur"},{min:3,message:`Username is improperly formatted.<br />
                      <span class="error_info">Your username must be at least 3 characters long.</span>
                      `,trigger:"blur"},{validator:(r,e,a)=>{/^[A-Za-z0-9_.]*$/g.test(e)?a():a(new Error(`<span>Username is improperly formatted.<br></span>
            <ul class="error_info">
              <li>Your handle can't exceed 30 characters. </li>
              <li>It can only contain letters, numbers, underscores and dots. </li>
              <li>It can't contain symbols or punctuation marks. </li>
              <li>It needs to be unique.</li>
            </ul>`))},trigger:"blur"},{validator:(r,e,a)=>{(e==null?void 0:e.length)===30?(o.value.username.value="Your handle can't exceed 30 characters.",o.value.username.status="Medium",a()):(e==null?void 0:e.length)>0&&(e==null?void 0:e.length)<30?(o.value.username.value="",o.value.username.status=null,a()):(o.value.username.value="This field is required",o.value.username.status=null,a(new Error("This field is required")))},trigger:"change"}],password:[{validator:(r,e,a)=>{e||a(new Error("This field is required"));const f=G(e);f==="Weak"?(a(new Error("Password strength: <b>Weak</b>")),o.value.password.status="Weak"):f==="Medium"?(a(),o.value.password.status="Medium",o.value.password.value="Password strength: <b>Medium</b>"):f==="Strong"&&(a(),o.value.password.status="Strong",o.value.password.value="Password strength: <b>Strong</b>")},trigger:"input"}],password_confirmation:[{required:!0,message:"This field is required.",trigger:"blur"},{validator:(r,e,a)=>{e===""?a(new Error("Please input the password again")):e!==l.value.password?a(new Error("Password and confirm password do not match")):a()},trigger:"blur"}]});se(()=>{q.query.email&&(l.email=q.query.email),oe.get("token")&&re("/"),window.addEventListener("resize",Y)});const D=()=>{x.refs.registerForm.validate(r=>{if(r)L.registerUser(l.value);else return o.value.global.value="Please fill empty areas",!1})},M=r=>{x.refs[r].focus()},v=r=>{x.refs.registerForm.validateField(r,(e,a)=>{(o.value[r].status!=="Medium"&&r==="username"||r!=="username")&&(e?r!=="password"&&(o.value[r].value=""):o.value[r].value=a[r][0].message)})},C=r=>{o.value[r].isShow=!0},V=r=>{p()&&(o.value[r].isShow=!0)},E=r=>{p()&&(o.value[r].isShow=!1)},Y=()=>{x.update()},p=()=>window.innerWidth>990,j=()=>{o.value.global.value=""},G=r=>{const e=/^(?=.*[a-zA-Z])(?=.*[\d!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?])[a-zA-Z\d!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]{8,}$/,a=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\d!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?])[a-zA-Z\d!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]{12,}$/,f=/^(?:(.)(?!\1{3}))*$/,T=["password","admin","qwerty","asdfgh","xzcvb"];if(f.test(r)&&((r==null?void 0:r.length)>15||!T.some(t=>r.toLowerCase().includes(t)))){if(a.test(r)&&((r==null?void 0:r.length)>25||!T.some(t=>r.toLowerCase().includes(t))))return"Strong";if(e.test(r))return"Medium"}return"Weak"},I=()=>o.value.password.status==="Medium"?"warning":o.value.password.status==="Strong"?"done":"";return U(W,r=>{c.value=!0}),U(R,r=>{if(r==="Account exists, please login."&&(o.value.global.value=r),r==="Email already exists but is not verified."&&(c=!0),typeof r!="string")for(const e in r)if(typeof r[e]!="string")for(const a in r[e])o.value.global.value=r[e][a];else o.value.global.value=r[e];else o.value.global.value=r}),(r,e)=>{const a=O,f=X,T=J;return n(),u("div",ge,[i("div",ve,[we,ce,g(T,{ref:"registerForm",class:"main__form--box","hide-required-asterisk":"",autocomplate:"new-password",model:s(l),rules:s(Z),onSubmit:ie(D,["prevent"])},{default:m(()=>[s(o).global.value?(n(),u("div",ye,[i("div",he,[be,i("span",null,z(s(o).global.value),1)]),i("span",{class:"clear-error",onClick:j},"X")])):d("",!0),g(f,{prop:"email",class:"form-item"},{error:m(()=>[s(o).email.isShow&&p()?(n(),u("div",$e,[i("span",null,z(s(o).email.value),1)])):d("",!0),Me]),default:m(()=>[g(a,{ref:"email",modelValue:s(l).email,"onUpdate:modelValue":e[4]||(e[4]=t=>s(l).email=t),class:"main__form--box__input",placeholder:"E-mail",onInput:e[5]||(e[5]=t=>v("email")),onBlur:e[6]||(e[6]=t=>v("email"))},{prefix:m(()=>[Se]),suffix:m(()=>[s(l).email?(n(),u("div",{key:0,style:{position:"relative"},onClick:e[0]||(e[0]=t=>M("email"))},ke)):d("",!0),s(o).email.value?(n(),u("img",{key:1,class:"error_icon",src:b,alt:"",onMouseover:e[1]||(e[1]=t=>V("email")),onMouseout:e[2]||(e[2]=t=>E("email")),onClick:e[3]||(e[3]=t=>C("email"))},null,32)):d("",!0)]),_:1},8,["modelValue"])]),_:1}),g(f,{prop:"username",class:"form-item"},{error:m(()=>[s(o).username.isShow&&p()?(n(),u("div",qe,[i("span",{innerHTML:s(o).username.value},null,8,Ie)])):d("",!0),Ue]),default:m(()=>[g(a,{ref:"username",modelValue:s(l).username,"onUpdate:modelValue":e[11]||(e[11]=t=>s(l).username=t),class:"main__form--box__input",placeholder:"Username",maxlength:"30",onInput:e[12]||(e[12]=t=>v("username")),onBlur:e[13]||(e[13]=t=>v("username"))},{prefix:m(()=>[Ce]),suffix:m(()=>[s(l).username?(n(),u("div",{key:0,style:{position:"relative"},onClick:e[7]||(e[7]=t=>M("username"))},[i("span",{for:"username",class:y(["placeholder placeholder__username",s(l).username?"active":""])}," Username ",2)])):d("",!0),s(o).username.value||s(o).username.status?(n(),u("div",{key:1,class:"error_icon",onMouseover:e[8]||(e[8]=t=>V("username")),onMouseout:e[9]||(e[9]=t=>E("username")),onClick:e[10]||(e[10]=t=>C("username"))},[s(o).username.status==="Medium"&&s(l).username?(n(),u("img",Ve)):s(o).username.value?(n(),u("img",Ee)):d("",!0)],32)):d("",!0),s(o).username.status==="Medium"&&s(o).username.isShow&&p()?(n(),u("div",Te,[i("span",{innerHTML:s(o).username.value},null,8,Pe)])):d("",!0),Le]),_:1},8,["modelValue"])]),_:1}),g(f,{prop:"password",class:"form-item"},{error:m(()=>[s(o).password.isShow&&p()?(n(),u("div",{key:0,class:y([I(),"el-form-item__error strength"])},[i("span",{innerHTML:s(o).password.value},null,8,De)],2)):d("",!0)]),default:m(()=>[g(a,{ref:"password",modelValue:s(l).password,"onUpdate:modelValue":e[19]||(e[19]=t=>s(l).password=t),class:"main__form--box__input",placeholder:"Password",type:s(k)?"text":"password",onInput:e[20]||(e[20]=t=>v("password"))},{prefix:m(()=>[ze]),suffix:m(()=>[s(l).password?(n(),u("div",{key:0,style:{position:"relative"},onClick:e[14]||(e[14]=t=>M("password"))},Fe)):d("",!0),i("img",{class:y(s(o).password.value?"eye_icon":""),src:s(k)?s(B):s(F),alt:"eye_icon",onClick:e[15]||(e[15]=t=>k.value=!s(k))},null,10,He),s(o).password.value?(n(),u(te,{key:1},[i("div",{class:"error_icon",onMouseover:e[16]||(e[16]=t=>V("password")),onMouseout:e[17]||(e[17]=t=>E("password")),onClick:e[18]||(e[18]=t=>C("password"))},[s(o).password.status==="Medium"&&s(l).password?(n(),u("img",Ae)):s(o).password.status==="Strong"&&s(l).password?(n(),u("img",Re)):(n(),u("img",We))],32),s(o).password.isShow&&p()?(n(),u("div",{key:0,class:y([I(),"el-form-item__error strength"])},[i("span",{innerHTML:s(o).password.value},null,8,Ze)],2)):d("",!0)],64)):d("",!0)]),_:1},8,["modelValue","type"])]),_:1}),g(f,{prop:"password_confirmation",class:"form-item"},{error:m(()=>[s(o).password_confirmation.isShow&&p()?(n(),u("div",Xe,[i("span",{innerHTML:s(o).password_confirmation.value},null,8,Je)])):d("",!0),Ke]),default:m(()=>[g(a,{ref:"password_confirmation",modelValue:s(l).password_confirmation,"onUpdate:modelValue":e[26]||(e[26]=t=>s(l).password_confirmation=t),class:"main__form--box__input",placeholder:"Confirm password",type:s($)?"text":"password",onBlur:e[27]||(e[27]=t=>v("password_confirmation"))},{prefix:m(()=>[Ye]),suffix:m(()=>[s(l).password_confirmation?(n(),u("div",{key:0,style:{position:"relative"},onClick:e[21]||(e[21]=t=>M("password_confirmation"))},Ge)):d("",!0),i("img",{class:y(s(o).password_confirmation.value?"eye_icon":""),src:s($)?s(B):s(F),alt:"eye_icon",onClick:e[22]||(e[22]=t=>$.value=!s($))},null,10,Oe),s(o).password_confirmation.value?(n(),u("img",{key:1,src:b,alt:"",class:"error_icon",onMouseover:e[23]||(e[23]=t=>V("password_confirmation")),onMouseout:e[24]||(e[24]=t=>E("password_confirmation")),onClick:e[25]||(e[25]=t=>C("password_confirmation"))},null,32)):d("",!0)]),_:1},8,["modelValue","type"])]),_:1}),Qe,g(_e,{"login-title":"Register","login-loading":s(L).registerLoading,"social-title":"Sign up with Google"},null,8,["login-loading"])]),_:1},8,["model","rules","onSubmit"])]),s(c)?(n(),h(de,{key:0,email:s(l).email,dialogVisible:s(c),onClose:e[28]||(e[28]=t=>c.value=!1)},null,8,["email","dialogVisible"])):d("",!0),s(o).email.isShow&&!p()?(n(),h(P,{key:1,dialogVisible:s(o).email.isShow&&!p(),"error-text":s(o).email.value,onVisible:e[29]||(e[29]=t=>s(o).email.isShow=!1)},null,8,["dialogVisible","error-text"])):d("",!0),s(o).username.isShow&&!p()?(n(),h(P,{key:2,dialogVisible:s(o).username.isShow&&!p(),"error-text":s(o).username.value,"text-color":s(o).username.status==="Medium"&&s(l).username?"warning":"weak",onVisible:e[30]||(e[30]=t=>s(o).username.isShow=!1)},null,8,["dialogVisible","error-text","text-color"])):d("",!0),s(o).password.isShow&&!p()?(n(),h(P,{key:3,dialogVisible:s(o).password.isShow&&!p(),"error-text":s(o).password.value,"text-color":s(o).password.status==="Medium"&&s(l).password?"warning":s(o).password.status==="Strong"&&s(l).password?"done":"weak",onVisible:e[31]||(e[31]=t=>s(o).password.isShow=!1)},null,8,["dialogVisible","error-text","text-color"])):d("",!0),s(o).password_confirmation.isShow&&!p()?(n(),h(P,{key:4,dialogVisible:s(o).password_confirmation.isShow&&!p(),"error-text":s(o).password_confirmation.value,onVisible:e[32]||(e[32]=t=>s(o).password_confirmation.isShow=!1)},null,8,["dialogVisible","error-text"])):d("",!0)])}}},cs=fe(Ne,[["__scopeId","data-v-2083b14e"]]);export{cs as default};
