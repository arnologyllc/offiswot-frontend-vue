import{_ as H,b as de,d as Y,J as Ye,E as ge,j as Ne,l as We,a as He,ao as Ve,h as je,w as qe,r as Fe}from"./el-button.efbddc4b.js";import{c as B,b as Ze,u as Ce,E as Qe,O as Xe,w as $e}from"./el-popper.d21866a4.js";import{E as xe}from"./el-scrollbar.d58a7d25.js";import{E as C,e as eo,c as Re,F as oo}from"./focus-trap.2184c8ed.js";import{M as V,S as K,r as k,Q as se,O as R,e as De,u as N,ad as Ae,B as L,bq as no,a5 as te,w as Q,a8 as T,o as O,c as re,i as w,h as $,n as to,g as so,Z as Pe,P as ro,N as we,f as W,aj as lo,T as ae,E as j,k as ue,l as be,L as ao,m as F,R as io,j as _e,F as ce,J as co,z as uo,A as po,D as fo,a as mo,s as vo,bZ as _o,b as go,H as wo,G as v,p as Se,y as bo,t as Io,C as ho,q as oe,v as Eo,x as ko}from"./entry.d5ce8ebf.js";/* empty css                        */import{d as ne}from"./default-user-icon.85f3aaa4.js";import{_ as yo}from"./_plugin-vue_export-helper.c27b6911.js";const Co=V({inheritAttrs:!1});function $o(e,o,u,s,f,p){return K(e.$slots,"default")}var So=H(Co,[["render",$o],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);const To=V({name:"ElCollectionItem",inheritAttrs:!1});function Oo(e,o,u,s,f,p){return K(e.$slots,"default")}var No=H(To,[["render",Oo],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const Le="data-el-collection-item",Me=e=>{const o=`El${e}Collection`,u=`${o}Item`,s=Symbol(o),f=Symbol(u),p={...So,name:o,setup(){const l=k(null),_=new Map;se(s,{itemMap:_,getItems:()=>{const h=N(l);if(!h)return[];const g=Array.from(h.querySelectorAll(`[${Le}]`));return[..._.values()].sort((t,m)=>g.indexOf(t.ref)-g.indexOf(m.ref))},collectionRef:l})}},i={...No,name:u,setup(l,{attrs:_}){const b=k(null),h=R(s,void 0);se(f,{collectionItemRef:b}),De(()=>{const g=N(b);g&&h.itemMap.set(g,{ref:g,..._})}),Ae(()=>{const g=N(b);h.itemMap.delete(g)})}};return{COLLECTION_INJECTION_KEY:s,COLLECTION_ITEM_INJECTION_KEY:f,ElCollection:p,ElCollectionItem:i}},Fo=de({style:{type:Y([String,Array,Object])},currentTabId:{type:Y(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:Y(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:Ro,ElCollectionItem:Do,COLLECTION_INJECTION_KEY:Ie,COLLECTION_ITEM_INJECTION_KEY:Ao}=Me("RovingFocusGroup"),he=Symbol("elRovingFocusGroup"),Be=Symbol("elRovingFocusGroupItem"),Po={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},Lo=(e,o)=>{if(o!=="rtl")return e;switch(e){case C.right:return C.left;case C.left:return C.right;default:return e}},Mo=(e,o,u)=>{const s=Lo(e.key,u);if(!(o==="vertical"&&[C.left,C.right].includes(s))&&!(o==="horizontal"&&[C.up,C.down].includes(s)))return Po[s]},Bo=(e,o)=>e.map((u,s)=>e[(s+o)%e.length]),Ee=e=>{const{activeElement:o}=document;for(const u of e)if(u===o||(u.focus(),o!==document.activeElement))return},Te="currentTabIdChange",Oe="rovingFocusGroup.entryFocus",Ko={bubbles:!1,cancelable:!0},Uo=V({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:Fo,emits:[Te,"entryFocus"],setup(e,{emit:o}){var u;const s=k((u=e.currentTabId||e.defaultCurrentTabId)!=null?u:null),f=k(!1),p=k(!1),i=k(null),{getItems:l}=R(Ie,void 0),_=L(()=>[{outline:"none"},e.style]),b=d=>{o(Te,d)},h=()=>{f.value=!0},g=B(d=>{var I;(I=e.onMousedown)==null||I.call(e,d)},()=>{p.value=!0}),E=B(d=>{var I;(I=e.onFocus)==null||I.call(e,d)},d=>{const I=!N(p),{target:r,currentTarget:D}=d;if(r===D&&I&&!N(f)){const M=new Event(Oe,Ko);if(D==null||D.dispatchEvent(M),!M.defaultPrevented){const y=l().filter(A=>A.focusable),P=y.find(A=>A.active),S=y.find(A=>A.id===N(s)),G=[P,S,...y].filter(Boolean).map(A=>A.ref);Ee(G)}}p.value=!1}),t=B(d=>{var I;(I=e.onBlur)==null||I.call(e,d)},()=>{f.value=!1}),m=(...d)=>{o("entryFocus",...d)};se(he,{currentTabbedId:no(s),loop:te(e,"loop"),tabIndex:L(()=>N(f)?-1:0),rovingFocusGroupRef:i,rovingFocusGroupRootStyle:_,orientation:te(e,"orientation"),dir:te(e,"dir"),onItemFocus:b,onItemShiftTab:h,onBlur:t,onFocus:E,onMousedown:g}),Q(()=>e.currentTabId,d=>{s.value=d??null}),eo(i,Oe,m)}});function Go(e,o,u,s,f,p){return K(e.$slots,"default")}var Jo=H(Uo,[["render",Go],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group-impl.vue"]]);const zo=V({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:Ro,ElRovingFocusGroupImpl:Jo}});function Yo(e,o,u,s,f,p){const i=T("el-roving-focus-group-impl"),l=T("el-focus-group-collection");return O(),re(l,null,{default:w(()=>[$(i,to(so(e.$attrs)),{default:w(()=>[K(e.$slots,"default")]),_:3},16)]),_:3})}var Wo=H(zo,[["render",Yo],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group.vue"]]);const Ho=V({components:{ElRovingFocusCollectionItem:Do},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:o}){const{currentTabbedId:u,loop:s,onItemFocus:f,onItemShiftTab:p}=R(he,void 0),{getItems:i}=R(Ie,void 0),l=Pe(),_=k(null),b=B(t=>{o("mousedown",t)},t=>{e.focusable?f(N(l)):t.preventDefault()}),h=B(t=>{o("focus",t)},()=>{f(N(l))}),g=B(t=>{o("keydown",t)},t=>{const{key:m,shiftKey:d,target:I,currentTarget:r}=t;if(m===C.tab&&d){p();return}if(I!==r)return;const D=Mo(t);if(D){t.preventDefault();let y=i().filter(P=>P.focusable).map(P=>P.ref);switch(D){case"last":{y.reverse();break}case"prev":case"next":{D==="prev"&&y.reverse();const P=y.indexOf(r);y=s.value?Bo(y,P+1):y.slice(P+1);break}}ro(()=>{Ee(y)})}}),E=L(()=>u.value===N(l));return se(Be,{rovingFocusGroupItemRef:_,tabIndex:L(()=>N(E)?0:-1),handleMousedown:b,handleFocus:h,handleKeydown:g}),{id:l,handleKeydown:g,handleFocus:h,handleMousedown:b}}});function Vo(e,o,u,s,f,p){const i=T("el-roving-focus-collection-item");return O(),re(i,{id:e.id,focusable:e.focusable,active:e.active},{default:w(()=>[K(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var jo=H(Ho,[["render",Vo],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-item.vue"]]);const qo=de({trigger:Ze.trigger,effect:{...Ce.effect,default:"light"},type:{type:Y(String)},placement:{type:Y(String),default:"bottom"},popperOptions:{type:Y(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:Y([Number,String]),default:0},maxHeight:{type:Y([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:Y(Object)},teleported:Ce.teleported}),Ke=de({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:Ye}}),Zo=de({onKeydown:{type:Y(Function)}}),Qo=[C.down,C.pageDown,C.home],Ue=[C.up,C.pageUp,C.end],Xo=[...Qo,...Ue],{ElCollection:xo,ElCollectionItem:en,COLLECTION_INJECTION_KEY:on,COLLECTION_ITEM_INJECTION_KEY:nn}=Me("Dropdown"),pe=Symbol("elDropdown"),{ButtonGroup:tn}=ge,sn=V({name:"ElDropdown",components:{ElButton:ge,ElButtonGroup:tn,ElScrollbar:xe,ElDropdownCollection:xo,ElTooltip:Qe,ElRovingFocusGroup:Wo,ElOnlyChild:Xe,ElIcon:Ne,ArrowDown:We},props:qo,emits:["visible-change","click","command"],setup(e,{emit:o}){const u=be(),s=we("dropdown"),{t:f}=He(),p=k(),i=k(),l=k(null),_=k(null),b=k(null),h=k(null),g=k(!1),E=[C.enter,C.space,C.down],t=L(()=>({maxHeight:Ve(e.maxHeight)})),m=L(()=>[s.m(y.value)]),d=Pe().value,I=L(()=>e.id||d);Q([p,te(e,"trigger")],([c,n],[a])=>{var J,Z,le;const ve=ao(n)?n:[n];(J=a==null?void 0:a.$el)!=null&&J.removeEventListener&&a.$el.removeEventListener("pointerenter",S),(Z=c==null?void 0:c.$el)!=null&&Z.removeEventListener&&c.$el.removeEventListener("pointerenter",S),(le=c==null?void 0:c.$el)!=null&&le.addEventListener&&ve.includes("hover")&&c.$el.addEventListener("pointerenter",S)},{immediate:!0}),Ae(()=>{var c,n;(n=(c=p.value)==null?void 0:c.$el)!=null&&n.removeEventListener&&p.value.$el.removeEventListener("pointerenter",S)});function r(){D()}function D(){var c;(c=l.value)==null||c.onClose()}function M(){var c;(c=l.value)==null||c.onOpen()}const y=je();function P(...c){o("command",...c)}function S(){var c,n;(n=(c=p.value)==null?void 0:c.$el)==null||n.focus()}function U(){}function G(){const c=N(_);c==null||c.focus(),h.value=null}function A(c){h.value=c}function X(c){g.value||(c.preventDefault(),c.stopImmediatePropagation())}function x(){o("visible-change",!0)}function q(c){(c==null?void 0:c.type)==="keydown"&&_.value.focus()}function fe(){o("visible-change",!1)}return se(pe,{contentRef:_,role:L(()=>e.role),triggerId:I,isUsingKeyboard:g,onItemEnter:U,onItemLeave:G}),se("elDropdown",{instance:u,dropdownSize:y,handleClick:r,commandHandler:P,trigger:te(e,"trigger"),hideOnClick:te(e,"hideOnClick")}),{t:f,ns:s,scrollbar:b,wrapStyle:t,dropdownTriggerKls:m,dropdownSize:y,triggerId:I,triggerKeys:E,currentTabId:h,handleCurrentTabIdChange:A,handlerMainButtonClick:c=>{o("click",c)},handleEntryFocus:X,handleClose:D,handleOpen:M,handleBeforeShowTooltip:x,handleShowTooltip:q,handleBeforeHideTooltip:fe,onFocusAfterTrapped:c=>{var n,a;c.preventDefault(),(a=(n=_.value)==null?void 0:n.focus)==null||a.call(n,{preventScroll:!0})},popperRef:l,contentRef:_,triggeringElementRef:p,referenceElementRef:i}}});function rn(e,o,u,s,f,p){var i;const l=T("el-dropdown-collection"),_=T("el-roving-focus-group"),b=T("el-scrollbar"),h=T("el-only-child"),g=T("el-tooltip"),E=T("el-button"),t=T("arrow-down"),m=T("el-icon"),d=T("el-button-group");return O(),W("div",{class:j([e.ns.b(),e.ns.is("disabled",e.disabled)])},[$(g,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":(i=e.referenceElementRef)==null?void 0:i.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"",persistent:"",onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},lo({content:w(()=>[$(b,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:w(()=>[$(_,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:w(()=>[$(l,null,{default:w(()=>[K(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:w(()=>[$(h,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:w(()=>[K(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(O(),re(d,{key:0},{default:w(()=>[$(E,ae({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:w(()=>[K(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),$(E,ae({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:w(()=>[$(m,{class:j(e.ns.e("icon"))},{default:w(()=>[$(t)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):ue("v-if",!0)],2)}var ln=H(sn,[["render",rn],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown.vue"]]);const an=V({name:"DropdownItemImpl",components:{ElIcon:Ne},props:Ke,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:o}){const u=we("dropdown"),{role:s}=R(pe,void 0),{collectionItemRef:f}=R(nn,void 0),{collectionItemRef:p}=R(Ao,void 0),{rovingFocusGroupItemRef:i,tabIndex:l,handleFocus:_,handleKeydown:b,handleMousedown:h}=R(Be,void 0),g=Re(f,p,i),E=L(()=>s.value==="menu"?"menuitem":s.value==="navigation"?"link":"button"),t=B(m=>{const{code:d}=m;if(d===C.enter||d===C.space)return m.preventDefault(),m.stopImmediatePropagation(),o("clickimpl",m),!0},b);return{ns:u,itemRef:g,dataset:{[Le]:""},role:E,tabIndex:l,handleFocus:_,handleKeydown:t,handleMousedown:h}}}),cn=["aria-disabled","tabindex","role"];function un(e,o,u,s,f,p){const i=T("el-icon");return O(),W(ce,null,[e.divided?(O(),W("li",ae({key:0,role:"separator",class:e.ns.bem("menu","item","divided")},e.$attrs),null,16)):ue("v-if",!0),F("li",ae({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:o[0]||(o[0]=l=>e.$emit("clickimpl",l)),onFocus:o[1]||(o[1]=(...l)=>e.handleFocus&&e.handleFocus(...l)),onKeydown:o[2]||(o[2]=_e((...l)=>e.handleKeydown&&e.handleKeydown(...l),["self"])),onMousedown:o[3]||(o[3]=(...l)=>e.handleMousedown&&e.handleMousedown(...l)),onPointermove:o[4]||(o[4]=l=>e.$emit("pointermove",l)),onPointerleave:o[5]||(o[5]=l=>e.$emit("pointerleave",l))}),[e.icon?(O(),re(i,{key:0},{default:w(()=>[(O(),re(io(e.icon)))]),_:1})):ue("v-if",!0),K(e.$slots,"default")],16,cn)],64)}var dn=H(an,[["render",un],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item-impl.vue"]]);const Ge=()=>{const e=R("elDropdown",{}),o=L(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:o}},pn=V({name:"ElDropdownItem",components:{ElDropdownCollectionItem:en,ElRovingFocusItem:jo,ElDropdownItemImpl:dn},inheritAttrs:!1,props:Ke,emits:["pointermove","pointerleave","click"],setup(e,{emit:o,attrs:u}){const{elDropdown:s}=Ge(),f=be(),p=k(null),i=L(()=>{var t,m;return(m=(t=N(p))==null?void 0:t.textContent)!=null?m:""}),{onItemEnter:l,onItemLeave:_}=R(pe,void 0),b=B(t=>(o("pointermove",t),t.defaultPrevented),$e(t=>{if(e.disabled){_(t);return}const m=t.currentTarget;m===document.activeElement||m.contains(document.activeElement)||(l(t),t.defaultPrevented||m==null||m.focus())})),h=B(t=>(o("pointerleave",t),t.defaultPrevented),$e(t=>{_(t)})),g=B(t=>{if(!e.disabled)return o("click",t),t.type!=="keydown"&&t.defaultPrevented},t=>{var m,d,I;if(e.disabled){t.stopImmediatePropagation();return}(m=s==null?void 0:s.hideOnClick)!=null&&m.value&&((d=s.handleClick)==null||d.call(s)),(I=s.commandHandler)==null||I.call(s,e.command,f,t)}),E=L(()=>({...e,...u}));return{handleClick:g,handlePointerMove:b,handlePointerLeave:h,textContent:i,propsAndAttrs:E}}});function fn(e,o,u,s,f,p){var i;const l=T("el-dropdown-item-impl"),_=T("el-roving-focus-item"),b=T("el-dropdown-collection-item");return O(),re(b,{disabled:e.disabled,"text-value":(i=e.textValue)!=null?i:e.textContent},{default:w(()=>[$(_,{focusable:!e.disabled},{default:w(()=>[$(l,ae(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:w(()=>[K(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var Je=H(pn,[["render",fn],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item.vue"]]);const mn=V({name:"ElDropdownMenu",props:Zo,setup(e){const o=we("dropdown"),{_elDropdownSize:u}=Ge(),s=u.value,{focusTrapRef:f,onKeydown:p}=R(oo,void 0),{contentRef:i,role:l,triggerId:_}=R(pe,void 0),{collectionRef:b,getItems:h}=R(on,void 0),{rovingFocusGroupRef:g,rovingFocusGroupRootStyle:E,tabIndex:t,onBlur:m,onFocus:d,onMousedown:I}=R(he,void 0),{collectionRef:r}=R(Ie,void 0),D=L(()=>[o.b("menu"),o.bm("menu",s==null?void 0:s.value)]),M=Re(i,b,f,g,r),y=B(S=>{var U;(U=e.onKeydown)==null||U.call(e,S)},S=>{const{currentTarget:U,code:G,target:A}=S;if(U.contains(A),C.tab===G&&S.stopImmediatePropagation(),S.preventDefault(),A!==N(i)||!Xo.includes(G))return;const x=h().filter(q=>!q.disabled).map(q=>q.ref);Ue.includes(G)&&x.reverse(),Ee(x)});return{size:s,rovingFocusGroupRootStyle:E,tabIndex:t,dropdownKls:D,role:l,triggerId:_,dropdownListWrapperRef:M,handleKeydown:S=>{y(S),p(S)},onBlur:m,onFocus:d,onMousedown:I}}}),vn=["role","aria-labelledby"];function _n(e,o,u,s,f,p){return O(),W("ul",{ref:e.dropdownListWrapperRef,class:j(e.dropdownKls),style:co(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:o[0]||(o[0]=(...i)=>e.onBlur&&e.onBlur(...i)),onFocus:o[1]||(o[1]=(...i)=>e.onFocus&&e.onFocus(...i)),onKeydown:o[2]||(o[2]=_e((...i)=>e.handleKeydown&&e.handleKeydown(...i),["self"])),onMousedown:o[3]||(o[3]=_e((...i)=>e.onMousedown&&e.onMousedown(...i),["self"]))},[K(e.$slots,"default")],46,vn)}var ze=H(mn,[["render",_n],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-menu.vue"]]);const gn=qe(ln,{DropdownItem:Je,DropdownMenu:ze}),wn=Fe(Je),bn=Fe(ze);const ie=e=>(Eo("data-v-9694c868"),e=e(),ko(),e),In={class:"main"},hn={class:"users"},En={key:0,class:"main__top"},kn=["onClick"],yn=ie(()=>F("div",{class:"current__user-selector"},null,-1)),Cn=["src"],$n=ie(()=>F("i",{class:"el-icon-caret-bottom"},null,-1)),Sn=ie(()=>F("span",null,"Logout",-1)),Tn=ie(()=>F("div",{class:"current__workspace-selector"},null,-1)),On=["src","title","onClick"],Nn={class:"main__bottom"},Fn=ie(()=>F("div",{class:"main__user-actions--add_button"},[F("span",null,"+")],-1)),Rn={__name:"Sidebar",setup(e){const o=uo(),u=po(),s=fo(),f=mo(),{profileSuccessData:p,profileFailureData:i,editProfileData:l,editFailureData:_,workspacesSuccessData:b}=vo(o),{$myFetch:h}=_o(),g=ho();k(ne);const E=k(!1),t=be(),m=k(null),d=go(),I=k(!1),r=k(!1),D=wo(),M=k(+v.get("currentAccountID")),y=k(!1),P=n=>{const a=v.get("currentAccountID");m.value=n,n!=null&&n.user.avatar?r.value[a].avatarUrl=`${g.public.env.serverUrl}${n.avatarPath}/${n.user.avatar}`:r.value[a].avatarUrl=`${ne}`,localStorage.setItem("accounts",JSON.stringify(r.value))},S=n=>{r.value=JSON.parse(localStorage.getItem("accounts")),r.value[M.value].workspaces=n==null?void 0:n.myWorkspaces,localStorage.setItem("accounts",JSON.stringify(r.value))};Q(b,n=>S(n)),Q(p,n=>{const a=v.get("currentAccountID");m.value=n,n!=null&&n.user.avatar?r.value[a].avatarUrl=`${g.public.env.serverUrl}${n.avatarPath}/${n.user.avatar}`:r.value[a].avatarUrl=`${ne}`,localStorage.setItem("accounts",JSON.stringify(r.value))}),Q(_,n=>{(n==null?void 0:n.error)==="You don't have permission to access this resource"&&(v.remove("login_pin_token"),v.remove("settings_pin_token"),n=null,d.go())}),Q(i,n=>{(n==null?void 0:n.error)==="You don't have permission to access this resource"&&(v.remove("login_pin_token"),v.remove("settings_pin_token"),n=null,d.go())}),Q(l,n=>{const a=v.get("currentAccountID");n!=null&&n.user.avatar?r.value[a].avatarUrl=`${n.avatarPath}/${n.user.avatar}`:r.value[a].avatarUrl=`${ne}`,localStorage.setItem("accounts",JSON.stringify(r.value))}),De(async()=>{r.value=JSON.parse(localStorage.getItem("accounts")),v.get("login_pin_token")&&(p.value?P(p.value):o.getProfile(),b.value?S(b.value):await o.getWorkSpaces()),window.addEventListener("resize",A)});const U=()=>{I.value="hovered"},G=()=>{I.value=!1},A=()=>{window.innerWidth<800&&(E.value=!1),t.update()},X=async n=>{if(y.value=-1,M.value=n,v.set("currentAccountID",n),r.value[n].token===v.get("token")){oe("/");return}if(o.$reset(),u.$reset(),s.$reset(),f.$reset(),(Date.parse(r.value[n].token_expires)-Date.now())/864e5<0){r.value.splice(n,1),localStorage.setItem("accounts",JSON.stringify(r.value)),r.value[0]?X(0):(Object.keys(v.get()).forEach(function(a){v.remove(a,neededAttributes)}),d.go());return}v.set("token",r.value[n].token,{expires:(Date.parse(r.value[n].token_expires)-Date.now())/864e5}),v.set("first_login",r.value[n].first_login),r.value[n].settings_pin_token&&v.set("settings_pin_token",r.value[n].settings_pin_token),r.value[n].login_pin_token&&v.set("login_pin_token",r.value[n].login_pin_token,{expires:(Date.parse(r.value[n].login_pin_token_expires)-new Date)/864e5}),localStorage.setItem("accounts",JSON.stringify(r.value)),r.value[n].first_login===!0?oe("/pin"):D.path==="/pin"&&oe("/"),o.getProfile(),await o.getWorkSpaces(),oe("/")},x=n=>{M.value=-1,y.value=n,q(n)},q=n=>{oe(`/workspace/staff/${n}`)},fe=()=>{v.set("currentAccountID",r.value.length),v.set("addAccount",!0),window.open("/login","_blank")},ke=async n=>{r.value.forEach((J,Z)=>J.ID=Z);const a=r.value.filter(J=>J.ID!==n);X(n),await h("logout",{method:"post"}),o.$reset(),u.$reset(),s.$reset(),f.$reset(),a[0]?Date.parse(a[0].token_expires)-Date.now()>0?(v.set("token",a[0].token,{expires:(Date.parse(a[0].token_expires)-Date.now())/864e5}),a[0].first_login===!0&&v.set("first_login",a[0].first_login),a[0].settings_pin_token&&v.set("settings_pin_token",a[0].settings_pin_token),a[0].login_pin_token&&v.set("login_pin_token",a[0].login_pin_token,{expires:(Date.parse(a[0].login_pin_token_expires)-new Date)/864e5}),v.set("currentAccountID",0),o.getProfile(),await o.getWorkSpaces(),r.value=a,localStorage.setItem("accounts",JSON.stringify(a)),d.go()):a.shift():(v.remove("token"),v.remove("first_login"),v.remove("settings_pin_token"),v.remove("login_pin_token"),localStorage.setItem("accounts",JSON.stringify(a)),r.value=a,oe("/login"))},me=(n,a)=>{switch(n){case"u":return a===M.value?"currentUser":!1;default:return a===+y.value?"currentWorkspace":!1}},c=()=>{window.innerWidth>800?E.value=!E.value:E.value=!1};return(n,a)=>{const J=wn,Z=bn,le=gn,ve=ge;return O(),W("nav",In,[F("div",hn,[r.value?(O(),W("div",En,[(O(!0),W(ce,null,Se(r.value,z=>{var ye;return O(),W(ce,{key:z.ID},[$(le,{class:j(["main__user-actions",{currentUser:me("u",z.ID),bordered:(ye=z.workspaces)==null?void 0:ye.length}])},{dropdown:w(()=>[$(Z,null,{default:w(()=>[$(J,{class:"main__user-actions--add_element",onClick:ee=>ke(z.ID)},{default:w(()=>[Sn]),_:2},1032,["onClick"])]),_:2},1024)]),default:w(()=>[F("div",{class:"main__user-actions--user",onClick:ee=>X(z.ID)},[yn,F("img",{src:z.avatarUrl?z.avatarUrl:N(ne),alt:"Avatar",class:"main__user-actions--avatar"},null,8,Cn),$n],8,kn)]),_:2},1032,["class"]),(O(!0),W(ce,null,Se(z.workspaces,ee=>(O(),W("div",{key:ee.id,class:j(["main__user-workspaces",me("w",ee.id)])},[Tn,F("img",{src:z.avatarUrl?z.avatarUrl:N(ne),alt:"Avatar",class:"main__user-workspaces--avatar",title:ee.name,onClick:Dn=>x(ee.id)},null,8,On)],2))),128))],64)}),128))])):ue("",!0),F("div",Nn,[$(le,{class:"main__user-actions-add"},{dropdown:w(()=>[$(Z,{class:"main__user-actions--add_actions"},{default:w(()=>[$(J,{class:"main__user-actions--add_element"},{default:w(()=>[F("span",{class:j(I.value),onClick:fe,onMouseover:U,onMouseout:G}," Add account ",34)]),_:1}),$(J,{class:"main__user-actions--add_element"},{default:w(()=>[F("span",{class:j(I.value),onMouseover:U,onMouseout:G}," Add workspace ",34)]),_:1})]),_:1})]),default:w(()=>[Fn]),_:1})])]),F("div",{class:j(["chats",E.value?"large":"small"])},[$(ve,{class:"chats-button",onClick:c},{default:w(()=>[bo(Io(E.value?"<":">"),1)]),_:1})],2)])}}},Jn=yo(Rn,[["__scopeId","data-v-9694c868"]]);export{Jn as default};
