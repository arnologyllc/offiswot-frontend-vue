import{_ as q,b as me,d as j,J as je,E as he,j as De,l as qe,a as Ze,ao as Qe,h as Xe,w as xe,r as Pe}from"./el-button.a99e2c6b.js";import{c as z,b as eo,u as Te,E as oo,O as no,w as Oe}from"./el-popper.d4ef4d24.js";import{E as to}from"./el-scrollbar.c043efc3.js";import{E as S,e as so,c as Ae,F as ro}from"./focus-trap.2903bedc.js";import{M as Z,S as Y,r as k,Q as le,O as B,e as Le,u as O,ad as Me,C as K,bq as lo,a5 as re,w as ne,a8 as P,o as F,c as ae,j as v,i as E,n as ao,g as io,Z as Be,P as uo,N as be,h as J,aj as co,T as ue,G as x,l as ce,m as Ie,L as po,p as y,R as fo,k as we,F as fe,J as Ke,A as mo,B as vo,E as _o,a as go,s as wo,bZ as ho,b as bo,H as Io,f as w,q as Ne,v as oe,D as ko,x as Eo,y as yo}from"./entry.9bb9e3ed.js";/* empty css                        */import{d as se}from"./default-user-icon.ffe46375.js";import{_ as Co}from"./_plugin-vue_export-helper.c27b6911.js";const $o=Z({inheritAttrs:!1});function So(e,o,u,r,f,d){return Y(e.$slots,"default")}var To=q($o,[["render",So],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);const Oo=Z({name:"ElCollectionItem",inheritAttrs:!1});function No(e,o,u,r,f,d){return Y(e.$slots,"default")}var Ro=q(Oo,[["render",No],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const Ue="data-el-collection-item",Ge=e=>{const o=`El${e}Collection`,u=`${o}Item`,r=Symbol(o),f=Symbol(u),d={...To,name:o,setup(){const l=k(null),_=new Map;le(r,{itemMap:_,getItems:()=>{const I=O(l);if(!I)return[];const g=Array.from(I.querySelectorAll(`[${Ue}]`));return[..._.values()].sort((t,m)=>g.indexOf(t.ref)-g.indexOf(m.ref))},collectionRef:l})}},i={...Ro,name:u,setup(l,{attrs:_}){const h=k(null),I=B(r,void 0);le(f,{collectionItemRef:h}),Le(()=>{const g=O(h);g&&I.itemMap.set(g,{ref:g,..._})}),Me(()=>{const g=O(h);I.itemMap.delete(g)})}};return{COLLECTION_INJECTION_KEY:r,COLLECTION_ITEM_INJECTION_KEY:f,ElCollection:d,ElCollectionItem:i}},Fo=me({style:{type:j([String,Array,Object])},currentTabId:{type:j(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:j(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:Do,ElCollectionItem:Po,COLLECTION_INJECTION_KEY:ke,COLLECTION_ITEM_INJECTION_KEY:Ao}=Ge("RovingFocusGroup"),Ee=Symbol("elRovingFocusGroup"),Je=Symbol("elRovingFocusGroupItem"),Lo={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},Mo=(e,o)=>{if(o!=="rtl")return e;switch(e){case S.right:return S.left;case S.left:return S.right;default:return e}},Bo=(e,o,u)=>{const r=Mo(e.key,u);if(!(o==="vertical"&&[S.left,S.right].includes(r))&&!(o==="horizontal"&&[S.up,S.down].includes(r)))return Lo[r]},Ko=(e,o)=>e.map((u,r)=>e[(r+o)%e.length]),ye=e=>{const{activeElement:o}=document;for(const u of e)if(u===o||(u.focus(),o!==document.activeElement))return},Re="currentTabIdChange",Fe="rovingFocusGroup.entryFocus",Uo={bubbles:!1,cancelable:!0},Go=Z({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:Fo,emits:[Re,"entryFocus"],setup(e,{emit:o}){var u;const r=k((u=e.currentTabId||e.defaultCurrentTabId)!=null?u:null),f=k(!1),d=k(!1),i=k(null),{getItems:l}=B(ke,void 0),_=K(()=>[{outline:"none"},e.style]),h=c=>{o(Re,c)},I=()=>{f.value=!0},g=z(c=>{var b;(b=e.onMousedown)==null||b.call(e,c)},()=>{d.value=!0}),T=z(c=>{var b;(b=e.onFocus)==null||b.call(e,c)},c=>{const b=!O(d),{target:s,currentTarget:D}=c;if(s===D&&b&&!O(f)){const C=new Event(Fe,Uo);if(D==null||D.dispatchEvent(C),!C.defaultPrevented){const $=l().filter(L=>L.focusable),A=$.find(L=>L.active),R=$.find(L=>L.id===O(r)),V=[A,R,...$].filter(Boolean).map(L=>L.ref);ye(V)}}d.value=!1}),t=z(c=>{var b;(b=e.onBlur)==null||b.call(e,c)},()=>{f.value=!1}),m=(...c)=>{o("entryFocus",...c)};le(Ee,{currentTabbedId:lo(r),loop:re(e,"loop"),tabIndex:K(()=>O(f)?-1:0),rovingFocusGroupRef:i,rovingFocusGroupRootStyle:_,orientation:re(e,"orientation"),dir:re(e,"dir"),onItemFocus:h,onItemShiftTab:I,onBlur:t,onFocus:T,onMousedown:g}),ne(()=>e.currentTabId,c=>{r.value=c??null}),so(i,Fe,m)}});function Jo(e,o,u,r,f,d){return Y(e.$slots,"default")}var zo=q(Go,[["render",Jo],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group-impl.vue"]]);const Yo=Z({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:Do,ElRovingFocusGroupImpl:zo}});function Wo(e,o,u,r,f,d){const i=P("el-roving-focus-group-impl"),l=P("el-focus-group-collection");return F(),ae(l,null,{default:v(()=>[E(i,ao(io(e.$attrs)),{default:v(()=>[Y(e.$slots,"default")]),_:3},16)]),_:3})}var Ho=q(Yo,[["render",Wo],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group.vue"]]);const Vo=Z({components:{ElRovingFocusCollectionItem:Po},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:o}){const{currentTabbedId:u,loop:r,onItemFocus:f,onItemShiftTab:d}=B(Ee,void 0),{getItems:i}=B(ke,void 0),l=Be(),_=k(null),h=z(t=>{o("mousedown",t)},t=>{e.focusable?f(O(l)):t.preventDefault()}),I=z(t=>{o("focus",t)},()=>{f(O(l))}),g=z(t=>{o("keydown",t)},t=>{const{key:m,shiftKey:c,target:b,currentTarget:s}=t;if(m===S.tab&&c){d();return}if(b!==s)return;const D=Bo(t);if(D){t.preventDefault();let $=i().filter(A=>A.focusable).map(A=>A.ref);switch(D){case"last":{$.reverse();break}case"prev":case"next":{D==="prev"&&$.reverse();const A=$.indexOf(s);$=r.value?Ko($,A+1):$.slice(A+1);break}}uo(()=>{ye($)})}}),T=K(()=>u.value===O(l));return le(Je,{rovingFocusGroupItemRef:_,tabIndex:K(()=>O(T)?0:-1),handleMousedown:h,handleFocus:I,handleKeydown:g}),{id:l,handleKeydown:g,handleFocus:I,handleMousedown:h}}});function jo(e,o,u,r,f,d){const i=P("el-roving-focus-collection-item");return F(),ae(i,{id:e.id,focusable:e.focusable,active:e.active},{default:v(()=>[Y(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var qo=q(Vo,[["render",jo],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-item.vue"]]);const Zo=me({trigger:eo.trigger,effect:{...Te.effect,default:"light"},type:{type:j(String)},placement:{type:j(String),default:"bottom"},popperOptions:{type:j(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:j([Number,String]),default:0},maxHeight:{type:j([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:j(Object)},teleported:Te.teleported}),ze=me({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:je}}),Qo=me({onKeydown:{type:j(Function)}}),Xo=[S.down,S.pageDown,S.home],Ye=[S.up,S.pageUp,S.end],xo=[...Xo,...Ye],{ElCollection:en,ElCollectionItem:on,COLLECTION_INJECTION_KEY:nn,COLLECTION_ITEM_INJECTION_KEY:tn}=Ge("Dropdown"),ve=Symbol("elDropdown"),{ButtonGroup:sn}=he,rn=Z({name:"ElDropdown",components:{ElButton:he,ElButtonGroup:sn,ElScrollbar:to,ElDropdownCollection:en,ElTooltip:oo,ElRovingFocusGroup:Ho,ElOnlyChild:no,ElIcon:De,ArrowDown:qe},props:Zo,emits:["visible-change","click","command"],setup(e,{emit:o}){const u=Ie(),r=be("dropdown"),{t:f}=Ze(),d=k(),i=k(),l=k(null),_=k(null),h=k(null),I=k(null),g=k(!1),T=[S.enter,S.space,S.down],t=K(()=>({maxHeight:Qe(e.maxHeight)})),m=K(()=>[r.m($.value)]),c=Be().value,b=K(()=>e.id||c);ne([d,re(e,"trigger")],([a,M],[X])=>{var ie,n,p;const N=po(M)?M:[M];(ie=X==null?void 0:X.$el)!=null&&ie.removeEventListener&&X.$el.removeEventListener("pointerenter",R),(n=a==null?void 0:a.$el)!=null&&n.removeEventListener&&a.$el.removeEventListener("pointerenter",R),(p=a==null?void 0:a.$el)!=null&&p.addEventListener&&N.includes("hover")&&a.$el.addEventListener("pointerenter",R)},{immediate:!0}),Me(()=>{var a,M;(M=(a=d.value)==null?void 0:a.$el)!=null&&M.removeEventListener&&d.value.$el.removeEventListener("pointerenter",R)});function s(){D()}function D(){var a;(a=l.value)==null||a.onClose()}function C(){var a;(a=l.value)==null||a.onOpen()}const $=Xe();function A(...a){o("command",...a)}function R(){var a,M;(M=(a=d.value)==null?void 0:a.$el)==null||M.focus()}function H(){}function V(){const a=O(_);a==null||a.focus(),I.value=null}function L(a){I.value=a}function de(a){g.value||(a.preventDefault(),a.stopImmediatePropagation())}function Q(){o("visible-change",!0)}function ee(a){(a==null?void 0:a.type)==="keydown"&&_.value.focus()}function _e(){o("visible-change",!1)}return le(ve,{contentRef:_,role:K(()=>e.role),triggerId:b,isUsingKeyboard:g,onItemEnter:H,onItemLeave:V}),le("elDropdown",{instance:u,dropdownSize:$,handleClick:s,commandHandler:A,trigger:re(e,"trigger"),hideOnClick:re(e,"hideOnClick")}),{t:f,ns:r,scrollbar:h,wrapStyle:t,dropdownTriggerKls:m,dropdownSize:$,triggerId:b,triggerKeys:T,currentTabId:I,handleCurrentTabIdChange:L,handlerMainButtonClick:a=>{o("click",a)},handleEntryFocus:de,handleClose:D,handleOpen:C,handleBeforeShowTooltip:Q,handleShowTooltip:ee,handleBeforeHideTooltip:_e,onFocusAfterTrapped:a=>{var M,X;a.preventDefault(),(X=(M=_.value)==null?void 0:M.focus)==null||X.call(M,{preventScroll:!0})},popperRef:l,contentRef:_,triggeringElementRef:d,referenceElementRef:i}}});function ln(e,o,u,r,f,d){var i;const l=P("el-dropdown-collection"),_=P("el-roving-focus-group"),h=P("el-scrollbar"),I=P("el-only-child"),g=P("el-tooltip"),T=P("el-button"),t=P("arrow-down"),m=P("el-icon"),c=P("el-button-group");return F(),J("div",{class:x([e.ns.b(),e.ns.is("disabled",e.disabled)])},[E(g,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":(i=e.referenceElementRef)==null?void 0:i.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"",persistent:"",onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},co({content:v(()=>[E(h,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:v(()=>[E(_,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:v(()=>[E(l,null,{default:v(()=>[Y(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:v(()=>[E(I,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:v(()=>[Y(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(F(),ae(c,{key:0},{default:v(()=>[E(T,ue({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:v(()=>[Y(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),E(T,ue({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:v(()=>[E(m,{class:x(e.ns.e("icon"))},{default:v(()=>[E(t)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):ce("v-if",!0)],2)}var an=q(rn,[["render",ln],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown.vue"]]);const un=Z({name:"DropdownItemImpl",components:{ElIcon:De},props:ze,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:o}){const u=be("dropdown"),{role:r}=B(ve,void 0),{collectionItemRef:f}=B(tn,void 0),{collectionItemRef:d}=B(Ao,void 0),{rovingFocusGroupItemRef:i,tabIndex:l,handleFocus:_,handleKeydown:h,handleMousedown:I}=B(Je,void 0),g=Ae(f,d,i),T=K(()=>r.value==="menu"?"menuitem":r.value==="navigation"?"link":"button"),t=z(m=>{const{code:c}=m;if(c===S.enter||c===S.space)return m.preventDefault(),m.stopImmediatePropagation(),o("clickimpl",m),!0},h);return{ns:u,itemRef:g,dataset:{[Ue]:""},role:T,tabIndex:l,handleFocus:_,handleKeydown:t,handleMousedown:I}}}),cn=["aria-disabled","tabindex","role"];function dn(e,o,u,r,f,d){const i=P("el-icon");return F(),J(fe,null,[e.divided?(F(),J("li",ue({key:0,role:"separator",class:e.ns.bem("menu","item","divided")},e.$attrs),null,16)):ce("v-if",!0),y("li",ue({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:o[0]||(o[0]=l=>e.$emit("clickimpl",l)),onFocus:o[1]||(o[1]=(...l)=>e.handleFocus&&e.handleFocus(...l)),onKeydown:o[2]||(o[2]=we((...l)=>e.handleKeydown&&e.handleKeydown(...l),["self"])),onMousedown:o[3]||(o[3]=(...l)=>e.handleMousedown&&e.handleMousedown(...l)),onPointermove:o[4]||(o[4]=l=>e.$emit("pointermove",l)),onPointerleave:o[5]||(o[5]=l=>e.$emit("pointerleave",l))}),[e.icon?(F(),ae(i,{key:0},{default:v(()=>[(F(),ae(fo(e.icon)))]),_:1})):ce("v-if",!0),Y(e.$slots,"default")],16,cn)],64)}var pn=q(un,[["render",dn],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item-impl.vue"]]);const We=()=>{const e=B("elDropdown",{}),o=K(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:o}},fn=Z({name:"ElDropdownItem",components:{ElDropdownCollectionItem:on,ElRovingFocusItem:qo,ElDropdownItemImpl:pn},inheritAttrs:!1,props:ze,emits:["pointermove","pointerleave","click"],setup(e,{emit:o,attrs:u}){const{elDropdown:r}=We(),f=Ie(),d=k(null),i=K(()=>{var t,m;return(m=(t=O(d))==null?void 0:t.textContent)!=null?m:""}),{onItemEnter:l,onItemLeave:_}=B(ve,void 0),h=z(t=>(o("pointermove",t),t.defaultPrevented),Oe(t=>{if(e.disabled){_(t);return}const m=t.currentTarget;m===document.activeElement||m.contains(document.activeElement)||(l(t),t.defaultPrevented||m==null||m.focus())})),I=z(t=>(o("pointerleave",t),t.defaultPrevented),Oe(t=>{_(t)})),g=z(t=>{if(!e.disabled)return o("click",t),t.type!=="keydown"&&t.defaultPrevented},t=>{var m,c,b;if(e.disabled){t.stopImmediatePropagation();return}(m=r==null?void 0:r.hideOnClick)!=null&&m.value&&((c=r.handleClick)==null||c.call(r)),(b=r.commandHandler)==null||b.call(r,e.command,f,t)}),T=K(()=>({...e,...u}));return{handleClick:g,handlePointerMove:h,handlePointerLeave:I,textContent:i,propsAndAttrs:T}}});function mn(e,o,u,r,f,d){var i;const l=P("el-dropdown-item-impl"),_=P("el-roving-focus-item"),h=P("el-dropdown-collection-item");return F(),ae(h,{disabled:e.disabled,"text-value":(i=e.textValue)!=null?i:e.textContent},{default:v(()=>[E(_,{focusable:!e.disabled},{default:v(()=>[E(l,ue(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:v(()=>[Y(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var He=q(fn,[["render",mn],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item.vue"]]);const vn=Z({name:"ElDropdownMenu",props:Qo,setup(e){const o=be("dropdown"),{_elDropdownSize:u}=We(),r=u.value,{focusTrapRef:f,onKeydown:d}=B(ro,void 0),{contentRef:i,role:l,triggerId:_}=B(ve,void 0),{collectionRef:h,getItems:I}=B(nn,void 0),{rovingFocusGroupRef:g,rovingFocusGroupRootStyle:T,tabIndex:t,onBlur:m,onFocus:c,onMousedown:b}=B(Ee,void 0),{collectionRef:s}=B(ke,void 0),D=K(()=>[o.b("menu"),o.bm("menu",r==null?void 0:r.value)]),C=Ae(i,h,f,g,s),$=z(R=>{var H;(H=e.onKeydown)==null||H.call(e,R)},R=>{const{currentTarget:H,code:V,target:L}=R;if(H.contains(L),S.tab===V&&R.stopImmediatePropagation(),R.preventDefault(),L!==O(i)||!xo.includes(V))return;const Q=I().filter(ee=>!ee.disabled).map(ee=>ee.ref);Ye.includes(V)&&Q.reverse(),ye(Q)});return{size:r,rovingFocusGroupRootStyle:T,tabIndex:t,dropdownKls:D,role:l,triggerId:_,dropdownListWrapperRef:C,handleKeydown:R=>{$(R),d(R)},onBlur:m,onFocus:c,onMousedown:b}}}),_n=["role","aria-labelledby"];function gn(e,o,u,r,f,d){return F(),J("ul",{ref:e.dropdownListWrapperRef,class:x(e.dropdownKls),style:Ke(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:o[0]||(o[0]=(...i)=>e.onBlur&&e.onBlur(...i)),onFocus:o[1]||(o[1]=(...i)=>e.onFocus&&e.onFocus(...i)),onKeydown:o[2]||(o[2]=we((...i)=>e.handleKeydown&&e.handleKeydown(...i),["self"])),onMousedown:o[3]||(o[3]=we((...i)=>e.onMousedown&&e.onMousedown(...i),["self"]))},[Y(e.$slots,"default")],46,_n)}var Ve=q(vn,[["render",gn],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-menu.vue"]]);const wn=xe(an,{DropdownItem:He,DropdownMenu:Ve}),hn=Pe(He),bn=Pe(Ve);const In=""+new URL("search.5b3fea75.svg",import.meta.url).href,kn=""+new URL("new-chat.d41c9453.svg",import.meta.url).href,En=""+new URL("saved-messages.dcdaa155.svg",import.meta.url).href;const W=e=>(Eo("data-v-f3636a89"),e=e(),yo(),e),yn={class:"main"},Cn={class:"users"},$n={key:0,class:"main__top"},Sn=["onClick"],Tn=W(()=>y("div",{class:"current__user-selector"},null,-1)),On=["src"],Nn=W(()=>y("i",{class:"el-icon-caret-bottom"},null,-1)),Rn=W(()=>y("span",null,"Logout",-1)),Fn=W(()=>y("div",{class:"current__workspace-selector"},null,-1)),Dn=["src","title","onClick"],Pn={class:"main__bottom"},An=W(()=>y("div",{class:"main__user-actions--add_button"},[y("span",null,"+")],-1)),Ln={class:"chats-header"},Mn=W(()=>y("img",{src:In,alt:"",class:"chats__button-img"},null,-1)),Bn=W(()=>y("span",{class:"chats__button-text"},"Search",-1)),Kn=W(()=>y("img",{src:kn,alt:"",class:"chats__button-img"},null,-1)),Un=W(()=>y("span",{class:"chats__button-text"},"Create new chat",-1)),Gn=W(()=>y("img",{src:En,alt:"",class:"chats__button-img"},null,-1)),Jn=W(()=>y("span",{class:"chats__button-text"},"Saved messages",-1)),zn={__name:"Sidebar",setup(e){const o=mo(),u=vo(),r=_o(),f=go(),{profileSuccessData:d,profileFailureData:i,editProfileData:l,editFailureData:_,workspacesSuccessData:h}=wo(o),{$myFetch:I}=ho(),g=ko();k(se);const T=k(!0),t=Ie(),m=k(null),c=bo(),b=k(!1),s=k(!1),D=Io(),C=k(w.get("currentAccountID")?+w.get("currentAccountID"):0),$=k(!1),A=k(236),R=n=>{m.value=n,n!=null&&n.user.avatar&&s.value[C.value]?s.value[C.value].avatarUrl=`${g.public.env.serverUrl}${n.avatarPath}/${n.user.avatar}`:s.value[C.value]&&(s.value[C.value].avatarUrl=`${se}`),localStorage.setItem("accounts",JSON.stringify(s.value))},H=n=>{s.value=JSON.parse(localStorage.getItem("accounts")),s.value[C.value]&&(s.value[C.value].workspaces=n==null?void 0:n.myWorkspaces),localStorage.setItem("accounts",JSON.stringify(s.value))};ne(h,n=>H(n)),ne(d,n=>{n!=null&&n.user.avatar?s.value[C.value].avatarUrl=`${g.public.env.serverUrl}${n.avatarPath}/${n.user.avatar}`:s.value[C.value].avatarUrl=`${se}`,localStorage.setItem("accounts",JSON.stringify(s.value))}),ne(_,n=>{(n==null?void 0:n.error)==="You don't have permission to access this resource"&&(w.remove("login_pin_token"),w.remove("settings_pin_token"),n=null,c.go())}),ne(i,n=>{(n==null?void 0:n.error)==="You don't have permission to access this resource"&&(w.remove("login_pin_token"),w.remove("settings_pin_token"),n=null,c.go())}),ne(l,n=>{n!=null&&n.user.avatar?s.value[C.value].avatarUrl=`${n.avatarPath}/${n.user.avatar}`:s.value[C.value].avatarUrl=`${se}`,localStorage.setItem("accounts",JSON.stringify(s.value))}),Le(async()=>{s.value=JSON.parse(localStorage.getItem("accounts")).filter(n=>n.token),w.get("login_pin_token")&&(d.value?R(d.value):o.getProfile(),h.value?H(h.value):await o.getWorkSpaces()),window.addEventListener("resize",de)});const V=()=>{b.value="hovered"},L=()=>{b.value=!1},de=()=>{window.innerWidth<800&&(T.value=!1),t.update()},Q=async n=>{if($.value=-1,C.value=n,w.set("currentAccountID",n),s.value[n].token===w.get("token")){oe("/");return}if(o.$reset(),u.$reset(),r.$reset(),f.$reset(),(Date.parse(s.value[n].token_expires)-Date.now())/864e5<0){s.value.splice(n,1),localStorage.setItem("accounts",JSON.stringify(s.value)),s.value[0]?Q(0):(Object.keys(w.get()).forEach(function(p){w.remove(p,neededAttributes)}),c.go());return}w.set("token",s.value[n].token,{expires:(Date.parse(s.value[n].token_expires)-Date.now())/864e5}),w.set("first_login",s.value[n].first_login),s.value[n].settings_pin_token&&w.set("settings_pin_token",s.value[n].settings_pin_token),s.value[n].login_pin_token&&w.set("login_pin_token",s.value[n].login_pin_token,{expires:(Date.parse(s.value[n].login_pin_token_expires)-new Date)/864e5}),localStorage.setItem("accounts",JSON.stringify(s.value)),s.value[n].first_login===!0?oe("/pin"):D.path==="/pin"&&oe("/"),o.getProfile(),await o.getWorkSpaces(),oe("/")},ee=n=>{C.value=-1,$.value=n,_e(n)},_e=n=>{oe(`/workspace/staff/${n}`)},Ce=()=>{w.set("currentAccountID",s.value.length),w.set("addAccount",!0),window.open("/login","_blank")},$e=async n=>{s.value.forEach((U,pe)=>U.ID=pe),Q(n),await I("logout",{method:"post"});const p=s.value.map(U=>(U.ID===n&&(U.token=null,U.token_expires=null,U.first_login=null,U.settings_pin_token=null),U));o.$reset(),u.$reset(),r.$reset(),f.$reset();const N=p.findIndex(U=>U.token);p[N]?Date.parse(p[N].token_expires)-Date.now()>0?(w.set("token",p[N].token,{expires:(Date.parse(p[N].token_expires)-Date.now())/864e5}),p[N].first_login===!0&&w.set("first_login",p[N].first_login),p[N].settings_pin_token&&w.set("settings_pin_token",p[N].settings_pin_token),p[N].login_pin_token&&w.set("login_pin_token",p[N].login_pin_token,{expires:(Date.parse(p[N].login_pin_token_expires)-new Date)/864e5}),w.set("currentAccountID",N),o.getProfile(),await o.getWorkSpaces(),s.value=p,localStorage.setItem("accounts",JSON.stringify(p)),c.go()):p.shift():(w.remove("token"),w.remove("first_login"),w.remove("settings_pin_token"),w.remove("login_pin_token"),localStorage.setItem("accounts",JSON.stringify(p)),s.value=p,oe("/login"))},a=(n,p)=>{switch(n){case"u":return p===C.value?"currentUser":!1;default:return p===+$.value?"currentWorkspace":!1}},M=K(()=>s.value.reduce((n,p)=>(p.token&&n.push(p),n),[])),X=n=>{n.target.parentNode.style.cursor="e-resize",window.addEventListener("mousemove",ie,!1),window.addEventListener("mouseup",()=>{n.target.parentNode.style.cursor="auto",window.removeEventListener("mousemove",ie,!1)},!1)},ie=n=>{A.value=n.x-68,A.value<85?T.value=!1:T.value=!0};return(n,p)=>{const N=hn,U=bn,pe=wn,ge=he;return F(),J("nav",yn,[y("div",Cn,[s.value?(F(),J("div",$n,[(F(!0),J(fe,null,Ne(M.value,G=>{var Se;return F(),J(fe,{key:G.ID},[E(pe,{class:x(["main__user-actions",{currentUser:a("u",G.ID),bordered:(Se=G.workspaces)==null?void 0:Se.length}])},{dropdown:v(()=>[E(U,null,{default:v(()=>[E(N,{class:"main__user-actions--add_element",onClick:te=>$e(G.ID)},{default:v(()=>[Rn]),_:2},1032,["onClick"])]),_:2},1024)]),default:v(()=>[y("div",{class:"main__user-actions--user",onClick:te=>Q(G.ID)},[Tn,y("img",{src:G.avatarUrl?G.avatarUrl:O(se),alt:"Avatar",class:"main__user-actions--avatar"},null,8,On),Nn],8,Sn)]),_:2},1032,["class"]),(F(!0),J(fe,null,Ne(G.workspaces,te=>(F(),J("div",{key:te.id,class:x(["main__user-workspaces",a("w",te.id)])},[Fn,y("img",{src:G.avatarUrl?G.avatarUrl:O(se),alt:"Avatar",class:"main__user-workspaces--avatar",title:te.name,onClick:Yn=>ee(te.id)},null,8,Dn)],2))),128))],64)}),128))])):ce("",!0),y("div",Pn,[E(pe,{class:"main__user-actions-add"},{dropdown:v(()=>[E(U,{class:"main__user-actions--add_actions"},{default:v(()=>[E(N,{class:"main__user-actions--add_element"},{default:v(()=>[y("span",{class:x(b.value),onClick:Ce,onMouseover:V,onMouseout:L}," Add account ",34)]),_:1}),E(N,{class:"main__user-actions--add_element"},{default:v(()=>[y("span",{class:x(b.value),onClick:p[0]||(p[0]=G=>("navigateTo"in n?n.navigateTo:O(oe))("/create-workspace")),onMouseover:V,onMouseout:L}," Add workspace ",34)]),_:1})]),_:1})]),default:v(()=>[An]),_:1})])]),O(D).path.includes("workspace")||O(D).fullPath=="/"?(F(),J("div",{key:0,class:x(["chats",T.value?"large":"small"]),style:Ke({width:A.value+"px"})},[y("div",Ln,[E(ge,{class:"chats__search"},{default:v(()=>[Mn,Bn]),_:1}),E(ge,{class:"chats__create"},{default:v(()=>[Kn,Un]),_:1}),E(ge,{class:"chats__saved"},{default:v(()=>[Gn,Jn]),_:1})]),y("div",{class:"cursorbefore",onMousedown:X},null,32)],6)):ce("",!0)])}}},xn=Co(zn,[["__scopeId","data-v-f3636a89"]]);export{xn as default};
