import{E as j,_ as V,a as J,b as X}from"./el-overlay.1f5dd129.js";import{E as G,a as K}from"./el-select.796dd3cd.js";import{E as Q}from"./el-button.a59501ca.js";import"./el-scrollbar.91546cb9.js";import"./el-popper.38382e49.js";import{a as Y,s as Z,b as ee,r as d,w as h,e as oe,f as se,h as m,i as a,u as o,t as y,j as u,k as n,l as te,c as E,m as c,p as ae,o as l,F as re,q as le,v as ne,x as ie,y as ue}from"./entry.893479c5.js";import{_ as me}from"./chevron-left.7fe539c8.js";import{_ as ce}from"./chevron-icon.c045d04d.js";import{_ as _e}from"./AccessCheckModal.bb7b7631.js";import{E as de}from"./ErrorMassageModal.c13ecb1d.js";import pe from"./settingsToken.64ccc892.js";import ve from"./loginToken.703900a1.js";import fe from"./auth.d0f71d97.js";import{_ as ge}from"./_plugin-vue_export-helper.c27b6911.js";import"./focus-trap.57815629.js";import"./isEqual.e7705bdc.js";import"./debounce.72a3ce06.js";import"./email-primary-icon.a0a860a0.js";import"./eye-close-icon.72093b81.js";const p=v=>(ne("data-v-76ac511e"),v=v(),ie(),v),ke={class:"main"},be={class:"main__header"},we={class:"main__form--title"},Se={class:"main__title"},he=p(()=>a("div",{class:"main__subtitle"},"Please fill the form to create workspace.",-1)),ye={key:0,class:"el-form-item__global-error-container"},Ee={class:"el-form-item__global-error"},$e=p(()=>a("img",{src:V,alt:""},null,-1)),Ie=p(()=>a("span",{for:"name",class:"custom_placeholder"}," Workspace Name ",-1)),xe=[Ie],Ve={key:0,class:"el-form-item__error"},We=["innerHTML"],Ce=p(()=>a("div",null,null,-1)),Fe={class:"main__form--actions"},Le={class:"submit-button__text"},Me=p(()=>a("img",{src:ce,alt:"arrow"},null,-1)),Be={__name:"create-workspace",setup(v){const b=Y(),{isLoadingIndustries:W,industriesList:C,industriesError:F,isLoadingSubmit:$,createWorkspaceSuccess:L,createWorkspaceError:M}=Z(b),f=ae(),B=ee(),i=d({name:null,industry_id:null}),T=d({name:{required:!0,message:"Please input workspace name",trigger:"blur"}}),t=d({name:{value:"",isShow:!1},global:{value:""}}),_=d(!1),I=d(!1);h(L,s=>{s&&ue(`/workspace/staff/${s.workspace.id}`)}),h(M,s=>{s&&(t.value.global.value=s)}),h(F,s=>{s&&(t.value.global.value=s)}),oe(async()=>{fe(),I.value=JSON.parse(localStorage.getItem("accounts"))[se.get("currentAccountID")].email,_.value=ve(),_.value=pe(),window.addEventListener("resize",D),await b.getIndustries()});const P=()=>{f.refs.createForm.validate(s=>{if(s)b.createWorkspace(i.value);else return t.value.global.value="Please fill empty areas",!1})},q=s=>{f.refs[s].focus()},A=s=>{f.refs.createForm.validateField(s,(e,k)=>{e?t.value[s].value="":t.value[s].value=k[s][0].message})},w=(s,e)=>{g()?t.value[s].isShow=e==="mouseover":e==="click"&&(t.value[s].isShow=!0)},D=()=>{f.update()},g=()=>window.innerWidth>990,N=()=>{t.value.global.value=""};return(s,e)=>{const k=J,S=X,O=G,R=K,z=Q,H=j;return l(),m("div",ke,[a("div",be,[a("div",we,[a("img",{src:me,alt:"chevron-left",onClick:e[0]||(e[0]=r=>o(B).go(-1))}),a("div",Se,"Create workspace as "+y(o(I)),1)]),he]),u(H,{ref:"createForm",class:"main__form","hide-required-asterisk":"",rules:o(T),model:o(i),onSubmit:te(P,["prevent"])},{default:n(()=>[o(t).global.value?(l(),m("div",ye,[a("div",Ee,[$e,a("span",null,y(o(t).global.value),1)]),a("span",{class:"clear-error",onClick:N},"X")])):c("",!0),u(S,{prop:"name"},{error:n(()=>[o(t).name.isShow&&g()?(l(),m("div",Ve,[a("span",{innerHTML:o(t).name.value},null,8,We)])):c("",!0),Ce]),default:n(()=>[u(k,{modelValue:o(i).name,"onUpdate:modelValue":e[5]||(e[5]=r=>o(i).name=r),class:"main__form--input",placeholder:"Workspace name",onBlur:e[6]||(e[6]=r=>A("name"))},{suffix:n(()=>[o(i).name?(l(),m("div",{key:0,style:{position:"relative"},onClick:e[1]||(e[1]=r=>q("name"))},xe)):c("",!0),o(t).name.value?(l(),m("img",{key:1,src:V,alt:"",class:"error_icon",onMouseover:e[2]||(e[2]=r=>w("name","mouseover")),onMouseout:e[3]||(e[3]=r=>w("name","mouseout")),onClick:e[4]||(e[4]=r=>w("name","click"))},null,32)):c("",!0)]),_:1},8,["modelValue"])]),_:1}),u(S,{prop:"industry_id"},{default:n(()=>[u(R,{modelValue:o(i).industry_id,"onUpdate:modelValue":e[7]||(e[7]=r=>o(i).industry_id=r),loading:o(W),class:"main__form--input",placeholder:"Select Industry"},{default:n(()=>{var r;return[(l(!0),m(re,null,le((r=o(C))==null?void 0:r.industries,(x,U)=>(l(),E(O,{key:`option_${U}`,value:x.id,label:x.name},null,8,["value","label"]))),128))]}),_:1},8,["modelValue","loading"])]),_:1}),u(S,{class:"main__form--footer"},{default:n(()=>[a("div",Fe,[u(z,{"native-type":"submit",loading:o($),class:"submit-button"},{default:n(()=>[a("span",null,[a("span",Le,y(o($)?"":"Next"),1),Me])]),_:1},8,["loading"])])]),_:1}),o(t).name.isShow&&!g()?(l(),E(de,{key:1,"dialog-visible":o(t).name.isShow&&!g(),"error-text":o(t).name.value,onVisible:e[8]||(e[8]=r=>o(t).name.isShow=!1)},null,8,["dialog-visible","error-text"])):c("",!0)]),_:1},8,["rules","model","onSubmit"]),o(_)?(l(),E(_e,{key:0,"dialog-visible":o(_),onClose:e[9]||(e[9]=r=>_.value=!1)},null,8,["dialog-visible"])):c("",!0)])}}},eo=ge(Be,[["__scopeId","data-v-76ac511e"]]);export{eo as default};
