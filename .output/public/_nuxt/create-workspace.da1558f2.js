import{E as j,_ as V,a as J,b as X}from"./el-overlay.e870726e.js";import{E as G,a as K}from"./el-select.4b9e0ee1.js";import{E as Q}from"./el-button.e608a692.js";import"./el-scrollbar.9e522778.js";import"./el-popper.5b083fb9.js";import{a as Y,s as Z,b as ee,r as d,w as y,e as oe,f as se,h as m,i as u,j as n,u as o,k as te,c as h,l as c,m as ae,o as l,p as a,t as E,F as re,q as le,v as ne,x as ie,y as ue}from"./entry.dfd13bf6.js";import{_ as me}from"./chevron-left.b6c8245a.js";import{_ as ce}from"./chevron-icon.53818441.js";import{_ as _e}from"./AccessCheckModal.f2f7f0bf.js";import{E as de}from"./ErrorMassageModal.72b1f162.js";import pe from"./settingsToken.d7d09d26.js";import fe from"./loginToken.fecd4966.js";import ve from"./auth.aef0d545.js";import{_ as ge}from"./_plugin-vue_export-helper.c27b6911.js";import"./focus-trap.5fde4ef1.js";import"./isEqual.ecd56be6.js";import"./debounce.683ed2b6.js";import"./email-primary-icon.36ae4dae.js";import"./eye-close-icon.3c80a0b0.js";const p=f=>(ie("data-v-509d3aaf"),f=f(),ue(),f),ke={class:"main"},be={class:"main__form--title"},we={class:"main__title"},Se=p(()=>a("div",{class:"main__subtitle"},"Please fill the form to create workspace.",-1)),ye={key:0,class:"el-form-item__global-error-container"},he={class:"el-form-item__global-error"},Ee=p(()=>a("img",{src:V,alt:""},null,-1)),$e=p(()=>a("span",{for:"name",class:"custom_placeholder"}," Workspace Name ",-1)),Ie=[$e],xe={key:0,class:"el-form-item__error"},Ve=["innerHTML"],We=p(()=>a("div",null,null,-1)),Ce={class:"main__form--actions"},Fe={class:"submit-button__text"},Le=p(()=>a("img",{src:ce,alt:"arrow"},null,-1)),Me={__name:"create-workspace",setup(f){const b=Y(),{isLoadingIndustries:W,industriesList:C,industriesError:F,isLoadingSubmit:$,createWorkspaceSuccess:L,createWorkspaceError:M}=Z(b),v=ae(),B=ee(),i=d({name:null,industry_id:null}),T=d({name:{required:!0,message:"Please input workspace name",trigger:"blur"}}),t=d({name:{value:"",isShow:!1},global:{value:""}}),_=d(!1),I=d(!1);y(L,s=>{s&&ne(`/workspace/staff/${s.workspace.id}`)}),y(M,s=>{s&&(t.value.global.value=s)}),y(F,s=>{s&&(t.value.global.value=s)}),oe(async()=>{ve(),I.value=JSON.parse(localStorage.getItem("accounts"))[se.get("currentAccountID")].email,_.value=fe(),_.value=pe(),window.addEventListener("resize",D),await b.getIndustries()});const P=()=>{v.refs.createForm.validate(s=>{if(s)b.createWorkspace(i.value);else return t.value.global.value="Please fill empty areas",!1})},q=s=>{v.refs[s].focus()},A=s=>{v.refs.createForm.validateField(s,(e,k)=>{e?t.value[s].value="":t.value[s].value=k[s][0].message})},w=(s,e)=>{g()?t.value[s].isShow=e==="mouseover":e==="click"&&(t.value[s].isShow=!0)},D=()=>{v.update()},g=()=>window.innerWidth>990,N=()=>{t.value.global.value=""};return(s,e)=>{const k=J,S=X,O=G,R=K,z=Q,H=j;return l(),m("div",ke,[u(H,{ref:"createForm",class:"main__form","hide-required-asterisk":"",rules:o(T),model:o(i),onSubmit:te(P,["prevent"])},{default:n(()=>[a("div",be,[a("img",{src:me,alt:"chevron-left",onClick:e[0]||(e[0]=r=>o(B).go(-1))}),a("div",we,"Create workspace as "+E(o(I)),1)]),Se,o(t).global.value?(l(),m("div",ye,[a("div",he,[Ee,a("span",null,E(o(t).global.value),1)]),a("span",{class:"clear-error",onClick:N},"X")])):c("",!0),u(S,{prop:"name"},{error:n(()=>[o(t).name.isShow&&g()?(l(),m("div",xe,[a("span",{innerHTML:o(t).name.value},null,8,Ve)])):c("",!0),We]),default:n(()=>[u(k,{modelValue:o(i).name,"onUpdate:modelValue":e[5]||(e[5]=r=>o(i).name=r),class:"main__form--input",placeholder:"Workspace name",onBlur:e[6]||(e[6]=r=>A("name"))},{suffix:n(()=>[o(i).name?(l(),m("div",{key:0,style:{position:"relative"},onClick:e[1]||(e[1]=r=>q("name"))},Ie)):c("",!0),o(t).name.value?(l(),m("img",{key:1,src:V,alt:"",class:"error_icon",onMouseover:e[2]||(e[2]=r=>w("name","mouseover")),onMouseout:e[3]||(e[3]=r=>w("name","mouseout")),onClick:e[4]||(e[4]=r=>w("name","click"))},null,32)):c("",!0)]),_:1},8,["modelValue"])]),_:1}),u(S,{prop:"industry_id"},{default:n(()=>[u(R,{modelValue:o(i).industry_id,"onUpdate:modelValue":e[7]||(e[7]=r=>o(i).industry_id=r),loading:o(W),class:"main__form--input",placeholder:"Select Industry"},{default:n(()=>{var r;return[(l(!0),m(re,null,le((r=o(C))==null?void 0:r.industries,(x,U)=>(l(),h(O,{key:`option_${U}`,value:x.id,label:x.name},null,8,["value","label"]))),128))]}),_:1},8,["modelValue","loading"])]),_:1}),u(S,{class:"main__form--footer"},{default:n(()=>[a("div",Ce,[u(z,{"native-type":"submit",loading:o($),class:"submit-button"},{default:n(()=>[a("span",null,[a("span",Fe,E(o($)?"":"Next"),1),Le])]),_:1},8,["loading"])])]),_:1}),o(t).name.isShow&&!g()?(l(),h(de,{key:1,"dialog-visible":o(t).name.isShow&&!g(),"error-text":o(t).name.value,onVisible:e[8]||(e[8]=r=>o(t).name.isShow=!1)},null,8,["dialog-visible","error-text"])):c("",!0)]),_:1},8,["rules","model","onSubmit"]),o(_)?(l(),h(_e,{key:0,"dialog-visible":o(_),onClose:e[9]||(e[9]=r=>_.value=!1)},null,8,["dialog-visible"])):c("",!0)])}}},Ze=ge(Me,[["__scopeId","data-v-509d3aaf"]]);export{Ze as default};
