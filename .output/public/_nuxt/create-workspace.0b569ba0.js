import{E as G,_ as C,a as K,b as Q}from"./el-overlay.b881d95e.js";import{E as Y,a as Z}from"./el-select.5aef8271.js";import{E as ee}from"./el-button.ad3d8374.js";import"./el-form-item.4ed993c7.js";import"./el-scrollbar.ffe35417.js";import"./el-popper.39f5a9bb.js";import{a as oe,s as se,b as te,r as p,w as S,e as ae,f as x,h as m,i as u,j as n,u as e,k as re,c as h,l as c,m as le,o as l,p as a,t as y,F as ne,q as ie,v as ue,x as me,y as ce}from"./entry.02f4b0bd.js";import{_ as _e}from"./chevron-left.a007c1be.js";import{_ as de}from"./chevron-icon.1d8facbb.js";import{_ as pe}from"./AccessCheckModal.f9699d5f.js";import{E as fe}from"./ErrorMassageModal.0972639d.js";import ve from"./settingsToken.b2c382a0.js";import ge from"./loginToken.1f920f38.js";import ke from"./auth.b2c66989.js";import{_ as be}from"./_plugin-vue_export-helper.c27b6911.js";import"./focus-trap.ff8e5da0.js";import"./isEqual.03774993.js";import"./debounce.3c6a66cb.js";import"./email-primary-icon.8afb4835.js";import"./eye-close-icon.0b9a95ed.js";const f=v=>(me("data-v-38152057"),v=v(),ce(),v),we={class:"main"},Se={class:"main__form--title"},he={class:"main__title"},ye=f(()=>a("div",{class:"main__subtitle"},"Please fill the form to create workspace.",-1)),Ee={key:0,class:"el-form-item__global-error-container"},Ie={class:"el-form-item__global-error"},$e=f(()=>a("img",{src:C,alt:""},null,-1)),xe=f(()=>a("span",{for:"name",class:"custom_placeholder"}," Workspace Name ",-1)),Ce=[xe],Ve={key:0,class:"el-form-item__error"},We=["innerHTML"],Fe=f(()=>a("div",null,null,-1)),Le={class:"main__form--actions"},Me={class:"submit-button__text"},Be=f(()=>a("img",{src:de,alt:"arrow"},null,-1)),Te={__name:"create-workspace",setup(v){const k=oe(),{isLoadingIndustries:V,industriesList:W,industriesError:F,isLoadingSubmit:E,createWorkspaceSuccess:L,createWorkspaceError:M}=se(k),g=le(),B=te(),i=p({name:null,industry_id:null}),T=p({name:{required:!0,message:"Please input workspace name",trigger:"blur"}}),t=p({name:{value:"",isShow:!1},global:{value:""}}),_=p(!1),I=p(!1);S(L,o=>{o&&ue("/profile")}),S(M,o=>{o&&(t.value.global.value=o)}),S(F,o=>{o&&(t.value.global.value=o)}),ae(async()=>{ke(),I.value=JSON.parse(localStorage.getItem("accounts"))[x.get("currentAccountID")].email,console.log(x.get("currentAccountID")),_.value=ge(),_.value=ve(),window.addEventListener("resize",z),await k.getIndustries()});const D=()=>{g.refs.createForm.validate(o=>{if(o)k.createWorkspace(i.value);else return t.value.global.value="Please fill empty areas",!1})},N=o=>{g.refs[o].focus()},P=o=>{g.refs.createForm.validateField(o,(s,b)=>{s?t.value[o].value="":t.value[o].value=b[o][0].message})},q=o=>{t.value[o].isShow=!0},O=o=>{d()&&(t.value[o].isShow=!0)},R=o=>{d()&&(t.value[o].isShow=!1)},z=()=>{g.update()},d=()=>window.innerWidth>990,A=()=>{t.value.global.value=""};return(o,s)=>{const b=K,w=Q,H=Y,U=Z,j=ee,J=G;return l(),m("div",we,[u(J,{ref:"createForm",class:"main__form","hide-required-asterisk":"",rules:e(T),model:e(i),onSubmit:re(D,["prevent"])},{default:n(()=>[a("div",Se,[a("img",{src:_e,alt:"chevron-left",onClick:s[0]||(s[0]=r=>e(B).go(-1))}),a("div",he,"Create workspace as "+y(e(I)),1)]),ye,e(t).global.value?(l(),m("div",Ee,[a("div",Ie,[$e,a("span",null,y(e(t).global.value),1)]),a("span",{class:"clear-error",onClick:A},"X")])):c("",!0),u(w,{prop:"name"},{error:n(()=>[e(t).name.isShow&&d()?(l(),m("div",Ve,[a("span",{innerHTML:e(t).name.value},null,8,We)])):c("",!0),Fe]),default:n(()=>[u(b,{modelValue:e(i).name,"onUpdate:modelValue":s[5]||(s[5]=r=>e(i).name=r),class:"main__form--input",placeholder:"Workspace name",onBlur:s[6]||(s[6]=r=>P("name"))},{suffix:n(()=>[e(i).name?(l(),m("div",{key:0,style:{position:"relative"},onClick:s[1]||(s[1]=r=>N("name"))},Ce)):c("",!0),e(t).name.value?(l(),m("img",{key:1,src:C,alt:"",class:"error_icon",onMouseover:s[2]||(s[2]=r=>O("name")),onMouseout:s[3]||(s[3]=r=>R("name")),onClick:s[4]||(s[4]=r=>q("name"))},null,32)):c("",!0)]),_:1},8,["modelValue"])]),_:1}),u(w,{prop:"industry_id"},{default:n(()=>[u(U,{modelValue:e(i).industry_id,"onUpdate:modelValue":s[7]||(s[7]=r=>e(i).industry_id=r),loading:e(V),class:"main__form--input",placeholder:"Select Industry"},{default:n(()=>{var r;return[(l(!0),m(ne,null,ie((r=e(W))==null?void 0:r.industries,($,X)=>(l(),h(H,{key:`option_${X}`,value:$.id,label:$.name},null,8,["value","label"]))),128))]}),_:1},8,["modelValue","loading"])]),_:1}),u(w,{class:"main__form--footer"},{default:n(()=>[a("div",Le,[u(j,{"native-type":"submit",loading:e(E),class:"submit-button"},{default:n(()=>[a("span",null,[a("span",Me,y(e(E)?"":"Next"),1),Be])]),_:1},8,["loading"])])]),_:1}),e(t).name.isShow&&!d()?(l(),h(fe,{key:1,"dialog-visible":e(t).name.isShow&&!d(),"error-text":e(t).name.value,onVisible:s[8]||(s[8]=r=>e(t).name.isShow=!1)},null,8,["dialog-visible","error-text"])):c("",!0)]),_:1},8,["rules","model","onSubmit"]),e(_)?(l(),h(pe,{key:0,"dialog-visible":e(_),onClose:s[9]||(s[9]=r=>_.value=!1)},null,8,["dialog-visible"])):c("",!0)])}}},so=be(Te,[["__scopeId","data-v-38152057"]]);export{so as default};
