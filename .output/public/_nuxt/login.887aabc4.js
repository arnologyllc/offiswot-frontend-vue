import{E as G}from"./focus-trap.04464a06.js";import{_ as x,E as N,a as O}from"./error.3564d58a.js";import{E as X}from"./index.f11c27d2.js";import{E as J}from"./index.9ce43428.js";import{A as K,s as Q,b as Y,e as Z,r as c,w as T,h as ee,B as k,x as y,o as a,i as _,l as i,j as f,k as n,u as o,t as q,m,C as oe,q as F,v as se,c as E,y as le,z as re}from"./entry.dabfc507.js";import{C as ie,_ as te}from"./user-icon.168da3a9.js";import{_ as ae}from"./lock-icon.3790485a.js";import{L as ne}from"./LoginButtons.a98def6d.js";import{E as L}from"./ErrorMassageModal.8c97b422.js";import{h as me,s as ue}from"./eye-close-icon.eaa88d21.js";import{_ as de}from"./_plugin-vue_export-helper.c27b6911.js";import"./isEqual.5d82a5a0.js";import"./flatten.1b9012b9.js";import"./email-primary-icon.1455806e.js";import"./chevron-icon.ef3f9a72.js";const u=v=>(le("data-v-00ebc662"),v=v(),re(),v),pe={class:"main"},_e={class:"main__form"},fe=u(()=>i("div",{class:"main__form--title"},"Log In",-1)),ce=u(()=>i("div",{class:"main__form--subtitle"},"Please fill the forms to log in",-1)),ve={key:0,class:"el-form-item__global-error-container"},ge={class:"el-form-item__global-error"},we=u(()=>i("img",{src:x,alt:""},null,-1)),be=u(()=>i("img",{src:te,alt:"user_icon"},null,-1)),ye=u(()=>i("span",{for:"email",class:"placeholder"}," Email or username ",-1)),he=[ye],ke=u(()=>i("div",null,null,-1)),Ee={key:0,class:"el-form-item__error"},xe=u(()=>i("div",null,null,-1)),Se=u(()=>i("img",{src:ae,alt:"password_icon"},null,-1)),Ve=u(()=>i("span",{for:"password",class:"password-placeholder"}," Password ",-1)),Ce=[Ve],$e=["src"],Ie={key:0,class:"el-form-item__error"},Be=["innerHTML"],Me=u(()=>i("div",null,null,-1)),Te={class:"forgot-password"},qe={__name:"login",setup(v){const h=K(),{loginSuccessData:P,loginErrorData:z}=Q(h),g=Y(),S=Z(),w=c(!1),b=c(!1),t=c({email:null,password:null,remember_me:!1}),l=c({email:{value:"",isShow:!1},password:{value:"",isShow:!1},global:{value:""}}),D=c({email:[{required:!0,message:"This field is required.",trigger:"blur"}],password:[{required:!0,message:"This field is required.",trigger:"blur"}]});T(P,({access_token:s,is_first_login:e})=>{const p=t.value.remember_me?0:.041666666666666664;k.set("token",s,{expires:p}),e?(y("/pin"),k.set("first_login",e)):y("/")}),T(z,s=>{if((s==="Please visit your email to verify your account."||(s==null?void 0:s.error)==="Please visit your email to verify your account.")&&(b.value=!0),s==="Incorrect username or password."&&(l.value.global.value=s),typeof s!="string")for(const e in s)if(typeof s[e]!="string")for(const p in s[e])l.value.global.value=s[e][p];else l.value.global.value=s[e]}),ee(()=>{S.query.email&&(t.email=S.query.email),k.get("token")&&y("/"),window.addEventListener("resize",U)});const R=()=>{g.refs.loginForm.validate(s=>{if(s)h.loginUser(t.value);else return l.value.global.value="Please fill empty areas",!1})},V=s=>{g.refs[s].focus()},C=s=>{g.refs.loginForm.validateField(s,(e,p)=>{e?l.value[s].value="":l.value[s].value=p[s][0].message})},$=s=>{l.value[s].isShow=!0},I=s=>{d()&&(l.value[s].isShow=!0)},B=s=>{d()&&(l.value[s].isShow=!1)},U=()=>{g.update()},d=()=>window.innerWidth>990,j=()=>{l.value.global.value=""};return(s,e)=>{const p=G,M=N,A=X,H=J,W=O;return a(),_("div",pe,[i("div",_e,[fe,ce,f(W,{ref:"loginForm",class:"main__form--box","hide-required-asterisk":"",model:o(t),rules:o(D),onSubmit:se(R,["prevent"])},{default:n(()=>[o(l).global.value?(a(),_("div",ve,[i("div",ge,[we,i("span",null,q(o(l).global.value),1)]),i("span",{class:"clear-error",onClick:j},"X")])):m("",!0),f(M,{prop:"email"},{error:n(()=>[o(l).email.isShow&&d()?(a(),_("div",Ee,[i("span",null,q(o(l).email.value),1)])):m("",!0),xe]),default:n(()=>[f(p,{ref:"email",modelValue:o(t).email,"onUpdate:modelValue":e[4]||(e[4]=r=>o(t).email=r),class:"main__form--box__input",placeholder:"Email or username",onBlur:e[5]||(e[5]=r=>C("email"))},{prefix:n(()=>[be]),suffix:n(()=>[o(l).email.value?(a(),_("img",{key:0,class:"error_icon",src:x,alt:"",onMouseover:e[0]||(e[0]=r=>I("email")),onMouseout:e[1]||(e[1]=r=>B("email")),onClick:e[2]||(e[2]=r=>$("email"))},null,32)):m("",!0),o(t).email?(a(),_("div",{key:1,style:{position:"relative"},onClick:e[3]||(e[3]=r=>V("email"))},he)):m("",!0),ke]),_:1},8,["modelValue"])]),_:1}),f(M,{prop:"password",class:"password-form-item"},{error:n(()=>[o(l).password.isShow&&d()?(a(),_("div",Ie,[i("span",{innerHTML:o(l).password.value},null,8,Be)])):m("",!0),Me]),default:n(()=>[f(p,{id:"password",ref:"password",modelValue:o(t).password,"onUpdate:modelValue":e[11]||(e[11]=r=>o(t).password=r),type:o(w)?"text":"password",class:"main__form--box__input",placeholder:"Password",onBlur:e[12]||(e[12]=r=>C("password"))},{prefix:n(()=>[Se]),suffix:n(()=>[o(t).password?(a(),_("div",{key:0,style:{position:"relative"},onClick:e[6]||(e[6]=r=>V("password"))},Ce)):m("",!0),i("img",{class:oe(o(l).password.value?"eye_icon":""),src:o(w)?o(me):o(ue),alt:"eye_icon",onClick:e[7]||(e[7]=r=>w.value=!o(w))},null,10,$e),o(l).password.value?(a(),_("img",{key:1,src:x,alt:"",class:"error_icon",onMouseover:e[8]||(e[8]=r=>I("password")),onMouseout:e[9]||(e[9]=r=>B("password")),onClick:e[10]||(e[10]=r=>$("password"))},null,32)):m("",!0)]),_:1},8,["modelValue","type"]),i("div",Te,[f(A,{modelValue:o(t).remember_me,"onUpdate:modelValue":e[13]||(e[13]=r=>o(t).remember_me=r),class:"remember-checkbox"},{default:n(()=>[F("Remember me")]),_:1},8,["modelValue"]),f(H,{text:"",style:{"font-size":"14px","font-weight":"400"},onClick:e[14]||(e[14]=r=>("navigateTo"in s?s.navigateTo:o(y))("/password/forgot"))},{default:n(()=>[F("Forgot Password?")]),_:1})])]),_:1}),f(ne,{"login-loading":o(h).loginLoading,"login-title":"Log In","social-title":"Sign in with Google"},null,8,["login-loading"])]),_:1},8,["model","rules","onSubmit"])]),o(b)?(a(),E(ie,{key:0,email:o(t).email,dialogVisible:o(b),onClose:e[15]||(e[15]=r=>b.value=!1)},null,8,["email","dialogVisible"])):m("",!0),o(l).email.isShow&&!d()?(a(),E(L,{key:1,dialogVisible:o(l).email.isShow&&!d(),"error-text":o(l).email.value,onVisible:e[16]||(e[16]=r=>o(l).email.isShow=!1)},null,8,["dialogVisible","error-text"])):m("",!0),o(l).password.isShow&&!d()?(a(),E(L,{key:2,dialogVisible:o(l).password.isShow&&!d(),"error-text":o(l).password.value,onVisible:e[17]||(e[17]=r=>o(l).password.isShow=!1)},null,8,["dialogVisible","error-text"])):m("",!0)])}}},Je=de(qe,[["__scopeId","data-v-00ebc662"]]);export{Je as default};
